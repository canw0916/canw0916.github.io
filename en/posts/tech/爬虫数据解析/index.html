<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>çˆ¬è™«æ•°æ®è§£æ | Felix's Blog</title><meta name=keywords content><meta name=description content="æ•°æ®è§£æ
ä½•ä¸ºæ•°æ®è§£æ

æ¦‚å¿µï¼šå°±æ˜¯å°†çˆ¬å–åˆ°æ•°æ®ä¸­å±€éƒ¨çš„æŒ‡å®šçš„æ•°æ®è¿›è¡Œæå–
ä½œç”¨ï¼šå®ç°èšç„¦çˆ¬è™«
æ•°æ®è§£æé€šç”¨åŸç†ï¼š

htmlæ˜¯ç”¨æ¥å±•ç¤ºæ•°æ®ï¼Œhtmlä¸­å±•ç¤ºçš„æ•°æ®æ­£æ˜¯æˆ‘ä»¬è¦çˆ¬å–æˆ–è€…é‡‡é›†çš„æ•°æ®
htmlæ‰€å±•ç¤ºçš„æ•°æ®/æƒ³è¦çˆ¬å–çš„æ•°æ®åªä¼šå­˜åœ¨äºæ ‡ç­¾ä¹‹é—´æˆ–è€…æ ‡ç­¾çš„å±æ€§ä¸­
æ•°æ®è§£æçš„é€šç”¨åŸç†ï¼š

æ ‡ç­¾å®šä½
æå–æ ‡ç­¾ä¸­å­˜å‚¨çš„æ•°æ®




èšç„¦çˆ¬è™«ç¼–ç æµç¨‹

æŒ‡å®šurl
å‘èµ·è¯·æ±‚
è·å–å“åº”æ•°æ®
æ•°æ®è§£æ
æŒä¹…åŒ–å­˜å‚¨



æ•°æ®è§£æçš„ä¸»æµç­–ç•¥


å¦‚ä½•çˆ¬å–å¤šåª’ä½“èµ„æºï¼ˆå›¾ç‰‡ï¼ŒéŸ³é¢‘ï¼Œè§†é¢‘ï¼ŒåŠ¨å›¾ï¼‰"><meta name=author content="
ä½œè€…:Felix"><link rel=canonical href=https://canw0916.github.io/en/posts/tech/%E7%88%AC%E8%99%AB%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90/><link crossorigin=anonymous href=/assets/css/stylesheet.a7d877c95a8fd8f651ae0a99e2d0566db6cd06091905d495b3f79ebd3536ed91.css integrity="sha256-p9h3yVqP2PZRrgqZ4tBWbbbNBgkZBdSVs/eevTU27ZE=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://canw0916.github.io/img/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://canw0916.github.io/img/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://canw0916.github.io/img/favicon-32x32.png><link rel=apple-touch-icon href=https://canw0916.github.io/img/apple-touch-icon.png><link rel=mask-icon href=https://canw0916.github.io/img/android-chrome-512x512.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://canw0916.github.io/en/posts/tech/%E7%88%AC%E8%99%AB%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-7ENSZ7BS0C"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-7ENSZ7BS0C")}</script><meta property="og:title" content="çˆ¬è™«æ•°æ®è§£æ"><meta property="og:description" content="æ•°æ®è§£æ
ä½•ä¸ºæ•°æ®è§£æ

æ¦‚å¿µï¼šå°±æ˜¯å°†çˆ¬å–åˆ°æ•°æ®ä¸­å±€éƒ¨çš„æŒ‡å®šçš„æ•°æ®è¿›è¡Œæå–
ä½œç”¨ï¼šå®ç°èšç„¦çˆ¬è™«
æ•°æ®è§£æé€šç”¨åŸç†ï¼š

htmlæ˜¯ç”¨æ¥å±•ç¤ºæ•°æ®ï¼Œhtmlä¸­å±•ç¤ºçš„æ•°æ®æ­£æ˜¯æˆ‘ä»¬è¦çˆ¬å–æˆ–è€…é‡‡é›†çš„æ•°æ®
htmlæ‰€å±•ç¤ºçš„æ•°æ®/æƒ³è¦çˆ¬å–çš„æ•°æ®åªä¼šå­˜åœ¨äºæ ‡ç­¾ä¹‹é—´æˆ–è€…æ ‡ç­¾çš„å±æ€§ä¸­
æ•°æ®è§£æçš„é€šç”¨åŸç†ï¼š

æ ‡ç­¾å®šä½
æå–æ ‡ç­¾ä¸­å­˜å‚¨çš„æ•°æ®




èšç„¦çˆ¬è™«ç¼–ç æµç¨‹

æŒ‡å®šurl
å‘èµ·è¯·æ±‚
è·å–å“åº”æ•°æ®
æ•°æ®è§£æ
æŒä¹…åŒ–å­˜å‚¨



æ•°æ®è§£æçš„ä¸»æµç­–ç•¥


å¦‚ä½•çˆ¬å–å¤šåª’ä½“èµ„æºï¼ˆå›¾ç‰‡ï¼ŒéŸ³é¢‘ï¼Œè§†é¢‘ï¼ŒåŠ¨å›¾ï¼‰"><meta property="og:type" content="article"><meta property="og:url" content="https://canw0916.github.io/en/posts/tech/%E7%88%AC%E8%99%AB%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-10T13:57:02+08:00"><meta property="article:modified_time" content="2023-02-10T13:57:02+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="çˆ¬è™«æ•°æ®è§£æ"><meta name=twitter:description content="æ•°æ®è§£æ
ä½•ä¸ºæ•°æ®è§£æ

æ¦‚å¿µï¼šå°±æ˜¯å°†çˆ¬å–åˆ°æ•°æ®ä¸­å±€éƒ¨çš„æŒ‡å®šçš„æ•°æ®è¿›è¡Œæå–
ä½œç”¨ï¼šå®ç°èšç„¦çˆ¬è™«
æ•°æ®è§£æé€šç”¨åŸç†ï¼š

htmlæ˜¯ç”¨æ¥å±•ç¤ºæ•°æ®ï¼Œhtmlä¸­å±•ç¤ºçš„æ•°æ®æ­£æ˜¯æˆ‘ä»¬è¦çˆ¬å–æˆ–è€…é‡‡é›†çš„æ•°æ®
htmlæ‰€å±•ç¤ºçš„æ•°æ®/æƒ³è¦çˆ¬å–çš„æ•°æ®åªä¼šå­˜åœ¨äºæ ‡ç­¾ä¹‹é—´æˆ–è€…æ ‡ç­¾çš„å±æ€§ä¸­
æ•°æ®è§£æçš„é€šç”¨åŸç†ï¼š

æ ‡ç­¾å®šä½
æå–æ ‡ç­¾ä¸­å­˜å‚¨çš„æ•°æ®




èšç„¦çˆ¬è™«ç¼–ç æµç¨‹

æŒ‡å®šurl
å‘èµ·è¯·æ±‚
è·å–å“åº”æ•°æ®
æ•°æ®è§£æ
æŒä¹…åŒ–å­˜å‚¨



æ•°æ®è§£æçš„ä¸»æµç­–ç•¥


å¦‚ä½•çˆ¬å–å¤šåª’ä½“èµ„æºï¼ˆå›¾ç‰‡ï¼ŒéŸ³é¢‘ï¼Œè§†é¢‘ï¼ŒåŠ¨å›¾ï¼‰"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ğŸ“šæ–‡ç« ","item":"https://canw0916.github.io/en/posts/"},{"@type":"ListItem","position":2,"name":"ğŸš€ æŠ€æœ¯","item":"https://canw0916.github.io/en/posts/tech/"},{"@type":"ListItem","position":3,"name":"çˆ¬è™«æ•°æ®è§£æ","item":"https://canw0916.github.io/en/posts/tech/%E7%88%AC%E8%99%AB%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"çˆ¬è™«æ•°æ®è§£æ","name":"çˆ¬è™«æ•°æ®è§£æ","description":"æ•°æ®è§£æ ä½•ä¸ºæ•°æ®è§£æ æ¦‚å¿µï¼šå°±æ˜¯å°†çˆ¬å–åˆ°æ•°æ®ä¸­å±€éƒ¨çš„æŒ‡å®šçš„æ•°æ®è¿›è¡Œæå– ä½œç”¨ï¼šå®ç°èšç„¦çˆ¬è™« æ•°æ®è§£æé€šç”¨åŸç†ï¼š htmlæ˜¯ç”¨æ¥å±•ç¤ºæ•°æ®ï¼Œhtmlä¸­å±•ç¤ºçš„æ•°æ®æ­£æ˜¯æˆ‘ä»¬è¦çˆ¬å–æˆ–è€…é‡‡é›†çš„æ•°æ® htmlæ‰€å±•ç¤ºçš„æ•°æ®/æƒ³è¦çˆ¬å–çš„æ•°æ®åªä¼šå­˜åœ¨äºæ ‡ç­¾ä¹‹é—´æˆ–è€…æ ‡ç­¾çš„å±æ€§ä¸­ æ•°æ®è§£æçš„é€šç”¨åŸç†ï¼š æ ‡ç­¾å®šä½ æå–æ ‡ç­¾ä¸­å­˜å‚¨çš„æ•°æ® èšç„¦çˆ¬è™«ç¼–ç æµç¨‹ æŒ‡å®šurl å‘èµ·è¯·æ±‚ è·å–å“åº”æ•°æ® æ•°æ®è§£æ æŒä¹…åŒ–å­˜å‚¨ æ•°æ®è§£æçš„ä¸»æµç­–ç•¥ å¦‚ä½•çˆ¬å–å¤šåª’ä½“èµ„æºï¼ˆå›¾ç‰‡ï¼ŒéŸ³é¢‘ï¼Œè§†é¢‘ï¼ŒåŠ¨å›¾ï¼‰\n","keywords":[""],"articleBody":"æ•°æ®è§£æ ä½•ä¸ºæ•°æ®è§£æ æ¦‚å¿µï¼šå°±æ˜¯å°†çˆ¬å–åˆ°æ•°æ®ä¸­å±€éƒ¨çš„æŒ‡å®šçš„æ•°æ®è¿›è¡Œæå– ä½œç”¨ï¼šå®ç°èšç„¦çˆ¬è™« æ•°æ®è§£æé€šç”¨åŸç†ï¼š htmlæ˜¯ç”¨æ¥å±•ç¤ºæ•°æ®ï¼Œhtmlä¸­å±•ç¤ºçš„æ•°æ®æ­£æ˜¯æˆ‘ä»¬è¦çˆ¬å–æˆ–è€…é‡‡é›†çš„æ•°æ® htmlæ‰€å±•ç¤ºçš„æ•°æ®/æƒ³è¦çˆ¬å–çš„æ•°æ®åªä¼šå­˜åœ¨äºæ ‡ç­¾ä¹‹é—´æˆ–è€…æ ‡ç­¾çš„å±æ€§ä¸­ æ•°æ®è§£æçš„é€šç”¨åŸç†ï¼š æ ‡ç­¾å®šä½ æå–æ ‡ç­¾ä¸­å­˜å‚¨çš„æ•°æ® èšç„¦çˆ¬è™«ç¼–ç æµç¨‹ æŒ‡å®šurl å‘èµ·è¯·æ±‚ è·å–å“åº”æ•°æ® æ•°æ®è§£æ æŒä¹…åŒ–å­˜å‚¨ æ•°æ®è§£æçš„ä¸»æµç­–ç•¥ å¦‚ä½•çˆ¬å–å¤šåª’ä½“èµ„æºï¼ˆå›¾ç‰‡ï¼ŒéŸ³é¢‘ï¼Œè§†é¢‘ï¼ŒåŠ¨å›¾ï¼‰\næ–¹å¼1ï¼šç¼–å†™éº»çƒ¦ï¼Œä½†æ˜¯å¯ä»¥å®ç°UAä¼ªè£…\nimport requests headers = { 'User-Agent':'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36X-Requested-With: XMLHttpRequest' } #è·å–å›¾ç‰‡åœ°å€ï¼šé€šå¸¸ä¸ºimgæ ‡ç­¾çš„srcå±æ€§å€¼ img_src = 'http://img.itlun.cn/uploads/allimg/180506/1-1P5061TS6-lp.jpg' #å¯¹å›¾ç‰‡å‘èµ·è¯·æ±‚ response = requests.get(url=img_src,headers=headers) #è·å–å›¾ç‰‡æ•°æ®:contentè¿”å›çš„æ˜¯äºŒè¿›åˆ¶å½¢å¼çš„å“åº”æ•°æ® img_data = response.content #æŒä¹…åŒ–å­˜å‚¨ with open('./123.jpg','wb') as fp: fp.write(img_data) æ–¹å¼2ï¼šç¼–å†™ç®€å•ï¼Œä½†æ˜¯æ— æ³•å®ç°UAä¼ªè£…\nfrom urllib import request img_src = 'http://img.itlun.cn/uploads/allimg/180506/1-1P5061TS6-lp.jpg' #urlretrieveå¯ä»¥ç›´æ¥å¯¹å›¾ç‰‡å‘èµ·è¯·æ±‚ï¼Œä¸”å°†è¯·æ±‚åˆ°çš„å›¾ç‰‡æ•°æ®è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨ request.urlretrieve(img_src,'./456.jpg') æ­£åˆ™ï¼ˆåŸºæœ¬æŒæ¡ï¼‰\næ¡ˆä¾‹åº”ç”¨ï¼šæ‰¹é‡çˆ¬å–å›¾ç‰‡\nurlï¼šhttp://md.itlun.cn/a/nhtp/\nå¤§è‡´æ€è·¯ï¼š\nå°†é¡µé¢ä¸­æ¯ä¸€å¼ å›¾ç‰‡çš„å›¾ç‰‡åœ°å€è§£æå‡ºæ¥ å¯¹å›¾ç‰‡åœ°å€å‘èµ·è¯·æ±‚è·å–å›¾ç‰‡æ•°æ®ï¼Œç„¶åè¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨ æ³¨æ„ï¼š\nå¼€å‘è€…å·¥å…·ä¸­Elementsé€‰é¡¹å¡ä¸­æ˜¾ç¤ºçš„é¡µé¢æºç æ•°æ®ï¼ˆä¼šåŒ…å«åŠ¨æ€åŠ è½½æ•°æ®ï¼‰ï¼š æ˜¯é€šè¿‡æ‰€æœ‰æ•°æ®åŒ…è¯·æ±‚åˆ°çš„æ•°æ®æ¸²æŸ“å®Œæ¯•åçš„å®Œæ•´æ•°æ® æŠ“åŒ…å·¥å…·Networkä¸­responseæ˜¾ç¤ºçš„é¡µé¢æºç æ•°æ®ï¼šï¼ˆä¸åŒ…å«åŠ¨æ€åŠ è½½æ•°æ®ï¼‰ å…¶å®å°±æ˜¯é€šè¿‡requestsæ¨¡å—å¯¹è¯¥æ•°æ®åŒ…çš„urlå‘èµ·è¯·æ±‚è·å–çš„å“åº”æ•°æ® å•ç‹¬è¯¥æ•°æ®åŒ…è¯·æ±‚åˆ°çš„å“åº”æ•°æ® from urllib import request import requests import re main_url = 'http://md.itlun.cn/a/nhtp/' response = requests.get(url=main_url) #å¤„ç†é¡µé¢ä¸­çš„ä¸­æ–‡ä¹±ç  response.encoding = 'gbk' #è·å–äº†é¡µé¢æºç æ•°æ® page_text = response.text #æ•°æ®è§£æï¼šè§£æå›¾ç‰‡çš„åœ°å€ # ex = '.*?","wordCount":"5570","inLanguage":"en","datePublished":"2023-02-10T13:57:02+08:00","dateModified":"2023-02-10T13:57:02+08:00","author":[{"@type":"Person","name":"Felix"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://canw0916.github.io/en/posts/tech/%E7%88%AC%E8%99%AB%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90/"},"publisher":{"@type":"Organization","name":"Felix's Blog","logo":{"@type":"ImageObject","url":"https://canw0916.github.io/img/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><script async src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script><header class=header><nav class=nav><div class=logo><a href=https://canw0916.github.io/en/ accesskey=h title="Felix's Blog (Alt + H)"><img src=https://canw0916.github.io/img/android-chrome-512x512.png alt=logo aria-label=logo height=35>Felix's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://canw0916.github.io/en/search title="ğŸ” æœç´¢ (Alt + /)" accesskey=/><span>ğŸ” æœç´¢</span></a></li><li><a href=https://canw0916.github.io/en/ title="ğŸ  ä¸»é¡µ"><span>ğŸ  ä¸»é¡µ</span></a></li><li><a href=https://canw0916.github.io/en/posts title="ğŸ“š æ–‡ç« "><span>ğŸ“š æ–‡ç« </span></a></li><li><a href=https://canw0916.github.io/en/tags title="ğŸ’¡ æ ‡ç­¾"><span>ğŸ’¡ æ ‡ç­¾</span></a></li><li><a href=https://canw0916.github.io/en/archives/ title="â±ï¸ æ—¶é—´è½´"><span>â±ï¸ æ—¶é—´è½´</span></a></li><li><a href=https://canw0916.github.io/en/about title="ğŸ‘¦ å…³äº"><span>ğŸ‘¦ å…³äº</span></a></li><li><a href=https://canw0916.github.io/en/links title="ğŸ˜º å‹é“¾"><span>ğŸ˜º å‹é“¾</span></a></li></ul></nav></header><main class="main page"><article class=post-single><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://canw0916.github.io/en/>ğŸ ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href=https://canw0916.github.io/en/posts/>ğŸ“šæ–‡ç« </a>&nbsp;Â»&nbsp;<a href=https://canw0916.github.io/en/posts/tech/>ğŸš€ æŠ€æœ¯</a></div><h1 class=post-title>çˆ¬è™«æ•°æ®è§£æ</h1><div class=post-meta>åˆ›å»º:2023-02-10|å­—æ•°:5570å­—|æ—¶é•¿: 12åˆ†é’Ÿ|
ä½œè€…:Felix
&nbsp;&nbsp;æ ‡ç­¾: &nbsp;<ul class=post-tags-meta><a href=https://canw0916.github.io/en/tags/python/>Python</a></ul><span id=busuanzi_container_page_pv>&nbsp;| è®¿é—®: <span id=busuanzi_value_page_pv></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>æ–‡ç« ç›®å½•</span></summary><div class=inner><ul><li><a href=#%e6%95%b0%e6%8d%ae%e8%a7%a3%e6%9e%90 aria-label=æ•°æ®è§£æ>æ•°æ®è§£æ</a><ul><li><a href=#%e4%bd%95%e4%b8%ba%e6%95%b0%e6%8d%ae%e8%a7%a3%e6%9e%90 aria-label=ä½•ä¸ºæ•°æ®è§£æ>ä½•ä¸ºæ•°æ®è§£æ</a></li><li><a href=#%e6%95%b0%e6%8d%ae%e8%a7%a3%e6%9e%90%e7%9a%84%e4%b8%bb%e6%b5%81%e7%ad%96%e7%95%a5 aria-label=æ•°æ®è§£æçš„ä¸»æµç­–ç•¥>æ•°æ®è§£æçš„ä¸»æµç­–ç•¥</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h3 id=æ•°æ®è§£æ>æ•°æ®è§£æ<a hidden class=anchor aria-hidden=true href=#æ•°æ®è§£æ>#</a></h3><h4 id=ä½•ä¸ºæ•°æ®è§£æ>ä½•ä¸ºæ•°æ®è§£æ<a hidden class=anchor aria-hidden=true href=#ä½•ä¸ºæ•°æ®è§£æ>#</a></h4><ul><li>æ¦‚å¿µï¼šå°±æ˜¯å°†çˆ¬å–åˆ°æ•°æ®ä¸­å±€éƒ¨çš„æŒ‡å®šçš„æ•°æ®è¿›è¡Œæå–</li><li>ä½œç”¨ï¼šå®ç°èšç„¦çˆ¬è™«</li><li>æ•°æ®è§£æé€šç”¨åŸç†ï¼š<ul><li>htmlæ˜¯ç”¨æ¥å±•ç¤ºæ•°æ®ï¼Œhtmlä¸­å±•ç¤ºçš„æ•°æ®æ­£æ˜¯æˆ‘ä»¬è¦çˆ¬å–æˆ–è€…é‡‡é›†çš„æ•°æ®</li><li>htmlæ‰€å±•ç¤ºçš„æ•°æ®/æƒ³è¦çˆ¬å–çš„æ•°æ®åªä¼šå­˜åœ¨äºæ ‡ç­¾ä¹‹é—´æˆ–è€…æ ‡ç­¾çš„å±æ€§ä¸­</li><li>æ•°æ®è§£æçš„é€šç”¨åŸç†ï¼š<ul><li>æ ‡ç­¾å®šä½</li><li>æå–æ ‡ç­¾ä¸­å­˜å‚¨çš„æ•°æ®</li></ul></li></ul></li><li>èšç„¦çˆ¬è™«ç¼–ç æµç¨‹<ul><li>æŒ‡å®šurl</li><li>å‘èµ·è¯·æ±‚</li><li>è·å–å“åº”æ•°æ®</li><li>æ•°æ®è§£æ</li><li>æŒä¹…åŒ–å­˜å‚¨</li></ul></li></ul><h4 id=æ•°æ®è§£æçš„ä¸»æµç­–ç•¥>æ•°æ®è§£æçš„ä¸»æµç­–ç•¥<a hidden class=anchor aria-hidden=true href=#æ•°æ®è§£æçš„ä¸»æµç­–ç•¥>#</a></h4><ul><li><p>å¦‚ä½•çˆ¬å–å¤šåª’ä½“èµ„æºï¼ˆå›¾ç‰‡ï¼ŒéŸ³é¢‘ï¼Œè§†é¢‘ï¼ŒåŠ¨å›¾ï¼‰</p><ul><li><p>æ–¹å¼1ï¼šç¼–å†™éº»çƒ¦ï¼Œä½†æ˜¯å¯ä»¥å®ç°UAä¼ªè£…</p><ul><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>  <span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;User-Agent&#39;</span><span class=p>:</span><span class=s1>&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36X-Requested-With: XMLHttpRequest&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>#è·å–å›¾ç‰‡åœ°å€ï¼šé€šå¸¸ä¸ºimgæ ‡ç­¾çš„srcå±æ€§å€¼</span>
</span></span><span class=line><span class=cl>  <span class=n>img_src</span> <span class=o>=</span> <span class=s1>&#39;http://img.itlun.cn/uploads/allimg/180506/1-1P5061TS6-lp.jpg&#39;</span>
</span></span><span class=line><span class=cl>  <span class=c1>#å¯¹å›¾ç‰‡å‘èµ·è¯·æ±‚</span>
</span></span><span class=line><span class=cl>  <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>img_src</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>#è·å–å›¾ç‰‡æ•°æ®:contentè¿”å›çš„æ˜¯äºŒè¿›åˆ¶å½¢å¼çš„å“åº”æ•°æ®</span>
</span></span><span class=line><span class=cl>  <span class=n>img_data</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>content</span>
</span></span><span class=line><span class=cl>  <span class=c1>#æŒä¹…åŒ–å­˜å‚¨</span>
</span></span><span class=line><span class=cl>  <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./123.jpg&#39;</span><span class=p>,</span><span class=s1>&#39;wb&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>fp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=n>fp</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>img_data</span><span class=p>)</span>
</span></span></code></pre></div></li></ul></li><li><p>æ–¹å¼2ï¼šç¼–å†™ç®€å•ï¼Œä½†æ˜¯æ— æ³•å®ç°UAä¼ªè£…</p><ul><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>  <span class=kn>from</span> <span class=nn>urllib</span> <span class=kn>import</span> <span class=n>request</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>img_src</span> <span class=o>=</span> <span class=s1>&#39;http://img.itlun.cn/uploads/allimg/180506/1-1P5061TS6-lp.jpg&#39;</span>
</span></span><span class=line><span class=cl>  <span class=c1>#urlretrieveå¯ä»¥ç›´æ¥å¯¹å›¾ç‰‡å‘èµ·è¯·æ±‚ï¼Œä¸”å°†è¯·æ±‚åˆ°çš„å›¾ç‰‡æ•°æ®è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨</span>
</span></span><span class=line><span class=cl>  <span class=n>request</span><span class=o>.</span><span class=n>urlretrieve</span><span class=p>(</span><span class=n>img_src</span><span class=p>,</span><span class=s1>&#39;./456.jpg&#39;</span><span class=p>)</span>
</span></span></code></pre></div></li></ul></li></ul></li><li><p>æ­£åˆ™ï¼ˆåŸºæœ¬æŒæ¡ï¼‰</p><ul><li><p>æ¡ˆä¾‹åº”ç”¨ï¼šæ‰¹é‡çˆ¬å–å›¾ç‰‡</p><ul><li><p>urlï¼šhttp://md.itlun.cn/a/nhtp/</p></li><li><p>å¤§è‡´æ€è·¯ï¼š</p><ul><li>å°†é¡µé¢ä¸­æ¯ä¸€å¼ å›¾ç‰‡çš„å›¾ç‰‡åœ°å€è§£æå‡ºæ¥</li><li>å¯¹å›¾ç‰‡åœ°å€å‘èµ·è¯·æ±‚è·å–å›¾ç‰‡æ•°æ®ï¼Œç„¶åè¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨</li></ul></li><li><p>æ³¨æ„ï¼š</p><ul><li>å¼€å‘è€…å·¥å…·ä¸­Elementsé€‰é¡¹å¡ä¸­æ˜¾ç¤ºçš„é¡µé¢æºç æ•°æ®ï¼ˆä¼šåŒ…å«åŠ¨æ€åŠ è½½æ•°æ®ï¼‰ï¼š<ul><li>æ˜¯é€šè¿‡æ‰€æœ‰æ•°æ®åŒ…è¯·æ±‚åˆ°çš„æ•°æ®æ¸²æŸ“å®Œæ¯•åçš„å®Œæ•´æ•°æ®</li></ul></li><li>æŠ“åŒ…å·¥å…·Networkä¸­responseæ˜¾ç¤ºçš„é¡µé¢æºç æ•°æ®ï¼šï¼ˆä¸åŒ…å«åŠ¨æ€åŠ è½½æ•°æ®ï¼‰<ul><li>å…¶å®å°±æ˜¯é€šè¿‡requestsæ¨¡å—å¯¹è¯¥æ•°æ®åŒ…çš„urlå‘èµ·è¯·æ±‚è·å–çš„å“åº”æ•°æ®</li><li>å•ç‹¬è¯¥æ•°æ®åŒ…è¯·æ±‚åˆ°çš„å“åº”æ•°æ®</li></ul></li></ul></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>  <span class=kn>from</span> <span class=nn>urllib</span> <span class=kn>import</span> <span class=n>request</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl>  <span class=n>main_url</span> <span class=o>=</span> <span class=s1>&#39;http://md.itlun.cn/a/nhtp/&#39;</span>
</span></span><span class=line><span class=cl>  <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>main_url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>#å¤„ç†é¡µé¢ä¸­çš„ä¸­æ–‡ä¹±ç </span>
</span></span><span class=line><span class=cl>  <span class=n>response</span><span class=o>.</span><span class=n>encoding</span> <span class=o>=</span> <span class=s1>&#39;gbk&#39;</span>
</span></span><span class=line><span class=cl>  <span class=c1>#è·å–äº†é¡µé¢æºç æ•°æ®</span>
</span></span><span class=line><span class=cl>  <span class=n>page_text</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>text</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>#æ•°æ®è§£æï¼šè§£æå›¾ç‰‡çš„åœ°å€</span>
</span></span><span class=line><span class=cl>  <span class=c1># ex = &#39;&lt;li&gt;.*?&lt;img.*?src=&#34;(.*?)&#34; style.*?&lt;/li&gt;&#39;</span>
</span></span><span class=line><span class=cl>  <span class=c1>#re.Sç”¨æ¥å¤„ç†å›è½¦</span>
</span></span><span class=line><span class=cl>  <span class=c1># img_src_list = re.findall(ex,page_text,re.S)</span>
</span></span><span class=line><span class=cl>  <span class=c1>#æ³¨æ„ï¼šå¦‚æœç¡®è®¤æ­£åˆ™æ²¡æœ‰å†™é”™ï¼Œåˆ™å–å…³æ³¨ä¸‹æ­£åˆ™ä½œç”¨åˆ°çš„é¡µé¢æºç æ˜¯å¦å‡ºç°é—®é¢˜</span>
</span></span><span class=line><span class=cl>  <span class=c1>#ææœ‰å¯èƒ½é¡µé¢æºç æ•°æ®å‡ºç°äº†åŠ¨æ€åŠ è½½çš„æƒ…å†µ</span>
</span></span><span class=line><span class=cl>  <span class=c1>#åœ¨æŠ“åŒ…å·¥å…·ä¸­ï¼ŒæŸ¥çœ‹äº†æ•°æ®åŒ…çš„å“åº”æ•°æ®ï¼Œå‘ç°imgï¼Œliæ ‡ç­¾éƒ½æ˜¯å¤§å†™ï¼Œè€Œæˆ‘ä»¬å†™çš„æ­£åˆ™åŒ¹é…çš„æ˜¯å°å†™æ ‡ç­¾ï¼Œå› æ­¤åŒ¹é…å¤±è´¥</span>
</span></span><span class=line><span class=cl>  <span class=c1># ex = &#39;&lt;LI&gt;.*?&lt;IMG.*?src=&#34;(.*?)&#34; style.*?&lt;/LI&gt;&#39;</span>
</span></span><span class=line><span class=cl>  <span class=c1># img_src_list = re.findall(ex,page_text,re.S)</span>
</span></span><span class=line><span class=cl>  <span class=c1>#é—®é¢˜ï¼šæå–åˆ°çš„å›¾ç‰‡åœ°å€éƒ½æ˜¯ä¸€æ ·çš„ã€‚å¦‚ä½•è§£å†³ï¼Ÿç»§ç»­æŸ¥çœ‹æŠ“åŒ…å·¥å…·çš„æºç </span>
</span></span><span class=line><span class=cl>  <span class=c1>#å‘ç°ï¼šçœŸæ­£çš„å›¾ç‰‡åœ°å€æ˜¯æœ‰jsåŠ¨æ€åŠ è½½å‡ºæ¥çš„</span>
</span></span><span class=line><span class=cl>  <span class=n>ex</span> <span class=o>=</span> <span class=s1>&#39;&lt;script.*?src = &#34;(.*?)&#34;; &lt;/script&gt;&#39;</span>
</span></span><span class=line><span class=cl>  <span class=n>img_src_list</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>ex</span><span class=p>,</span><span class=n>page_text</span><span class=p>,</span><span class=n>re</span><span class=o>.</span><span class=n>S</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>#å‘ç°è§£æå‡ºçš„å›¾ç‰‡åœ°å€ï¼Œæ˜¯ä¸å®Œæ•´çš„ï¼Œç¼ºå°‘http:</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>img_src</span> <span class=ow>in</span> <span class=n>img_src_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=n>img_src</span> <span class=o>=</span> <span class=s1>&#39;http:&#39;</span><span class=o>+</span><span class=n>img_src</span>
</span></span><span class=line><span class=cl>      <span class=c1># print(img_src)</span>
</span></span><span class=line><span class=cl>      <span class=n>img_name</span> <span class=o>=</span> <span class=n>img_src</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=n>request</span><span class=o>.</span><span class=n>urlretrieve</span><span class=p>(</span><span class=n>img_src</span><span class=p>,</span><span class=n>img_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nb>print</span><span class=p>(</span><span class=n>img_name</span><span class=p>,</span><span class=s1>&#39;ä¸‹è½½æˆåŠŸï¼&#39;</span><span class=p>)</span>
</span></span></code></pre></div></li></ul></li></ul></li><li><p>bs4ï¼ˆé‡ç‚¹ï¼‰</p><ul><li><p>ç¯å¢ƒå®‰è£…ï¼špip install bs4</p></li><li><p>bs4æ•°æ®è§£æçš„æµç¨‹</p><ul><li>1.å®ä¾‹åŒ–ä¸€ä¸ªBeautifulSoupçš„å¯¹è±¡ï¼Œç„¶åæŠŠå³å°†è¢«è§£æçš„é¡µé¢æºç æ•°æ®åŠ è½½åˆ°è¯¥å¯¹è±¡ä¸­<ul><li>BeautifulSoup(fp,&rsquo;lxml&rsquo;):fpè¡¨ç¤ºæœ¬åœ°çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œè¯¥ç§æ–¹å¼æ˜¯å°†æœ¬åœ°å­˜å‚¨çš„htmlæ–‡ä»¶è¿›è¡Œæ•°æ®è§£æ</li><li>BeautifulSoup(page_text,&rsquo;lxml&rsquo;):page_textæ˜¯ç½‘ç»œè¯·æ±‚åˆ°çš„é¡µé¢æºç æ•°æ®ï¼Œè¯¥ç§æ–¹å¼æ˜¯ç›´æ¥å°†ç½‘ç»œè¯·æ±‚åˆ°çš„é¡µé¢æºç æ•°æ®è¿›è¡Œæ•°æ®è§£æ</li></ul></li><li>2.è°ƒç”¨BeautifulSoupå¯¹è±¡ä¸­ç›¸å…³çš„å±æ€§å’Œæ–¹æ³•å®ç°æ ‡ç­¾å®šä½å’Œæ•°æ®æå–</li></ul></li><li><p>å…·ä½“è§£æçš„æ“ä½œï¼š</p><ul><li><p>åœ¨å½“å‰ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªtest.htmlæ–‡ä»¶ï¼Œç„¶åå°†ä¸‹è¿°å†…å®¹æ‹·è´åˆ°è¯¥æ–‡ä»¶ä¸­</p><ul><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>html</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;en&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  	<span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#34;UTF-8&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  	<span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>æµ‹è¯•bs4<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  	<span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  		<span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>ç™¾é‡Œå®ˆçº¦<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  	<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  	<span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;song&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  		<span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>ææ¸…ç…§<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  		<span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>ç‹å®‰çŸ³<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  		<span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>è‹è½¼<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  		<span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>æŸ³å®—å…ƒ<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  		<span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://www.song.com/&#34;</span> <span class=na>title</span><span class=o>=</span><span class=s>&#34;èµµåŒ¡èƒ¤&#34;</span> <span class=na>target</span><span class=o>=</span><span class=s>&#34;_self&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  			<span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span>this is span<span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  		å®‹æœæ˜¯æœ€å¼ºå¤§çš„ç‹æœï¼Œä¸æ˜¯å†›é˜Ÿçš„å¼ºå¤§ï¼Œè€Œæ˜¯ç»æµå¾ˆå¼ºå¤§ï¼Œå›½æ°‘éƒ½å¾ˆæœ‰é’±<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  		<span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;du&#34;</span><span class=p>&gt;</span>æ€»ä¸ºæµ®äº‘èƒ½è”½æ—¥,é•¿å®‰ä¸è§ä½¿äººæ„<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  		<span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;http://www.baidu.com/meinv.jpg&#34;</span> <span class=na>alt</span><span class=o>=</span><span class=s>&#34;&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  	<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  	<span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;tang&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  		<span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  			<span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://www.baidu.com&#34;</span> <span class=na>title</span><span class=o>=</span><span class=s>&#34;qing&#34;</span><span class=p>&gt;</span>æ¸…æ˜æ—¶èŠ‚é›¨çº·çº·,è·¯ä¸Šè¡Œäººæ¬²æ–­é­‚,å€Ÿé—®é…’å®¶ä½•å¤„æœ‰,ç‰§ç«¥é¥æŒ‡æèŠ±æ‘<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  			<span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://www.163.com&#34;</span> <span class=na>title</span><span class=o>=</span><span class=s>&#34;qin&#34;</span><span class=p>&gt;</span>ç§¦æ—¶æ˜æœˆæ±‰æ—¶å…³,ä¸‡é‡Œé•¿å¾äººæœªè¿˜,ä½†ä½¿é¾™åŸé£å°†åœ¨,ä¸æ•™èƒ¡é©¬åº¦é˜´å±±<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  			<span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://www.126.com&#34;</span> <span class=na>alt</span><span class=o>=</span><span class=s>&#34;qi&#34;</span><span class=p>&gt;</span>å²ç‹å®…é‡Œå¯»å¸¸è§,å´”ä¹å ‚å‰å‡ åº¦é—»,æ­£æ˜¯æ±Ÿå—å¥½é£æ™¯,è½èŠ±æ—¶èŠ‚åˆé€¢å›<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  			<span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://www.sina.com&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;du&#34;</span><span class=p>&gt;</span>æœç”«<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  			<span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://www.dudu.com&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;du&#34;</span><span class=p>&gt;</span>æœç‰§<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  			<span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>b</span><span class=p>&gt;</span>æœå°æœˆ<span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  			<span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>i</span><span class=p>&gt;</span>åº¦èœœæœˆ<span class=p>&lt;/</span><span class=nt>i</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  			<span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;http://www.haha.com&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;feng&#34;</span><span class=p>&gt;</span>å‡¤å‡°å°ä¸Šå‡¤å‡°æ¸¸,å‡¤å»å°ç©ºæ±Ÿè‡ªæµ,å´å®«èŠ±è‰åŸ‹å¹½å¾„,æ™‹ä»£è¡£å† æˆå¤ä¸˜<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  		<span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  	<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span></code></pre></div></li></ul></li><li><p>æœ‰äº†test.htmlæ–‡ä»¶åï¼Œåœ¨ç»ƒä¹ å¦‚ä¸‹æ“ä½œ</p><ul><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>  <span class=kn>from</span> <span class=nn>bs4</span> <span class=kn>import</span> <span class=n>BeautifulSoup</span>
</span></span><span class=line><span class=cl>  <span class=c1>#fpå°±è¡¨ç¤ºæœ¬åœ°å­˜å‚¨çš„ä¸€ä¸ªhtmlæ–‡ä»¶</span>
</span></span><span class=line><span class=cl>  <span class=n>fp</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./test.html&#39;</span><span class=p>,</span><span class=s1>&#39;r&#39;</span><span class=p>,</span><span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>#è§£ææœ¬åœ°å­˜å‚¨çš„htmlæ–‡ä»¶ä¸­çš„å†…å®¹</span>
</span></span><span class=line><span class=cl>  <span class=c1>#å®ä¾‹åŒ–BeautifulSoupå¯¹è±¡ï¼Œç„¶åæŠŠå³å°†è¢«è§£æçš„é¡µé¢æºç æ•°æ®åŠ è½½åˆ°äº†è¯¥å¯¹è±¡ä¸­</span>
</span></span><span class=line><span class=cl>  <span class=n>soup</span> <span class=o>=</span> <span class=n>BeautifulSoup</span><span class=p>(</span><span class=n>fp</span><span class=p>,</span><span class=s1>&#39;lxml&#39;</span><span class=p>)</span> <span class=c1>#å‚æ•°2ï¼Œlxmlæ˜¯å›ºå®šå½¢å¼ï¼Œè¡¨ç¤ºæŒ‡å®šçš„è§£æå™¨</span>
</span></span><span class=line><span class=cl>  <span class=c1>#æ ‡ç­¾å®šä½</span>
</span></span><span class=line><span class=cl>  <span class=c1>#æ–¹å¼1ï¼šsoup.tagName,åªä¼šå®šä½åˆ°ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªæ ‡ç­¾</span>
</span></span><span class=line><span class=cl>  <span class=n>tag1</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>title</span> <span class=c1>#å®šä½åˆ°äº†titleæ ‡ç­¾</span>
</span></span><span class=line><span class=cl>  <span class=n>tag2</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>div</span>
</span></span><span class=line><span class=cl>  <span class=c1>#æ–¹å¼2ï¼šå±æ€§å®šä½ï¼Œfindå‡½æ•°ï¼Œfindallå‡½æ•°</span>
</span></span><span class=line><span class=cl>      <span class=c1>#find(&#39;tagName&#39;,attrName=&#39;attrValue&#39;)ï¼šfindåªä¼šå®šä½åˆ°æ»¡è¶³è¦çš„ç¬¬ä¸€ä¸ªæ ‡ç­¾</span>
</span></span><span class=line><span class=cl>  <span class=n>tag3</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;div&#39;</span><span class=p>,</span><span class=n>class_</span><span class=o>=</span><span class=s1>&#39;song&#39;</span><span class=p>)</span><span class=c1>#å®šä½classå±æ€§å€¼ä¸ºsongçš„divæ ‡ç­¾</span>
</span></span><span class=line><span class=cl>  <span class=n>tag4</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;a&#39;</span><span class=p>,</span><span class=nb>id</span><span class=o>=</span><span class=s1>&#39;feng&#39;</span><span class=p>)</span><span class=c1>#å®šä½idå±æ€§å€¼ä¸ºfengçš„aæ ‡ç­¾</span>
</span></span><span class=line><span class=cl>      <span class=c1>#findAll(&#39;tagName&#39;,attrName=&#39;attrValue&#39;)ï¼šå¯ä»¥å®šä½åˆ°æ»¡è¶³è¦æ±‚çš„æ‰€æœ‰æ ‡ç­¾</span>
</span></span><span class=line><span class=cl>  <span class=n>tag5</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>findAll</span><span class=p>(</span><span class=s1>&#39;div&#39;</span><span class=p>,</span><span class=n>class_</span><span class=o>=</span><span class=s1>&#39;song&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>#æ–¹å¼3ï¼šé€‰æ‹©å™¨å®šä½ï¼šsoup.select(&#39;é€‰æ‹©å™¨&#39;)</span>
</span></span><span class=line><span class=cl>      <span class=c1>#idé€‰æ‹©å™¨ï¼š#feng  ----idä¸ºfeng</span>
</span></span><span class=line><span class=cl>      <span class=c1>#classé€‰æ‹©å™¨ï¼š.song ----classä¸ºsong</span>
</span></span><span class=line><span class=cl>      <span class=c1>#å±‚çº§é€‰æ‹©å™¨ï¼šå¤§äºå·è¡¨ç¤ºä¸€ä¸ªå±‚çº§ï¼Œç©ºæ ¼è¡¨ç¤ºå¤šä¸ªå±‚çº§</span>
</span></span><span class=line><span class=cl>  <span class=n>tag6</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s1>&#39;#feng&#39;</span><span class=p>)</span> <span class=c1>#å®šä½åˆ°æ‰€æœ‰idå±æ€§å€¼ä¸ºfengçš„æ ‡ç­¾</span>
</span></span><span class=line><span class=cl>  <span class=n>tag7</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s1>&#39;.song&#39;</span><span class=p>)</span><span class=c1>#å®šä½åˆ°æ‰€æœ‰classå±æ€§å€¼ä¸ºsongçš„æ ‡ç­¾</span>
</span></span><span class=line><span class=cl>  <span class=n>tag8</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s1>&#39;.tang &gt; ul &gt; li&#39;</span><span class=p>)</span> <span class=c1>#å®šä½åˆ°äº†classä¸ºtangä¸‹é¢çš„ulä¸‹é¢æ‰€æœ‰çš„liæ ‡ç­¾</span>
</span></span><span class=line><span class=cl>  <span class=n>tag9</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s1>&#39;.tang li&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>#æå–æ ‡ç­¾ä¸­çš„å†…å®¹</span>
</span></span><span class=line><span class=cl>  <span class=c1>#1.æå–æ ‡ç­¾ä¸­é—´çš„å†…å®¹ï¼š</span>
</span></span><span class=line><span class=cl>      <span class=c1>#tag.string:åªå¯ä»¥æå–åˆ°æ ‡ç­¾ä¸­ç›´ç³»çš„æ–‡æœ¬å†…å®¹</span>
</span></span><span class=line><span class=cl>      <span class=c1>#tag.text:å¯ä»¥æå–åˆ°æ ‡ç­¾ä¸­æ‰€æœ‰çš„æ–‡æœ¬å†…å®¹</span>
</span></span><span class=line><span class=cl>  <span class=c1># p_tag = soup.p</span>
</span></span><span class=line><span class=cl>  <span class=c1># print(p_tag.string)</span>
</span></span><span class=line><span class=cl>  <span class=c1># print(p_tag.text)</span>
</span></span><span class=line><span class=cl>  <span class=c1># div_tag = soup.find(&#39;div&#39;,class_=&#39;song&#39;)</span>
</span></span><span class=line><span class=cl>  <span class=c1># print(div_tag.text)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>#2.æå–æ ‡ç­¾çš„å±æ€§å€¼</span>
</span></span><span class=line><span class=cl>      <span class=c1>#tag[&#39;attrName&#39;]</span>
</span></span><span class=line><span class=cl>  <span class=n>img_tag</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>img</span>
</span></span><span class=line><span class=cl>  <span class=nb>print</span><span class=p>(</span><span class=n>img_tag</span><span class=p>[</span><span class=s1>&#39;src&#39;</span><span class=p>])</span> <span class=c1>#æå–imgæ ‡ç­¾çš„srcçš„å±æ€§å€¼</span>
</span></span></code></pre></div></li></ul></li></ul></li><li><p>æ¡ˆä¾‹åº”ç”¨ï¼šå°è¯´æ‰¹é‡çˆ¬å–</p><ul><li><p>urlï¼šhttps://www.shicimingju.com/book/sanguoyanyi.html</p></li><li><p>éœ€æ±‚ï¼šå°†æ¯ä¸€ä¸ªç« èŠ‚çš„æ ‡é¢˜å’Œå†…å®¹è¿›è¡Œçˆ¬å–ç„¶åå­˜å‚¨åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­</p><ul><li>æ­¥éª¤ï¼š<ul><li>1.è¯·æ±‚ä¸»é¡µçš„é¡µé¢æºç æ•°æ®</li><li>2.æ•°æ®è§£æï¼š<ul><li>ç« èŠ‚æ ‡é¢˜</li><li>ç« èŠ‚è¯¦æƒ…é¡µçš„é“¾æ¥</li></ul></li><li>3.è§£æç« èŠ‚è¯¦ç»†å†…å®¹</li><li>4.å°†è§£æçš„ç« èŠ‚æ ‡é¢˜å’Œå†…å®¹è¿›è¡Œå­˜å‚¨</li></ul></li></ul></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>  <span class=kn>from</span> <span class=nn>bs4</span> <span class=kn>import</span> <span class=n>BeautifulSoup</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>  <span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;User-Agent&#39;</span><span class=p>:</span><span class=s1>&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>#é¦–é¡µåœ°å€</span>
</span></span><span class=line><span class=cl>  <span class=n>main_url</span> <span class=o>=</span> <span class=s1>&#39;https://www.shicimingju.com/book/sanguoyanyi.html&#39;</span>
</span></span><span class=line><span class=cl>  <span class=c1>#å‘èµ·è¯·æ±‚ï¼Œè·å–äº†ä¸»é¡µé¡µé¢æºç </span>
</span></span><span class=line><span class=cl>  <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>main_url</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>response</span><span class=o>.</span><span class=n>encoding</span> <span class=o>=</span> <span class=s1>&#39;utf-8&#39;</span>
</span></span><span class=line><span class=cl>  <span class=n>page_text</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>text</span>
</span></span><span class=line><span class=cl>  <span class=c1>#æ•°æ®è§£æï¼šç« èŠ‚æ ‡é¢˜+è¯¦æƒ…é¡µé“¾æ¥</span>
</span></span><span class=line><span class=cl>  <span class=n>soup</span> <span class=o>=</span> <span class=n>BeautifulSoup</span><span class=p>(</span><span class=n>page_text</span><span class=p>,</span><span class=s1>&#39;lxml&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>a_list</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s1>&#39;.book-mulu &gt; ul &gt; li &gt; a&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>fp</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./sanguo.txt&#39;</span><span class=p>,</span><span class=s1>&#39;w&#39;</span><span class=p>,</span><span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>a</span> <span class=ow>in</span> <span class=n>a_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=n>title</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=n>string</span> <span class=c1>#ç« èŠ‚æ ‡é¢˜</span>
</span></span><span class=line><span class=cl>      <span class=n>detail_url</span> <span class=o>=</span> <span class=s1>&#39;https://www.shicimingju.com&#39;</span><span class=o>+</span><span class=n>a</span><span class=p>[</span><span class=s1>&#39;href&#39;</span><span class=p>]</span> <span class=c1>#è¯¦æƒ…é¡µåœ°å€</span>
</span></span><span class=line><span class=cl>      <span class=c1>#è¯·æ±‚è¯¦æƒ…é¡µçš„é¡µé¢æºç æ•°æ®</span>
</span></span><span class=line><span class=cl>      <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>detail_url</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=n>response</span><span class=o>.</span><span class=n>encoding</span> <span class=o>=</span> <span class=s1>&#39;utf-8&#39;</span>
</span></span><span class=line><span class=cl>      <span class=n>detail_page_text</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>text</span>
</span></span><span class=line><span class=cl>      <span class=c1>#è§£æï¼šè§£æç« èŠ‚å†…å®¹</span>
</span></span><span class=line><span class=cl>      <span class=n>d_soup</span> <span class=o>=</span> <span class=n>BeautifulSoup</span><span class=p>(</span><span class=n>detail_page_text</span><span class=p>,</span><span class=s1>&#39;lxml&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=n>div_tag</span> <span class=o>=</span> <span class=n>d_soup</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;div&#39;</span><span class=p>,</span><span class=n>class_</span><span class=o>=</span><span class=s1>&#39;chapter_content&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=n>content</span> <span class=o>=</span> <span class=n>div_tag</span><span class=o>.</span><span class=n>text</span> <span class=c1>#ç« èŠ‚å†…å®¹</span>
</span></span><span class=line><span class=cl>      <span class=n>fp</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>title</span><span class=o>+</span><span class=s1>&#39;:&#39;</span><span class=o>+</span><span class=n>content</span><span class=o>+</span><span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nb>print</span><span class=p>(</span><span class=n>title</span><span class=p>,</span><span class=s1>&#39;çˆ¬å–ä¿å­˜æˆåŠŸï¼&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>fp</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></div></li></ul></li><li><p>æ¡ˆä¾‹åº”ç”¨ï¼šä»£ç†æ‰¹é‡çˆ¬å–</p><ul><li><p>urlï¼šhttps://www.kuaidaili.com/free</p></li><li><p>éœ€æ±‚ï¼šå°†å‰5é¡µçš„æ‰€æœ‰idå’Œportè§£æä¸”å­˜å‚¨åˆ°æ–‡ä»¶ä¸­</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>  <span class=c1>#åªçˆ¬å–äº†ç¬¬ä¸€é¡µçš„å†…å®¹</span>
</span></span><span class=line><span class=cl>  <span class=kn>from</span> <span class=nn>bs4</span> <span class=kn>import</span> <span class=n>BeautifulSoup</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>  <span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;User-Agent&#39;</span><span class=p>:</span><span class=s1>&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=n>url</span> <span class=o>=</span> <span class=s1>&#39;https://www.kuaidaili.com/free&#39;</span>
</span></span><span class=line><span class=cl>  <span class=n>page_text</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span><span class=o>.</span><span class=n>text</span>
</span></span><span class=line><span class=cl>  <span class=n>soup</span> <span class=o>=</span> <span class=n>BeautifulSoup</span><span class=p>(</span><span class=n>page_text</span><span class=p>,</span><span class=s1>&#39;lxml&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>trs</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s1>&#39;tbody &gt; tr&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>tr</span> <span class=ow>in</span> <span class=n>trs</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=n>t1</span> <span class=o>=</span> <span class=n>tr</span><span class=o>.</span><span class=n>findAll</span><span class=p>(</span><span class=s1>&#39;td&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=n>t2</span> <span class=o>=</span> <span class=n>tr</span><span class=o>.</span><span class=n>findAll</span><span class=p>(</span><span class=s1>&#39;td&#39;</span><span class=p>)[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=n>ip</span> <span class=o>=</span> <span class=n>t1</span><span class=o>.</span><span class=n>string</span>
</span></span><span class=line><span class=cl>      <span class=n>port</span> <span class=o>=</span> <span class=n>t2</span><span class=o>.</span><span class=n>string</span>
</span></span><span class=line><span class=cl>      <span class=nb>print</span><span class=p>(</span><span class=n>ip</span><span class=p>,</span><span class=n>port</span><span class=p>)</span>
</span></span></code></pre></div></li></ul></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>  <span class=c1>#çˆ¬å–å¤šé¡µå†…å®¹</span>
</span></span><span class=line><span class=cl>  <span class=kn>from</span> <span class=nn>bs4</span> <span class=kn>import</span> <span class=n>BeautifulSoup</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>  <span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;User-Agent&#39;</span><span class=p>:</span><span class=s1>&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>#çˆ¬å–å¤šé¡µ</span>
</span></span><span class=line><span class=cl>  <span class=c1>#1.åˆ›å»ºä¸€ä¸ªé€šç”¨çš„url(å¯ä»¥å˜æ¢æˆä»»æ„é¡µç çš„url)</span>
</span></span><span class=line><span class=cl>  <span class=n>url</span> <span class=o>=</span> <span class=s1>&#39;https://www.kuaidaili.com/free/inha/</span><span class=si>%d</span><span class=s1>/&#39;</span>
</span></span><span class=line><span class=cl>  <span class=c1>#2.é€šè¿‡å¾ªç¯ä»¥æ­¤ç”Ÿæˆä¸åŒé¡µç çš„url</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>page</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>11</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;----------æ­£åœ¨çˆ¬å–ç¬¬</span><span class=si>%d</span><span class=s1>é¡µçš„æ•°æ®ï¼-----------&#39;</span><span class=o>%</span><span class=n>page</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=c1>#formatç”¨æ¥æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„ï¼ˆä¸å¯ä»¥ä¿®æ”¹urlè¿™ä¸ªå­—ç¬¦ä¸²æœ¬èº«ï¼‰</span>
</span></span><span class=line><span class=cl>      <span class=n>new_url</span> <span class=o>=</span> <span class=nb>format</span><span class=p>(</span><span class=n>url</span><span class=o>%</span><span class=n>page</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=c1>#å¾ªç¯å‘é€æ¯ä¸€é¡µçš„è¯·æ±‚</span>
</span></span><span class=line><span class=cl>      <span class=c1>#æ³¨æ„ï¼šgetæ–¹æ³•æ˜¯ä¸€ä¸ªé˜»å¡æ–¹æ³•ï¼</span>
</span></span><span class=line><span class=cl>      <span class=n>page_text</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>new_url</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span><span class=o>.</span><span class=n>text</span>
</span></span><span class=line><span class=cl>      <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=n>soup</span> <span class=o>=</span> <span class=n>BeautifulSoup</span><span class=p>(</span><span class=n>page_text</span><span class=p>,</span><span class=s1>&#39;lxml&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=n>trs</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s1>&#39;tbody &gt; tr&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=k>for</span> <span class=n>tr</span> <span class=ow>in</span> <span class=n>trs</span><span class=p>:</span>
</span></span><span class=line><span class=cl>          <span class=n>t1</span> <span class=o>=</span> <span class=n>tr</span><span class=o>.</span><span class=n>findAll</span><span class=p>(</span><span class=s1>&#39;td&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>          <span class=n>t2</span> <span class=o>=</span> <span class=n>tr</span><span class=o>.</span><span class=n>findAll</span><span class=p>(</span><span class=s1>&#39;td&#39;</span><span class=p>)[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>          <span class=n>ip</span> <span class=o>=</span> <span class=n>t1</span><span class=o>.</span><span class=n>string</span>
</span></span><span class=line><span class=cl>          <span class=n>port</span> <span class=o>=</span> <span class=n>t2</span><span class=o>.</span><span class=n>string</span>
</span></span><span class=line><span class=cl>          <span class=nb>print</span><span class=p>(</span><span class=n>ip</span><span class=p>,</span><span class=n>port</span><span class=p>)</span>
</span></span></code></pre></div></li></ul></li><li><p>xpathï¼ˆé‡ç‚¹ï¼‰</p><ul><li><p>ç¯å¢ƒå®‰è£…ï¼špip install lxml</p></li><li><p>xpathè§£æçš„ç¼–ç æµç¨‹</p><ul><li>1.åˆ›å»ºä¸€ä¸ªetreeç±»å‹çš„å¯¹è±¡ï¼Œç„¶åæŠŠå³å°†è¢«è§£æçš„é¡µé¢æºç æ•°æ®åŠ è½½åˆ°è¯¥å¯¹è±¡ä¸­</li><li>2.è°ƒç”¨etreeå¯¹è±¡çš„xpathæ–¹æ³•ç»“åˆç€ä¸åŒå½¢å¼çš„xpathè¡¨è¾¾å¼ï¼Œè¿›è¡Œæ ‡ç­¾å®šä½å’Œæ•°æ®æå–</li></ul></li><li><p>xpathè¡¨è¾¾å¼å¦‚ä½•ç†è§£ï¼Ÿ</p><ul><li><p>htmlä¸­çš„æ ‡ç­¾æ˜¯éµä»æ ‘çŠ¶ç»“æ„çš„ã€‚</p></li><li><p>åˆ‡è®°:xpathè¡¨è¾¾å¼ä¸­ä¸å¯ä»¥å‡ºç°tbodyæ ‡ç­¾ï¼Œå¦‚æœæœ‰ç›´æ¥å°†å…¶åˆ é™¤è·¨è¿‡å³å¯ï¼</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>  <span class=kn>from</span> <span class=nn>lxml</span> <span class=kn>import</span> <span class=n>etree</span> <span class=c1>#å¦‚æœè¿™ç§æ–¹å¼æŠ¥é”™ï¼Œä½¿ç”¨ä¸‹é¢æ–¹å¼å¯¼å…¥etree</span>
</span></span><span class=line><span class=cl>  <span class=c1># from lxml.html import etree</span>
</span></span><span class=line><span class=cl>  <span class=n>fp</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;test.html&#39;</span><span class=p>,</span><span class=s1>&#39;r&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>#1.å°†æœ¬åœ°å­˜å‚¨å¥½çš„æ–‡ä»¶ä¸­çš„æ•°æ®åŠ è½½åˆ°etreeå¯¹è±¡ä¸­è¿›è¡Œæ•°æ®è§£æ</span>
</span></span><span class=line><span class=cl>  <span class=n>tree</span> <span class=o>=</span> <span class=n>etree</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=n>fp</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>#2.è°ƒç”¨etreeå¯¹è±¡çš„xpathæ–¹æ³•ç»“åˆä¸åŒå½¢å¼çš„xpathè¡¨è¾¾å¼è¿›è¡Œæ ‡ç­¾å®šä½å’Œæ•°æ®æå–</span>
</span></span><span class=line><span class=cl>  <span class=c1>#xpathè¿”å›çš„ä¸€å®šæ˜¯åˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­å­˜å‚¨çš„æ˜¯å®šä½åˆ°çš„æ ‡ç­¾å¯¹è±¡</span>
</span></span><span class=line><span class=cl>  <span class=c1># title_tag = tree.xpath(&#39;/html/head/title&#39;)</span>
</span></span><span class=line><span class=cl>  <span class=c1># title_tag = tree.xpath(&#39;/html//title&#39;)</span>
</span></span><span class=line><span class=cl>  <span class=c1># title_tag = tree.xpath(&#39;//head/title&#39;)</span>
</span></span><span class=line><span class=cl>  <span class=c1># title_tag = tree.xpath(&#39;//title&#39;) #æ¨è</span>
</span></span><span class=line><span class=cl>  <span class=c1>#æœ€å·¦ä¾§ä¸º/:è¡¨ç¤ºå¿…é¡»ä»æ ‘çš„æ ¹æ ‡ç­¾ï¼ˆhtmlæ ‡ç­¾ï¼‰å¼€å§‹è¿›è¡Œå®šä½</span>
</span></span><span class=line><span class=cl>  <span class=c1>#æœ€å·¦ä¾§ä¸º//:å¯ä»¥ä»ä»»æ„ä½ç½®è¿›è¡Œæ ‡ç­¾çš„ç›¸å¯¹ä½ç½®å®šä½</span>
</span></span><span class=line><span class=cl>  <span class=c1>#éæœ€å·¦ä¾§çš„/:è¡¨ç¤ºä¸€ä¸ªå±‚çº§</span>
</span></span><span class=line><span class=cl>  <span class=c1>#éæœ€å·¦ä¾§çš„//:è¡¨ç¤ºå¤šä¸ªå±‚çº§</span>
</span></span><span class=line><span class=cl>  <span class=c1># tag = tree.xpath(&#39;//div&#39;) #å®šä½æ‰€æœ‰çš„divæ ‡ç­¾</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>#å±æ€§å®šä½ï¼šæ ¹æ®æ ‡ç­¾çš„å±æ€§å®šä½æ ‡ç­¾</span>
</span></span><span class=line><span class=cl>  <span class=c1>#//tagName[@attrName=&#34;attrValue&#34;]</span>
</span></span><span class=line><span class=cl>  <span class=c1># tag = tree.xpath(&#39;//div[@class=&#34;song&#34;]&#39;)#å®šä½classå±æ€§å€¼ä¸ºsongçš„divæ ‡ç­¾</span>
</span></span><span class=line><span class=cl>  <span class=c1># tag = tree.xpath(&#39;//a[@id=&#34;feng&#34;]&#39;)</span>
</span></span><span class=line><span class=cl>  <span class=c1># tag = tree.xpath(&#39;//div[@class=&#34;tang&#34;]/ul/li/a[@id=&#34;feng&#34;]&#39;)</span>
</span></span><span class=line><span class=cl>  <span class=c1>#ç´¢å¼•å®šä½ï¼šç´¢å¼•æ˜¯ä»1å¼€å§‹çš„</span>
</span></span><span class=line><span class=cl>  <span class=c1># tag = tree.xpath(&#39;//div[@class=&#34;tang&#34;]/ul/li[3]&#39;)#å®šä½åˆ°ç¬¬ä¸‰ä¸ªliæ ‡ç­¾</span>
</span></span><span class=line><span class=cl>  <span class=c1>#è·å–å®šä½åˆ°æ ‡ç­¾ä¸­çš„æ–‡æœ¬å†…å®¹</span>
</span></span><span class=line><span class=cl>      <span class=c1># /text()è·å–æ ‡ç­¾ä¸­ç›´ç³»çš„æ–‡æœ¬å†…å®¹ï¼šè¿”å›çš„åˆ—è¡¨ä¸­åªä¼šæœ‰ä¸€ä¸ªåˆ—è¡¨å…ƒç´ </span>
</span></span><span class=line><span class=cl>      <span class=c1># //text()è·å–æ ‡ç­¾ä¸­æ‰€æœ‰çš„æ–‡æœ¬å†…å®¹ï¼šé€šå¸¸è¿”å›åˆ—è¡¨ä¸­å­˜åœ¨å¤šä¸ªå…ƒç´ </span>
</span></span><span class=line><span class=cl>  <span class=c1># tag = tree.xpath(&#39;//div[@class=&#34;song&#34;]/p[3]/text()&#39;)</span>
</span></span><span class=line><span class=cl>  <span class=c1># tag = tree.xpath(&#39;//div[@class=&#34;song&#34;]//text()&#39;)</span>
</span></span><span class=line><span class=cl>  <span class=c1>#è·å–å®šä½åˆ°æ ‡ç­¾ä¸­çš„å±æ€§å€¼://tag/@attrName</span>
</span></span><span class=line><span class=cl>  <span class=n>tag</span> <span class=o>=</span> <span class=n>tree</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;//img/@src&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nb>print</span><span class=p>(</span><span class=n>tag</span><span class=p>)</span>
</span></span></code></pre></div></li></ul></li><li><p>æ¡ˆä¾‹åº”ç”¨ï¼š</p><ul><li><p><a href=http://pic.netbian.com/4kmeinv/>http://pic.netbian.com/4kmeinv/</a></p><ul><li><p>å°†çˆ¬å–åˆ°çš„å›¾ç‰‡å­˜å‚¨åˆ°æŒ‡å®šçš„æ–‡ä»¶å¤¹ä¸­</p></li><li><p>çˆ¬å–ç¬¬ä¸€é¡µ</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>  <span class=kn>from</span> <span class=nn>lxml</span> <span class=kn>import</span> <span class=n>etree</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl>  <span class=c1>#æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹</span>
</span></span><span class=line><span class=cl>  <span class=n>dirName</span> <span class=o>=</span> <span class=s1>&#39;girls&#39;</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>dirName</span><span class=p>):</span><span class=c1>#å¦‚æœæ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œåˆ™æ–°å»ºï¼Œå¦åˆ™ä¸æ–°å»º</span>
</span></span><span class=line><span class=cl>      <span class=n>os</span><span class=o>.</span><span class=n>mkdir</span><span class=p>(</span><span class=n>dirName</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;User-Agent&#39;</span><span class=p>:</span><span class=s1>&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>url</span> <span class=o>=</span> <span class=s1>&#39;https://pic.netbian.com/4kmeinv/index.html&#39;</span>
</span></span><span class=line><span class=cl>  <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>response</span><span class=o>.</span><span class=n>encoding</span> <span class=o>=</span> <span class=s1>&#39;gbk&#39;</span>
</span></span><span class=line><span class=cl>  <span class=n>page_text</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>text</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>#æ•°æ®è§£æï¼šå›¾ç‰‡åœ°å€+å›¾ç‰‡åç§°</span>
</span></span><span class=line><span class=cl>  <span class=n>tree</span> <span class=o>=</span> <span class=n>etree</span><span class=o>.</span><span class=n>HTML</span><span class=p>(</span><span class=n>page_text</span><span class=p>)</span><span class=c1>#HTML()ä¸“é—¨ç”¨æ¥è§£æç½‘ç»œè¯·æ±‚åˆ°çš„é¡µé¢æºç æ•°æ®</span>
</span></span><span class=line><span class=cl>  <span class=c1>#è¯¥åˆ—è¡¨ä¸­å­˜å‚¨çš„æ˜¯æ¯ä¸€ä¸ªliæ ‡ç­¾</span>
</span></span><span class=line><span class=cl>  <span class=n>li_list</span> <span class=o>=</span> <span class=n>tree</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;//div[@class=&#34;slist&#34;]/ul/li&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>li</span> <span class=ow>in</span> <span class=n>li_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=c1>#å±€éƒ¨è§£æï¼šå°†liæ ‡ç­¾ä¸­æŒ‡å®šçš„å†…å®¹è§£æå‡ºæ¥</span>
</span></span><span class=line><span class=cl>      <span class=n>img_title</span> <span class=o>=</span> <span class=n>li</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;./a/b/text()&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span><span class=o>+</span><span class=s1>&#39;.jpg&#39;</span><span class=c1># å·¦ä¾§./è¡¨ç¤ºxpathçš„è°ƒç”¨è€…å¯¹åº”çš„æ ‡ç­¾</span>
</span></span><span class=line><span class=cl>      <span class=n>img_src</span> <span class=o>=</span> <span class=s1>&#39;https://pic.netbian.com&#39;</span><span class=o>+</span><span class=n>li</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;./a/img/@src&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=c1>#å¯¹å›¾ç‰‡å‘èµ·è¯·æ±‚ï¼Œå­˜å‚¨å›¾ç‰‡æ•°æ®</span>
</span></span><span class=line><span class=cl>      <span class=n>img_data</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>img_src</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span><span class=o>.</span><span class=n>content</span>
</span></span><span class=line><span class=cl>      <span class=c1># girls/123.jpg</span>
</span></span><span class=line><span class=cl>      <span class=n>img_path</span> <span class=o>=</span> <span class=n>dirName</span> <span class=o>+</span> <span class=s1>&#39;/&#39;</span> <span class=o>+</span> <span class=n>img_title</span>
</span></span><span class=line><span class=cl>      <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>img_path</span><span class=p>,</span><span class=s1>&#39;wb&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>fp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>          <span class=n>fp</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>img_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nb>print</span><span class=p>(</span><span class=n>img_title</span><span class=p>,</span><span class=s1>&#39;ä¸‹è½½ä¿å­˜æˆåŠŸï¼&#39;</span><span class=p>)</span>
</span></span></code></pre></div></li><li><p>çˆ¬å–å¤šé¡µ</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>  <span class=kn>from</span> <span class=nn>lxml</span> <span class=kn>import</span> <span class=n>etree</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl>  <span class=c1>#æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹</span>
</span></span><span class=line><span class=cl>  <span class=n>dirName</span> <span class=o>=</span> <span class=s1>&#39;girls&#39;</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>dirName</span><span class=p>):</span><span class=c1>#å¦‚æœæ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œåˆ™æ–°å»ºï¼Œå¦åˆ™ä¸æ–°å»º</span>
</span></span><span class=line><span class=cl>      <span class=n>os</span><span class=o>.</span><span class=n>mkdir</span><span class=p>(</span><span class=n>dirName</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;User-Agent&#39;</span><span class=p>:</span><span class=s1>&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>#åˆ›å»ºä¸€ä¸ªé€šç”¨çš„url:é™¤äº†ç¬¬ä¸€é¡µå…¶ä»–é¡µç çš„é€šç”¨url</span>
</span></span><span class=line><span class=cl>  <span class=n>url</span> <span class=o>=</span> <span class=s1>&#39;https://pic.netbian.com/4kmeinv/index_</span><span class=si>%d</span><span class=s1>.html&#39;</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>page</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>6</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=n>page</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>          <span class=n>new_url</span> <span class=o>=</span> <span class=s1>&#39;https://pic.netbian.com/4kmeinv/index.html&#39;</span>
</span></span><span class=line><span class=cl>      <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>          <span class=n>new_url</span> <span class=o>=</span> <span class=nb>format</span><span class=p>(</span><span class=n>url</span><span class=o>%</span><span class=n>page</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;----------æ­£åœ¨è¯·æ±‚ä¸‹è½½ç¬¬</span><span class=si>%d</span><span class=s1>é¡µçš„å›¾ç‰‡æ•°æ®----------&#39;</span><span class=o>%</span><span class=n>page</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>new_url</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=n>response</span><span class=o>.</span><span class=n>encoding</span> <span class=o>=</span> <span class=s1>&#39;gbk&#39;</span>
</span></span><span class=line><span class=cl>      <span class=n>page_text</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>text</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=c1>#æ•°æ®è§£æï¼šå›¾ç‰‡åœ°å€+å›¾ç‰‡åç§°</span>
</span></span><span class=line><span class=cl>      <span class=n>tree</span> <span class=o>=</span> <span class=n>etree</span><span class=o>.</span><span class=n>HTML</span><span class=p>(</span><span class=n>page_text</span><span class=p>)</span><span class=c1>#HTML()ä¸“é—¨ç”¨æ¥è§£æç½‘ç»œè¯·æ±‚åˆ°çš„é¡µé¢æºç æ•°æ®</span>
</span></span><span class=line><span class=cl>      <span class=c1>#è¯¥åˆ—è¡¨ä¸­å­˜å‚¨çš„æ˜¯æ¯ä¸€ä¸ªliæ ‡ç­¾</span>
</span></span><span class=line><span class=cl>      <span class=n>li_list</span> <span class=o>=</span> <span class=n>tree</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;//div[@class=&#34;slist&#34;]/ul/li&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=k>for</span> <span class=n>li</span> <span class=ow>in</span> <span class=n>li_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>          <span class=c1>#å±€éƒ¨è§£æï¼šå°†liæ ‡ç­¾ä¸­æŒ‡å®šçš„å†…å®¹è§£æå‡ºæ¥</span>
</span></span><span class=line><span class=cl>          <span class=n>img_title</span> <span class=o>=</span> <span class=n>li</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;./a/b/text()&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span><span class=o>+</span><span class=s1>&#39;.jpg&#39;</span><span class=c1># å·¦ä¾§./è¡¨ç¤ºxpathçš„è°ƒç”¨è€…å¯¹åº”çš„æ ‡ç­¾</span>
</span></span><span class=line><span class=cl>          <span class=n>img_src</span> <span class=o>=</span> <span class=s1>&#39;https://pic.netbian.com&#39;</span><span class=o>+</span><span class=n>li</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;./a/img/@src&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          <span class=c1>#å¯¹å›¾ç‰‡å‘èµ·è¯·æ±‚ï¼Œå­˜å‚¨å›¾ç‰‡æ•°æ®</span>
</span></span><span class=line><span class=cl>          <span class=n>img_data</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>img_src</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span><span class=o>.</span><span class=n>content</span>
</span></span><span class=line><span class=cl>          <span class=c1># girls/123.jpg</span>
</span></span><span class=line><span class=cl>          <span class=n>img_path</span> <span class=o>=</span> <span class=n>dirName</span> <span class=o>+</span> <span class=s1>&#39;/&#39;</span> <span class=o>+</span> <span class=n>img_title</span>
</span></span><span class=line><span class=cl>          <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>img_path</span><span class=p>,</span><span class=s1>&#39;wb&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>fp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>              <span class=n>fp</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>img_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=nb>print</span><span class=p>(</span><span class=n>img_title</span><span class=p>,</span><span class=s1>&#39;ä¸‹è½½ä¿å­˜æˆåŠŸï¼&#39;</span><span class=p>)</span>
</span></span></code></pre></div></li></ul></li><li><p><a href=https://www.aqistudy.cn/historydata/>https://www.aqistudy.cn/historydata/</a></p><ul><li><p>çˆ¬å–çƒ­é—¨åŸå¸‚å’Œå…¨éƒ¨åŸå¸‚çš„åç§°</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>  <span class=c1>#ç¬¬ä¸€ç§å†™æ³•</span>
</span></span><span class=line><span class=cl>  <span class=kn>from</span> <span class=nn>lxml</span> <span class=kn>import</span> <span class=n>etree</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;User-Agent&#39;</span><span class=p>:</span><span class=s1>&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=n>url</span> <span class=o>=</span> <span class=s1>&#39;https://www.aqistudy.cn/historydata/&#39;</span>
</span></span><span class=line><span class=cl>  <span class=n>page_text</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span><span class=o>.</span><span class=n>text</span>
</span></span><span class=line><span class=cl>  <span class=n>tree</span> <span class=o>=</span> <span class=n>etree</span><span class=o>.</span><span class=n>HTML</span><span class=p>(</span><span class=n>page_text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>#è§£æçƒ­é—¨åŸå¸‚</span>
</span></span><span class=line><span class=cl>  <span class=n>hot_li_list</span> <span class=o>=</span> <span class=n>tree</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;//div[@class=&#34;bottom&#34;]/ul/li&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>li</span> <span class=ow>in</span> <span class=n>hot_li_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=n>city_name</span> <span class=o>=</span> <span class=n>li</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;./a/text()&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nb>print</span><span class=p>(</span><span class=n>city_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>#è§£æå…¨éƒ¨åŸå¸‚</span>
</span></span><span class=line><span class=cl>  <span class=n>all_li_list</span> <span class=o>=</span> <span class=n>tree</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;//div[@class=&#34;bottom&#34;]/ul/div[2]/li&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>li</span> <span class=ow>in</span> <span class=n>all_li_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=n>city_name</span> <span class=o>=</span> <span class=n>li</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;./a/text()&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nb>print</span><span class=p>(</span><span class=n>city_name</span><span class=p>)</span>
</span></span></code></pre></div></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>  <span class=c1>#ç¬¬äºŒç§å†™æ³•</span>
</span></span><span class=line><span class=cl>  <span class=kn>from</span> <span class=nn>lxml</span> <span class=kn>import</span> <span class=n>etree</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;User-Agent&#39;</span><span class=p>:</span><span class=s1>&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=n>url</span> <span class=o>=</span> <span class=s1>&#39;https://www.aqistudy.cn/historydata/&#39;</span>
</span></span><span class=line><span class=cl>  <span class=n>page_text</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span><span class=o>.</span><span class=n>text</span>
</span></span><span class=line><span class=cl>  <span class=n>tree</span> <span class=o>=</span> <span class=n>etree</span><span class=o>.</span><span class=n>HTML</span><span class=p>(</span><span class=n>page_text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>#è§£æçƒ­é—¨åŸå¸‚+æ‰€æœ‰åŸå¸‚</span>
</span></span><span class=line><span class=cl>  <span class=c1>#æ­¤å¤„xpathè¡¨è¾¾å¼çš„ç®¡é“ç¬¦ï¼ˆ|ï¼‰å¯ä»¥æ˜¯çš„xpathè¡¨è¾¾å¼æ›´åŠ å…·æœ‰é€šç”¨æ€§</span>
</span></span><span class=line><span class=cl>  <span class=n>li_list</span> <span class=o>=</span> <span class=n>tree</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;//div[@class=&#34;bottom&#34;]/ul/li | //div[@class=&#34;bottom&#34;]/ul/div[2]/li&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>li</span> <span class=ow>in</span> <span class=n>li_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=n>city_name</span> <span class=o>=</span> <span class=n>li</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;./a/text()&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nb>print</span><span class=p>(</span><span class=n>city_name</span><span class=p>)</span>
</span></span></code></pre></div></li></ul></li><li><p><a href=https://sc.chinaz.com/jianli/free.html>https://sc.chinaz.com/jianli/free.html</a></p><ul><li><p>ä¸‹è½½å½“å‰é¡µæ‰€æœ‰çš„å»ºç«‹æ¨¡æ¿</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>  <span class=kn>from</span> <span class=nn>lxml</span> <span class=kn>import</span> <span class=n>etree</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;User-Agent&#39;</span><span class=p>:</span><span class=s1>&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=n>url</span> <span class=o>=</span> <span class=s1>&#39;https://sc.chinaz.com/jianli/free.html&#39;</span>
</span></span><span class=line><span class=cl>  <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>response</span><span class=o>.</span><span class=n>encoding</span> <span class=o>=</span> <span class=s1>&#39;utf-8&#39;</span>
</span></span><span class=line><span class=cl>  <span class=n>page_text</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>text</span>
</span></span><span class=line><span class=cl>  <span class=c1>#æ•°æ®è§£æ:ç®€å†åç§°+è¯¦æƒ…é¡µçš„url</span>
</span></span><span class=line><span class=cl>  <span class=n>tree</span> <span class=o>=</span> <span class=n>etree</span><span class=o>.</span><span class=n>HTML</span><span class=p>(</span><span class=n>page_text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>div_list</span> <span class=o>=</span> <span class=n>tree</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;//*[@id=&#34;container&#34;]/div&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>div</span> <span class=ow>in</span> <span class=n>div_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=n>title</span> <span class=o>=</span> <span class=n>div</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;./p/a/text()&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span><span class=o>+</span><span class=s1>&#39;.rar&#39;</span>
</span></span><span class=line><span class=cl>      <span class=n>detail_url</span> <span class=o>=</span> <span class=s1>&#39;https:&#39;</span><span class=o>+</span><span class=n>div</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;./p/a/@href&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=c1># print(title,detail_url)</span>
</span></span><span class=line><span class=cl>      <span class=c1>#å¯¹è¯¦æƒ…é¡µçš„urlå‘èµ·è¯·æ±‚</span>
</span></span><span class=line><span class=cl>      <span class=n>detail_page_text</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>detail_url</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span><span class=o>.</span><span class=n>text</span>
</span></span><span class=line><span class=cl>      <span class=c1>#æ•°æ®è§£æï¼šä¸‹è½½åœ°å€</span>
</span></span><span class=line><span class=cl>      <span class=n>tree</span> <span class=o>=</span> <span class=n>etree</span><span class=o>.</span><span class=n>HTML</span><span class=p>(</span><span class=n>detail_page_text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=n>download_url</span> <span class=o>=</span> <span class=n>tree</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;//*[@id=&#34;down&#34;]/div[2]/ul/li[1]/a/@href&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=c1>#åœ¨ä¸‹è½½è¯·æ±‚å»ºç«‹æ¨¡æ¿</span>
</span></span><span class=line><span class=cl>      <span class=n>data</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>download_url</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span><span class=o>.</span><span class=n>content</span>
</span></span><span class=line><span class=cl>      <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>title</span><span class=p>,</span><span class=s1>&#39;wb&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>fp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>          <span class=n>fp</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nb>print</span><span class=p>(</span><span class=n>title</span><span class=p>,</span><span class=s1>&#39;ä¿å­˜ä¸‹è½½æˆåŠŸï¼&#39;</span><span class=p>)</span>
</span></span></code></pre></div></li></ul></li><li><p><a href=http://blog.sina.com.cn/lm/pic/>http://blog.sina.com.cn/lm/pic/</a></p><ul><li><p>çˆ¬å–ç²¾é€‰å›¾ç‰‡çš„ç¼©ç•¥å›¾å’Œæ ‡é¢˜</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>  <span class=kn>from</span> <span class=nn>lxml</span> <span class=kn>import</span> <span class=n>etree</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;User-Agent&#39;</span><span class=p>:</span><span class=s1>&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=n>url</span> <span class=o>=</span> <span class=s1>&#39;http://blog.sina.com.cn/lm/pic/&#39;</span>
</span></span><span class=line><span class=cl>  <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>response</span><span class=o>.</span><span class=n>encoding</span> <span class=o>=</span> <span class=s1>&#39;utf-8&#39;</span>
</span></span><span class=line><span class=cl>  <span class=n>page_text</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>text</span>
</span></span><span class=line><span class=cl>  <span class=c1>#æ•°æ®è§£æï¼šå›¾ç‰‡åœ°å€+æ ‡é¢˜</span>
</span></span><span class=line><span class=cl>  <span class=n>tree</span> <span class=o>=</span> <span class=n>etree</span><span class=o>.</span><span class=n>HTML</span><span class=p>(</span><span class=n>page_text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>#ç›´æ¥åˆ é™¤è¢«éšè—çš„divï¼Œå°†å…¶åœ¨xpathè¡¨è¾¾å¼ä¸­è·¨è¿‡å³å¯</span>
</span></span><span class=line><span class=cl>  <span class=n>li_list</span> <span class=o>=</span> <span class=n>tree</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;//*[@id=&#34;pic_wrap0&#34;]//ul[1]/li&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>li</span> <span class=ow>in</span> <span class=n>li_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=n>img_src</span> <span class=o>=</span> <span class=n>li</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;./a/div/img/@src&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=n>title</span> <span class=o>=</span> <span class=n>li</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;./a/div/img/@title&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=nb>print</span><span class=p>(</span><span class=n>img_src</span><span class=p>,</span><span class=n>title</span><span class=p>)</span>
</span></span></code></pre></div></li></ul></li></ul></li></ul></li></ul></div><div class=post-reward><div style=padding:0;margin:0;width:100%;font-size:16px;text-align:center><div id=QR style=opacity:0><div id=wechat style=display:inline-block><a class=fancybox rel=group><img id=wechat_qr src=https://canw0916.github.io/img/wxPay.jpg alt=wechat_pay></a><p>å¾®ä¿¡</p></div><div id=alipay style=display:inline-block><a class=fancybox rel=group><img id=alipay_qr src=https://canw0916.github.io/img/aliPay.jpg alt=alipay></a><p>æ”¯ä»˜å®</p></div></div><button id=rewardButton onclick='var qr=document.getElementById("QR");qr.style.opacity==="0"?qr.style.opacity="1":qr.style.opacity="0"'>
<span>ğŸ§§ é¼“åŠ±</span></button></div></div><footer class=post-footer><nav class=paginav><a class=prev href=https://canw0916.github.io/en/posts/tech/requests%E9%AB%98%E7%BA%A7/><span class=title>Â« ä¸Šä¸€é¡µ</span><br><span>Requestsé«˜çº§</span>
</a><a class=next href=https://canw0916.github.io/en/posts/tech/requests%E5%9F%BA%E7%A1%80/><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>RequestsåŸºç¡€</span></a></nav></footer></div><div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>ğŸ’¬è¯„è®º</span><hr></div><div id=tcomment></div><script src=https://utteranc.es/client.js repo=canw0916/utterances_comments issue-term=title theme=photon-dark crossorigin=anonymous async></script></div></article></main><script async src=https://unpkg.com/mermaid@8.8.1/dist/mermaid.min.js></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><footer class=footer><span>Copyright
&copy;
2023-2025
<a href=https://canw0916.github.io/en/ style=color:#939393>Felix's Blog</a>
All Rights Reserved
</span><a href=https://beian.miit.gov.cn/ target=_blank style=color:#939393></a>&nbsp;
<span><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=null" style=display:inline-block;text-decoration:none;height:20px;color:#939393><img src style="float:left;margin:0 5px 0 0">
</a></span><span id=busuanzi_container><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css>æ€»è®¿å®¢æ•°: <span id=busuanzi_value_site_uv></span>
æ€»è®¿é—®é‡: <span id=busuanzi_value_site_pv></span></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
<span id=read_progress></span>
</span></a><script>document.addEventListener("scroll",function(){const t=document.getElementById("read_progress"),n=document.documentElement.scrollHeight,s=document.documentElement.clientHeight,o=document.documentElement.scrollTop||document.body.scrollTop;t.innerText=((o/(n-s)).toFixed(2)*100).toFixed(0)})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>let mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>400||document.documentElement.scrollTop>400?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="ğŸ“„å¤åˆ¶";function s(){t.innerText="ğŸ‘ŒğŸ»å·²å¤åˆ¶!",setTimeout(()=>{t.innerText="ğŸ“„å¤åˆ¶"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){let t=e.textContent+`\r
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\r
ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€ŒFelix's Blogã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚\r
åŸæ–‡é“¾æ¥ï¼š`+location.href;navigator.clipboard.writeText(t),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild===n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName==="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script src=https://code.jquery.com/jquery-1.12.4.min.js></script><script>$("code[class^=language] ").on("mouseover",function(){this.clientWidth<this.scrollWidth&&$(this).css("width","135%")}).on("mouseout",function(){$(this).css("width","100%")})</script></body></html>