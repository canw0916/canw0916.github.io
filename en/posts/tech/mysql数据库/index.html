<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Mysql数据库 | Felix's Blog</title>
<meta name=keywords content><meta name=description content="数据库概述


为什么要使用数据库？


那我们在没有学习数据库的时候，数据存放在json或者磁盘文件中不也挺好的嘛，为啥还要学习数据库？"><meta name=author content="
作者:Felix"><link rel=canonical href=https://canw0916.github.io/en/posts/tech/mysql%E6%95%B0%E6%8D%AE%E5%BA%93/><link crossorigin=anonymous href=/assets/css/stylesheet.a7d877c95a8fd8f651ae0a99e2d0566db6cd06091905d495b3f79ebd3536ed91.css integrity="sha256-p9h3yVqP2PZRrgqZ4tBWbbbNBgkZBdSVs/eevTU27ZE=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://canw0916.github.io/img/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://canw0916.github.io/img/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://canw0916.github.io/img/favicon-32x32.png><link rel=apple-touch-icon href=https://canw0916.github.io/img/apple-touch-icon.png><link rel=mask-icon href=https://canw0916.github.io/img/android-chrome-512x512.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://canw0916.github.io/en/posts/tech/mysql%E6%95%B0%E6%8D%AE%E5%BA%93/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-7ENSZ7BS0C"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-7ENSZ7BS0C")}</script><meta property="og:title" content="Mysql数据库"><meta property="og:description" content="数据库概述


为什么要使用数据库？


那我们在没有学习数据库的时候，数据存放在json或者磁盘文件中不也挺好的嘛，为啥还要学习数据库？"><meta property="og:type" content="article"><meta property="og:url" content="https://canw0916.github.io/en/posts/tech/mysql%E6%95%B0%E6%8D%AE%E5%BA%93/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-10T14:23:09+08:00"><meta property="article:modified_time" content="2023-02-10T14:23:09+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Mysql数据库"><meta name=twitter:description content="数据库概述


为什么要使用数据库？


那我们在没有学习数据库的时候，数据存放在json或者磁盘文件中不也挺好的嘛，为啥还要学习数据库？"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"📚文章","item":"https://canw0916.github.io/en/posts/"},{"@type":"ListItem","position":2,"name":"🚀 技术","item":"https://canw0916.github.io/en/posts/tech/"},{"@type":"ListItem","position":3,"name":"Mysql数据库","item":"https://canw0916.github.io/en/posts/tech/mysql%E6%95%B0%E6%8D%AE%E5%BA%93/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Mysql数据库","name":"Mysql数据库","description":"数据库概述 为什么要使用数据库？\n那我们在没有学习数据库的时候，数据存放在json或者磁盘文件中不也挺好的嘛，为啥还要学习数据库？\n","keywords":[""],"articleBody":"数据库概述 为什么要使用数据库？\n那我们在没有学习数据库的时候，数据存放在json或者磁盘文件中不也挺好的嘛，为啥还要学习数据库？\n文件中存储数据，无法基于文件直接对数据进行操作或者运算，必须借助python将数据读取到计算机内存中然后基于Python程序操作数据，麻烦而且性能不高。\n使用文件存储数据，无法实现数据的共享。\n什么是数据库呢？先介绍几个概念：\n数据：Data\n描述事物的符号记录称为数据，描述事物的符号既可以是数字，也可以是文字、图片，图像、声音、语言等，数据由多种表现形式，它们都可以经过数字化后存入计算机。\n例如：描述一个人的基本信息就是一组数据，在数据库中叫一行记录。\nname age sex Ailsa 23 女 数据库：DataBase(DB)\n即存放数据的仓库，我们可以把它想象成文件夹，里面存放了很多张表，每个表就是一个文件，不过数据库中的数据是按照一定的规则进行组织、描述和储存，且具有较小的冗余度、较高的数据独立性和易扩展性，并可为各种用户共享\n数据库管理软件\n在了解了Data与DB的概念后，如何科学地组织和存储数据，如何高效获取和维护数据成了关键，这就用到了一个系统软件—数据库管理系统\n如MySQL、Oracle、SQLite、Access、MS SQL Server\n但是我们日常工作中经常会把数据库管理软件称为数据库，注意理解对象的意思：例如\n小王啊，你们公司用的什么数据库啊，这个指的是数据库管理软件 小王啊，这个学生管理系统的数据库是哪个？这个指的就是数据库文件夹，一般情况下一个项目的所有涉及到的数据会存放在一个数据库中，方便统一管理。 总结：\n数据库服务器：运行数据库管理软件 数据库管理软件：管理数据库 数据库：即文件夹，用来组织文件/表 表：即文件，用来存放多行内容/多条记录 Mysql介绍 数据库管理软件按照分类分为 关系型数据库和非关系型数据库 关系型数据库 在数据库中各个表之间存在关联关系，需要设计表结构，一张表中每个字段之间也存在关系，通过SQL语句对数据库进行增删改查的操作。 例如：MySQL、oracle 、sql server、sqllite，access，db2 注意：sql语句通用 非关系型数据库 非关系型数据库是key-value存储的，没有表结构，存取速度快 例如：redis、mongodb Mysql： MySQL是一个关系型数据库管理系统，由瑞典MySQL AB 公司开发，目前属于 Oracle 旗下公司。MySQL 最流行的关系型数据库管理系统，在 WEB 应用方面MySQL是最好的 RDBMS (Relational Database Management System，关系数据库管理系统) 应用软件之一。 MySQL被广泛的应用在Internet上的大中小型网站中。由于体积小、速度快、总体拥有成本低，开放源代码 特点:开源,免费,应用广泛 Mysql下载和安装 下载 我们下载安装的是mysql管理软件，它相当于是一个服务端，每个建立好的连接的用户都可以访问，但是这里为了让自己自主学习，所以我们会把这个软件下载安装到每个人的自己电脑上，相当于在自己电脑上安装了mysql的服务端，这个软件他也自带一个客户端，我们可以通过cmd终端的形式进行访问，当然也可以通过可视化工具navicate来访问，接下来我们会一一讲解。\nmysql管理下载\n第一步：打开网址，https://www.mysql.com，点击downloads之后跳转到https://www.mysql.com/downloads\n第二步：选择Community选项\n第三步：选择对应的操作系统版本\n第四步：选择具体版本的mysql，建议选择5.6或者5.7版本\n第五步：直接下载\n解压 下载的zip文件解压，将解压之后的文件夹放到任意目录下，这个目录就是mysql的安装目录。 注意:安装目录尽量在某盘的根目录下,如果不在根目录,则安装路径中不能有中文,不能有特殊转义符的出现。 配置环境变量 在系统变量PATH后面添加: 你的mysql的bin文件夹的路径（如C:\\Program Files\\mysql-5.6.41-winx64\\bin） 执行初始化 在任意路径下，以管理员的身份打开终端执行：\nmysqld --initialize-insecure 初始化时将root用户的登录密码设置为空。\n注意，如果报错：提示缺少MSVCP120.dll文件的话，后面有解决办法。\n初始化成功如下图：\n初始化成功的另一个标志是，在MySQL的安装目录中，会多个data目录，这个data目录是是MySQL在初始化过程中创建的数据目录。\n安装Mysql服务 1.以管理员身份打开cmd窗口，记住,一定要是管理员身份 2.输入如下指令： mysqld install 回车运行 启动Mysql服务 现在系统的服务中就可以找到MySQL了。 但此时MySQL服务还没有启动，你可以在服务中点击启动，也可以在终端中使用net命令来启动/关闭MySQL服务。 ok，现在MySQL服务正常启动了，并且，由于系统服务中的MySQL服务设置的是自动，下次系统启动时，MySQL服务也默认启动了。 服务启动成功之后，就可以登录了 输入mysql -u root -p（第一次登录没有密码，直接按回车过） 但登录成功之后需要设置密码: 语法: set password = password(‘密码’) 为了方便记忆，密码尽量简单一点，但是实际工作中为了保证数据安全，密码尽量设置的复杂一些。 可能发生问题处理 缺少MSVCP120.dll文件 报错原因是，系统缺少Visual C ++可再发行组件包。\n解决：\n打开microsoft官网：https://www.microsoft.com/en-us/download/details.aspx?id=40784，点击下载: 根据系统位数选择下载： 以管理员的身份运行，然后默认安装即可。 重新以管理员身份打开终端，重新执行初始化步骤吧！ mysqld --initialize-insecure Navicate下载安装 Navicate是一种操作数据库的可视化工具。 下载地址：https://www.navicat.com.cn/products 使用Navicate链接数据库：连接成功之后，你就可以通过该软件查看所有的数据库文件了 Sql概述 先来看一个例子：小王第一次使用数据库，然后跟数据库来了个隔空对话\n其实，我们想一想，mysql是一个软件，它有它自己一套的管理规则，我们想要跟它打交道，就必须遵守它的规则，如果我想获取数据，它自己有一套规则，这个规则就是SQL。 什么是sql？\nSQL : 结构化查询语言(Structured Query Language)简称SQL，是一种特殊目的的编程言，是一种数据库查询和程序设计语言，SQL语言主要用于存取数据、查询数据、更新数据和管理关系数据库系统,SQL语言由IBM开发。 其实简单的说，就是你发送给他能识别的暗号，他懂了就会给你返回数据。 注意： 对于关系型数据库而言，SQL语句是通用的，学会了一种，其他只是一些细微的差别，毕竟人家数据库也是一个种族，语言是通用的，只不过有些存在方言的差别。 sql的分类\nSQL语言分为3种类型：\n1、DDL语句 数据库定义语言： 数据库、表、视图、索引、存储过程，例如CREATE DROP ALTER\n2、DML语句 数据库操纵语言： 插入数据INSERT、删除数据DELETE、更新数据UPDATE、查询数据SELECT\n3、DCL语句 数据库控制语言： 例如控制用户的访问权限GRANT、REVOKE\n库表操作DDL 库的增删改查 这里的库指的数据库，也就是我们所谓的那个文件夹，一般情况下，我们在开发项目前，会先设计数据库中相关表结构，一个项目中所有表都会放在同一个文件夹下，对于库的操作属于SQL分类中的DDL，也就是数据库定义语言。\n创建数据库\ncreate database 仓库名; 创建数据库并制定编码:utf8设置好后，就表示数据库中可以存储中文数据\ncreate database 仓库名 charset utf8; 使用数据库\nuse 仓库名; 查看所有数据库和单独常看当前数据库\nshow databases; #查看当前所有的数据仓库 select database(); #查看当前使用的是哪一个数据仓库 #注意：sql语句不区分大小写，但是sql中使用的标识符尽量控制大小写 修改数据库\n数据库的名称一旦创建好之后就无法修改 修改数据库一般只修改编码 alter database 仓库名 charset gbk #将数据的字符集编码修改成了gbk 删除数据库\ndrop database 仓库名; 表的增删改查 创建表 create table 表名( 字段名1 类型(宽度) 约束条件, 字段名2 类型(宽度) 约束条件, 字段名3 类型(宽度) 约束条件, ); 注意: 1.字段名不能重复 2.宽度和约束条件可选 3.字段名和类型是必须的 查看表结构 desc 表名； 数据类型 **字符串：**顾名思义，就是存储的一连串的字符，例如文字\n​\n数值型：常用的有：int ，double， float\n整数型：int 基本int能够处理日常工作中大部分整数存储问题\n小数型：double float\n强调一下float(5,2)其中5代表总长度，2代表小数长度,这个意思是整数是3位,小数是2位 日常工作中float足以解决小数问题了。\n日期类型\nnow()函数：返回当前系统时间\ndate：年月日\ntime：时分秒\ndatetime：年月日时分秒\ncreate table t(date1 date,date2 time,date3,datetime); insert into t(now(),now(),now()); mysql\u003e select * from t; +------------+----------+---------------------+ | date1 | date2 | date3 | +------------+----------+---------------------+ | 2020-04-15 | 16:02:43 | 2020-04-15 16:02:43 | +------------+----------+---------------------+ 1 row in set (0.00 sec) ENUM和SET类型：\n这里的类似于下拉字段，在进行数据插入的时候，必须选择事先设置的内容 对于set而言，可以多选，但是enum只能单选 create table UserData ( id int, #用户编号 money float(9,2),#用户余额 registTime datetime,#用户的注册时间 usernmae varchar(50), sex enum('male','female'),#单选 address set('BJ','SH','GZ')#多选 ) 约束条件 为了防止不符合规范的数据进入数据库，在用户对数据进行插入、修改、删除等操作时，DBMS自动按照一定的约束条件对数据进行监测，使不符合规范的数据不能进入数据库，以确保数据库中存储的数据正确、有效、相容。\n约束条件与数据类型的宽度一样，都是可选参数，主要分为以下几种：\nNOT NULL ：非空约束，指定某列不能为空； DEFAULT:默认值 UNIQUE : 唯一约束，指定某列或者几列组合不能重复 PRIMARY KEY ：主键，指定该列的值可以唯一地标识该列记录 FOREIGN KEY ：外键，指定该行记录从属于主表中的一条记录，主要用于参照完整性 not null:不为空，当你设置一个字段时，不允许它为空，可以使用此约束条件\ncreate table t1 ( id int, name varchar(20) not null#name字段的值不可以为空 ) default 默认值\n例如：对于性别一列，如果大部分都是男性，可以设置成默认值，不填则取默认值，填写了则覆盖默认值 create table t2 ( id int, name varchar(20), sex char(10) DEFAULT('male') ) unique 唯一:当有一列字段你不想让它有重复值时，可以设置为唯一\ncreate table t3 ( id int unique, #唯一约束 name varchar(20) ) 联合唯一：只有当你设置的这些字段同时重复时才会报错 create table t4 ( id int, name varchar(20), dep char(10), UNIQUE(name,dep) #联合唯一约束 ) primary key\n主键为了保证表中的每一条数据的该字段都是表格中的唯一值。换言之，它是用来独一无二地确认一个表格中的每一行数据。\n主键可以包含一个字段或多个字段。当主键包含多个字段时，称为组合键 (Composite Key),也可以叫联合主键。\n单字段主键：\ncreate table t5 ( id int PRIMARY KEY , #主键约束 name varchar(20), salary float(6,2) ) 联合主键:\ncreate table t6 ( id int, #主键约束 name varchar(20), salary float(6,2), PRIMARY KEY(id,name) #联合主键 ) auto_increment 自增字段:\n对于主键id而言，往往我们可以设置为自增字段，不用手动填写\ncreate table t7 ( id int PRIMARY KEY auto_increment, #主键约束 name varchar(20) ) foreign key\n思考：\n假设我们要描述所有公司的员工，需要描述的属性有这些 ： 姓名,年龄，性别，部门，部门描述\n公司有3个部门，但是有1个亿的员工，那意味着部门和部门描述这两个字段需要重复存储，部门名字和部门描述内容越长，越浪费内存，如何处理呢？\n解决方法： 我们完全可以定义一个部门表然后让员工信息表关联该表，如何关联，即foreign key\nforeign key(当前表中建立关系的外键字段) references 被关联表名(id) #创建两张表： #被关联表：dep： create table dep( id int primary key auto_increment, dep_name varchar(16), dep_desc varchar(255)); #关联表：emp:\tcreate table emp( id int primary key auto_increment, name varchar(6), age int, gender enum('male','female'), dep_id int not null, foreign key(dep_id) references dep(id)); 级联删除，级联更新\n两张表建立关联之后，如果部门表某个部门的砍掉了，那对应的人员表中的那些部门的人员相应的该怎么处理呢？可以保存，也可以随之一起删除.\n如果要保证两表一致，则需要在设置外键时添加on delete cascade\n如果部门id更新了，要一起更新的话，则添加on update cascade\n#被关联表：dep： create table dep( id int primary key auto_increment, dep_name varchar(16), dep_desc varchar(255)); #关联表：emp:\tcreate table emp( id int primary key auto_increment, name varchar(6), age int, gender enum('male','female'), dep_id int not null, foreign key(dep_id) references dep(id) on delete cascade on update cascade ) 修改表 修改表名\nalter table 旧表名 rename 新表名 修改表字段的数据类型\nalter table 表名 modify 字段 新数据类型 修改表字段名\nalter table 表名 change 旧字段名 新字段名 新数据类型 新增字段\nalter table 表名 add 新增字段名 数据类型 约束条件#约束条件可选 删除字段\nalter table 表名 drop 字段名 查看所有的表\nshow tables 删除表 drop table 表名 记录操作DML 插入数据 插入完整的数据\ninsert into 表名 (字段1，字段2) values ('字段1的值','字段2的值') create table new_dep( id int PRIMARY KEY auto_increment, dep_name varchar(10), dep_desc varchar(100) ); #给指定字段插入数据 insert into new_dep (dep_name,dep_desc) values ('yanfabu','ssss'); insert into new_dep (dep_name,dep_desc) values ('销售部','ssss'); 插入多条数据\ninsert into 表名 values ('xx1','xx2'),(xx1,xx2) #插入几条数据就写几个括号 更新数据 单独更新一个字段\nupdate 表名 set 字段名 = 字段值 where 条件 更新多个字段\nupdate 表名 set 字段1 = 字段值1,字段2 = 字段值2 where 条件 删除数据 删除指定数据数据\ndelete from 表名 where 条件 删除表中所有数据\n#不加where条件就是清空表,一定要慎重使用delete # 如果有自增id，新增的数据，仍然是以删除前的最后一样作为起始。 delete from 表名 # 数据量大，删除速度比上一条快，且直接从零开始 truncate table t1; 查询数据 单表查询 准备数据\n#创建员工表，字段为： #id自增，员工名不能为空，性别只可以为male或者female且不能为空，默认值为male #age不能为空，默认值28，入职日期只显示年月日，职位名称，工资保留两位小数，办公室门牌号，部门id create table emp ( id int PRIMARY KEY auto_increment, name char(20) not null, gender enum('male','female') default 'male', age int not null default 28, hire_date date, job_title varchar(30), salary float(10,2), office_num int, dep_id int ) 数据 insert into emp (name,gender,age,hire_date,job_title,salary,office_num,dep_id)values ('weiwei','male',78,'20150302','teacher',1000000.31,401,1), ('lala','male',81,'20130305','teacher',8300,401,1), ('zhangsan','male',73,'20140701','teacher',3500,401,1), ('liulaogen','male',28,'20121101','teacher',2100,401,1), ('aal','female',18,'20110211','teacher',9000,401,1), ('zhugelang','male',18,'19000301','teacher',30000,401,1), ('成龙','male',48,'20101111','teacher',10000,401,1), ('歪歪','female',48,'20150311','sale',3000.13,402,2),#以下是销售部门 ('丫丫','female',38,'20101101','sale',2000.35,402,2), ('丁丁','female',18,'20110312','sale',1000.37,402,2), ('星星','female',18,'20160513','sale',3000.29,402,2), ('格格','female',28,'20170127','sale',4000.33,402,2), ('张野','male',28,'20160311','operation',10000.13,403,3), #以下是运营部门 ('程咬金','male',18,'19970312','operation',20000,403,3), ('程咬银','female',18,'20130311','operation',19000,403,3), ('程咬铜','male',18,'20150411','operation',18000,403,3), ('程咬铁','female',18,'20140512','operation',17000,403,3) 查询所有字段信息\nselect * from 表名; #星华表示的是通配符，表示所有的字段 查询指定字段信息\nselect 字段1，字段2 from 表名 select name,salary from emp #查看所有员工的姓名和薪资的信息 通过四则运算查询\n#查看员工的姓名和其年薪 select name,salary*12 from emp #as可以给列起一个别名，as关键字可以省略 select name,salary*12 as year_salary from emp 为库表重命名\nselect * from emp as e #e就是emp的别名 条件查询where语句\n单条件查询\n#查询销售员工的姓名和薪资 select name,salary from emp where job_title = 'sale' 多条件查询1：结合and\n#查询薪资大于1w的老师对应的名字和薪资 select name,salary from emp where job_title = 'teacher' and salary \u003e 10000 多条件查询2：结合or\n#查询薪资为3，3.5，4，9k的员工名字和具体薪资 select name,salary from emp where salary = 3000 or salary = 3500 or salary = 4000 or salary = 9000 多条件查询3：结合between…and\n#查询薪资范围在1000-5000之间的员工名字和具体信息 select name,salary from emp where salary between 1000 and 5000 多条件查询4:结合in\n#查询薪资为3，3.5，4，9k的员工名字和具体薪资 select name,salary from emp where salary in (3000,3500,4000,9000) 多条件查询5:结合not in\nselect name,salary from emp where salary not in (3000,3500,4000,9000) 模糊查询like\n通配符%:表示多个字符\nselect * from emp where name like 'a%' 通配符_:表示一个字符\nselect * from emp where name like 'zhang___' 分组查询：group by\n简单的分组查询\n注意：使用group by的查询字段必须是分组字段(或者是其他字段的聚合形式)，否则会出错，想要获取其他字段信息,可以借助于聚合函数 select job_title from emp group by job_title 分组聚合\n#查看每一个岗位的人数 #count()使用来做计数操作 select job_title, count(id)from emp group by job_title #计算男女员工的平均年龄 select gender,avg(age) from emp group by gender #计算不同岗位员工的平均薪资 select job_title,avg(salary) from emp group by job_title #查看男女员工的最大,最小年级和整体年龄 select gender,max(age),min(age),sum(age) from emp group by gender having子句\nwhere 与 having的区别：\nwhere 是针对分组之前的字段内容进行过滤,而having是针对分组后的 注意：having后面的条件字段只可以是分组后结果中存在的字段名，否则会报错！\n#查看销售岗位的平均薪资 select job_title,avg(salary) from emp GROUP BY job_title having job_title = 'sale' 排序：order by\n升序： order by 字段 asc(默认升序,可以不写)\n降序： order by 字段 desc\n单列排序：\nselect * from emp order by salary 多列排序：越前面的列优先级越高\nselect * from emp order by salary desc limit\n显示前三条数据\nselect * from emp limit 3 从0开始,先查出第一条,然后包含这条再往后查5条\nselect * from emp limit 0,5 从第3开始,即先查出第4条,然后包含这条再往后查7条\nselect * from emp limit 3,7 使用正则：regexp\n# ^ 以什么开头 select id,name,job_title from emp where name regexp \"^a\"; # $ 以什么结尾 select id,name,job_title from emp where name regexp \"san$\"; # 匹配指定字符内容 select id,name,job_title from emp where name regexp \"i{1}\"; 多表查询 根据指定条件将两张表中的数据进行合并，然后在合并后的结果表中进行数据的查询\n准备数据\ncreate table dep( id int primary key, name char(20) ); create table emp( id int primary key auto_increment, name char(20), sex enum(\"male\",\"female\") not null default \"male\", age int, dep_id int ); # 插入数据 insert into dep values (200,'技术'), (201,'人力资源'), (202,'销售'), (203,'运营'); insert into emp(name,sex,age,dep_id) values ('ailsa','male',18,200), ('lala','female',48,201), ('huahua','male',38,201), ('zhangsan','female',28,202), ('zhaosi','male',18,200), ('shenteng','female',18,204) ; 内连接:\n两张表公共的部分,必须同时有,没有就不显示 #语法；select * from 表1 inner join 表2 on 合并条件 select * from emp inner join dep on emp.dep_id = dep.id 外连接之左连接\n外连接之左连接 以左表为主表,根据左表数据匹配右表,左表数据是全的,而右表若匹配不上则为null select * from emp left join dep on emp.dep_id = dep.id 外连接之右连接\n以右表为主表,根据右表数据匹配左表,右表数据是全的,而左表若匹配不上则为null select * from emp right join dep on emp.dep_id = dep.id 符合条件的多表联查\n#示例1：以内连接的方式查询emp和dep表，并且emp表中的age字段值必须大于25,即找出年龄大于25岁的员工以及员工所在的部门 select * from emp inner join dep on emp.dep_id = dep.id where age \u003e 25 #给表通过as起别名 select d.name,e.name from emp as e inner join dep as d on e.dep_id = d.id where age \u003e 25 #示例2：以内连接的方式查询emp和dep表，并且emp表中的age字段值必须大于25，并且以age字段的升序方式显示 select * from emp as e inner join dep as d on d.id = e.dep_id where age \u003e 25 order by age 子查询:子查询是将一个查询语句嵌套在另一个查询语句中\n带in关键字的子查询\n查询平均年龄在25岁以上的部门名 select name from dep where id in (200,201) #下述sql返回的就是201和202 select dep_id from emp group by dep_id having avg(age) \u003e 25 #整合后的子查询语句 select name from dep where id in ( select dep_id from emp group by dep_id having avg(age) \u003e 25 ) 查看技术部员工姓名 select name from emp where dep_id in (200) #获取部门编号200 select id from dep where name = '技术' #子查询 select name from emp where dep_id in ( select id from dep where name = '技术' ) 带比较运算符的子查询(比较运算符: =、!=、\u003e、\u003e=、\u003c、\u003c=、\u003c\u003e)\n查询大于所有人平均年龄的员工名字与年龄\nselect id,name from emp where age \u003e xx #xx就是所有员工的平均年龄 #如何获取所有员工的平均年龄 select avg(age) from emp #整合后的子查询 select id,name from emp where age \u003e (select avg(age) from emp) 综合练习 准备数据\nCREATE TABLE class ( cid int(11) NOT NULL AUTO_INCREMENT, caption varchar(32) NOT NULL, PRIMARY KEY (cid) ) INSERT INTO class VALUES (1, '三年二班'), (2, '三年三班'), (3, '一年二班'), (4, '二年九班'); CREATE TABLE teacher( tid int(11) NOT NULL AUTO_INCREMENT, tname varchar(32) NOT NULL, PRIMARY KEY (tid) ) INSERT INTO teacher VALUES (1, '张磊老师'), (2, '李平老师'), (3, '刘海燕老师'), (4, '朱云海老师'), (5, '李杰老师'); CREATE TABLE course( cid int(11) NOT NULL AUTO_INCREMENT, cname varchar(32) NOT NULL, teacher_id int(11) NOT NULL, PRIMARY KEY (cid), FOREIGN KEY (teacher_id) REFERENCES teacher (tid) ) INSERT INTO course VALUES (1, '生物', 1), (2, '物理', 2), (3, '体育', 3), (4, '美术', 2); CREATE TABLE student( sid int(11) NOT NULL AUTO_INCREMENT, gender char(1) NOT NULL, class_id int(11) NOT NULL, sname varchar(32) NOT NULL, PRIMARY KEY (sid), FOREIGN KEY (class_id) REFERENCES class (cid) ) INSERT INTO student VALUES (1, '男', 1, '理解'), (2, '女', 1, '钢蛋'), (3, '男', 1, '张三'), (4, '男', 1, '张一'), (5, '女', 1, '张二'), (6, '男', 1, '张四'), (7, '女', 2, '铁锤'), (8, '男', 2, '李三'), (9, '男', 2, '李一'), (10, '女', 2, '李二'), (11, '男', 2, '李四'), (12, '女', 3, '如花'), (13, '男', 3, '刘三'), (14, '男', 3, '刘一'), (15, '女', 3, '刘二'), (16, '男', 3, '刘四'); CREATE TABLE score ( sid int(11) NOT NULL AUTO_INCREMENT, student_id int(11) NOT NULL, course_id int(11) NOT NULL, num int(11) NOT NULL, PRIMARY KEY (sid), FOREIGN KEY (course_id) REFERENCES course (cid), FOREIGN KEY (student_id) REFERENCES student(sid) ) INSERT INTO score VALUES (1, 1, 1, 10), (2, 1, 2, 9), (5, 1, 4, 66), (6, 2, 1, 8), (8, 2, 3, 68), (9, 2, 4, 99), (10, 3, 1, 77), (11, 3, 2, 66), (12, 3, 3, 87), (13, 3, 4, 99), (14, 4, 1, 79), (15, 4, 2, 11), (16, 4, 3, 67), (17, 4, 4, 100), (18, 5, 1, 79), (19, 5, 2, 11), (20, 5, 3, 67), (21, 5, 4, 100), (22, 6, 1, 9), (23, 6, 2, 100), (24, 6, 3, 67), (25, 6, 4, 100), (26, 7, 1, 9), (27, 7, 2, 100), (28, 7, 3, 67), (29, 7, 4, 88), (30, 8, 1, 9), (31, 8, 2, 100), (32, 8, 3, 67), (33, 8, 4, 88), (34, 9, 1, 91), (35, 9, 2, 88), (36, 9, 3, 67), (37, 9, 4, 22), (38, 10, 1, 90), (39, 10, 2, 77), (40, 10, 3, 43), (41, 10, 4, 87), (42, 11, 1, 90), (43, 11, 2, 77), (44, 11, 3, 43), (45, 11, 4, 87), (46, 12, 1, 90), (47, 12, 2, 77), (48, 12, 3, 43), (49, 12, 4, 87), (52, 13, 3, 87); 题目\n1、查询所有的课程的名称以及对应的任课老师姓名 select c.cname,t.tname from course as c inner join teacher as t ON c.teacher_id = t.tid 2、查询学生表中男女生各有多少人 select gender,count(sid) from student GROUP BY gender 3、查询物理成绩等于100的学生的姓名 select t.sname,c.cname,s.num from student as t inner join score as s ON t.sid = s.student_id inner join course as c ON c.cid = s.course_id where c.cname = '物理' and s.num = 100 4、查询平均成绩大于八十分的同学的姓名和平均成绩 #查询平均成绩大于八十分的同学的姓名和平均成绩 #涉及到的字段：成绩，学生名字 #注意：分组条件为一张表的主键ID，则查询字段可以是该表中的任意字段 select t.sid,avg(num),t.sname from student as t inner join score as s on s.student_id = t.sid GROUP BY t.sid having avg(s.num) \u003e 80 5、查询所有学生的学号，姓名，选课数，总成绩 select t.sname,count(course_id) as 科目数,sum(s.num) as 总成绩 from student as t inner join score as s on t.sid = s.student_id GROUP BY t.sid 6、 查询姓李老师的个数 select count(tid) from teacher where tname like '李%' 7、 查询没有报李平老师课的学生姓名 #查询没有报李平老师课的学生姓名 #select sname from student where sname not in (报李平老师学生的名字) #报李平老师学生的名字 #select t1.sname from student as t1 inner join score as s on t1.sid = s.student_id inner join course as c on c.cid = s.course_id inner join teacher as t ON t.tid = c.teacher_id where t.tname = '李平老师' #整合的完成操作 select sname from student where sname not in (select t1.sname from student as t1 inner join score as s on t1.sid = s.student_id inner join course as c on c.cid = s.course_id inner join teacher as t ON t.tid = c.teacher_id where t.tname = '李平老师') 8、 查询物理课程比生物课程高的学生的学号 #1.求出每个学生的物理分数 select s.student_id,s.num from score as s inner join course as c on s.course_id = c.cid where c.cname = '物理' #2.求出每个学生的生物分数 select s.student_id,s.num from score as s inner join course as c on s.course_id = c.cid where c.cname = '生物' #假设t1就是上面物理对应的表，t2就是上面生物对应的表 select * from t1 inner join t2 on t1.student_id = t2.student_id where t1.num \u003e t2.num #最终的整合 select t2.student_id from (select s.student_id,s.num from score as s inner join course as c on s.course_id = c.cid where c.cname = '物理') as t1 inner join (select s.student_id,s.num from score as s inner join course as c on s.course_id = c.cid where c.cname = '生物') as t2 on t1.student_id = t2.student_id where t1.num \u003e t2.num 9、 查询没有同时选修物理课程和体育课程的学生姓名 #1.求出报物理或者报体育学生的记录信息（如果一个学生报物理也报体育了是满足下面条件） select * from student as t inner join score as s on t.sid = s.student_id inner join course as c on c.cid = s.course_id where c.cname = '物理' or c.cname = '体育' #限制只能要求学生报物理或者报体育其中的一门，不能同时报这两门 select t.sid,t.sname from student as t inner join score as s on t.sid = s.student_id inner join course as c on c.cid = s.course_id where c.cname = '物理' or c.cname = '体育' GROUP BY t.sid having count(c.cid) \u003c 2 10、查询挂科超过两门(包括两门)的学生姓名和班级id select t.sname,t.class_id from student as t inner join score as s on t.sid = s.student_id where num \u003c 60 GROUP BY t.sid having count(t.sid) \u003e= 2 11、查询选修了所有课程的学生姓名 #查询选修了所有课程的学生姓名 select t.sname from student as t inner join score as s on t.sid = s.student_id GROUP BY t.sid having count(s.course_id) = 所有科目的数量 #查询所有科目的数量 select count(cid) from course #整合 select t.sname from student as t inner join score as s on t.sid = s.student_id GROUP BY t.sid having count(s.course_id) = (select count(cid) from course ) 12、查询李平老师教的课程的所有学生（id）的成绩记录 select t1.sid,num from student as t1 inner join score as s on t1.sid = s.student_id inner join course as c on c.cid = s.course_id inner join teacher t ON t.tid = c.teacher_id where t.tname = '李平老师' 13、查询全部学生都选修了的课程号和课程名 select c.cid,c.cname from score as s inner join course as c ON s.course_id = c.cid GROUP BY c.cid having count(course_id) = (select count(sid) from student) 14、查询每门课程被选修的次数 select c.cname,count(c.cid) from score as s inner join course as c ON s.course_id = c.cid GROUP BY c.cid 15、查询只选修了一门课程的学生姓名和学号 select t.sname,t.sid from student as t inner join score as s on t.sid = s.student_id GROUP BY student_id HAVING count(s.course_id) = 1 16、查询所有学生考出的成绩并按从高到低排序（成绩去重） #查询所有学生考出的成绩并按从高到低排序（成绩去重） #DISTINCT对某一个查询字段去重 select DISTINCT num from score ORDER BY num desc 17、查询平均成绩大于85的学生姓名和平均成绩 select t.sname,avg(num) from student as t inner join score as s on t.sid = s.student_id group by t.sid having avg(num) \u003e 85 18、查询生物成绩不及格的学生姓名和对应生物分数 select t.sname,num from student as t inner join score as s on t.sid = s.student_id inner join course as c on c.cid = s.course_id where cname = '生物' and num \u003c 60 19、查询在所有选修了李平老师课程的学生中，这些课程(李平老师的课程，不是所有课程)平均成绩最高的学生姓名 select t1.sname,avg(num) from student as t1 inner join score as s on t1.sid = s.student_id inner join course as c on c.cid = s.course_id inner join teacher as t on t.tid = c.teacher_id where t.tname = '李平老师' group by t1.sid order by avg(num) desc limit 1 答案\n1、查询所有的课程的名称以及对应的任课老师姓名 select c.cid,c.cname,t.tname from course c left join teacher t on c.teacher_id = t.tid ; 2、查询学生表中男女生各有多少人 select gender,count(gender) 人数 from student group by gender; 3、查询物理成绩等于100的学生的姓名 select sname,num from student s inner join score s1 on s.sid = s1.student_id left join course c on s1.course_id = c.cid where c.cname = \"物理\" and s1.num = 100; 4、查询平均成绩大于八十分的同学的姓名和平均成绩 select sname,avg(num) 平均成绩 from student s left join score s1 on s.sid = s1.student_id group by sname having avg(num)\u003e=80; 5、查询所有学生的学号，姓名，选课数，总成绩 select student.sid,student.sname,sum(num) as 总成绩,count(course_id) as 课程数 from student inner join score on student.sid = score.student_id group by student.sid 6、 查询姓李老师的个数 select count(tid) 个数 from teacher where tname like \"李%\"; 7、 查询没有报李平老师课的学生姓名 select sname from student where sname not in (select sname from student s left join score s1 on s.sid = s1.student_id left join course c on s1.course_id = c.cid left join teacher t on t.tid = c.teacher_id where t.tname = \"李平老师\"); 8、 查询物理课程比生物课程高的学生的学号 返回每个学生的物理分数表和每个学生生物分数表，将其连接成一张表，然后进行条件查询 select t1.student_id from (select s.student_id,s.num from score as s inner join course as c on s.course_id = c.cid where c.cname = '物理') as t1 inner join (select s.student_id,s.num from score as s inner join course as c on s.course_id = c.cid where c.cname = '生物') as t2 on t1.student_id = t2.student_id where t1.num \u003e t2.num 9、 查询没有同时选修物理课程和体育课程的学生姓名 # 第一种写法 select t.sname from student as t inner join score as s on t.sid = s.student_id inner join course as c on c.cid = s.course_id where c.cname = '物理' or c.cname = '体育' GROUP BY t.sid having count(c.cid) \u003c 2 # 第二种写法:将选修物理或体育的学生根据学号分组，然后每组数据的行等于1的学生就是 select * from student where sid in( select student_id from score s left join course c on s.course_id = c.cid where cname = \"物理\" or cname = \"体育\" group by student_id having count(student_id) = 1 ); 10、查询挂科超过两门(包括两门)的学生姓名和挂科数量 select s.sname,count(s1.sid) 个数 from student s join score s1 on s.sid = s1.student_id where num \u003c 60 group by sname having count(s1.sid)\u003e=2; 11、查询选修了所有课程的学生姓名 select sname from student s join score s1 on s.sid = s1.student_id group by sname having count(student_id) = (select count(cid) from course); 12、查询李平老师教的课程的所有学生（id）的成绩记录 select s.student_id,c.cname,s.num from score s left join course c on s.course_id = c.cid left join teacher t on t.tid = c.teacher_id where t.tname = \"李平老师\"; 13、查询全部学生都选修了的课程号和课程名 select course_id,cname from score s left join course c on s.course_id = c.cid group by course_id HAVING count(course_id) = (select count(sid) from student); 14、查询每门课程被选修的次数(每门课有多少学生选择) select cname,count(c.cname) 次数 from score s left join course c on s.course_id = c.cid group by cname; 15、查询只选修了一门课程的学生姓名和学号 select student_id,sname from score s join student s1 on s.student_id = s1.sid group by student_id having count(s.course_id) = 1; 16、查询所有学生考出的成绩并按从高到低排序（成绩去重:在需要去重字段前面加distinct） select distinct num from score order by num desc; 17、查询平均成绩大于85的学生姓名和平均成绩 select sname,avg(num) 平均成绩 from score s join student s1 on s.student_id = s1.sid group by sname having avg(num)\u003e85; 18、查询生物成绩不及格的学生姓名和对应生物分数 select sname,num from score s left join student s1 on s.student_id = s1.sid left join course c on s.course_id = c.cid where cname = \"生物\" and num \u003c 60; 19、查询在所有选修了李平老师课程的学生中，这些课程(李平老师的课程，不是所有课程)平均成绩最高的学生姓名 select sname,avg(num) 平均成绩 from score s left join student s1 on s.student_id = s1.sid left join course c on s.course_id = c.cid left join teacher t on c.teacher_id = t.tid where tname = \"李平老师\" group by sname order by avg(num) desc limit 1; # 第二种方法 select sname,avg(num) 平均成绩 from score s left join student s1 on s.student_id = s1.sid left join course c on s.course_id = c.cid left join teacher t on c.teacher_id = t.tid where tname = \"李平老师\" group by sname having avg(num)= (select max(平均成绩) from (select sname,avg(num) 平均成绩 from score s left join student s1 on s.student_id = s1.sid left join course c on s.course_id = c.cid left join teacher t on c.teacher_id = t.tid where tname = \"李平老师\" group by sname) t); ","wordCount":"12324","inLanguage":"en","datePublished":"2023-02-10T14:23:09+08:00","dateModified":"2023-02-10T14:23:09+08:00","author":[{"@type":"Person","name":"Felix"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://canw0916.github.io/en/posts/tech/mysql%E6%95%B0%E6%8D%AE%E5%BA%93/"},"publisher":{"@type":"Organization","name":"Felix's Blog","logo":{"@type":"ImageObject","url":"https://canw0916.github.io/img/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><script async src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script><header class=header><nav class=nav><div class=logo><a href=https://canw0916.github.io/en/ accesskey=h title="Felix's Blog (Alt + H)"><img src=https://canw0916.github.io/img/android-chrome-512x512.png alt=logo aria-label=logo height=35>Felix's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://canw0916.github.io/en/search title="🔍 搜索 (Alt + /)" accesskey=/><span>🔍 搜索</span></a></li><li><a href=https://canw0916.github.io/en/ title="🏠 主页"><span>🏠 主页</span></a></li><li><a href=https://canw0916.github.io/en/posts title="📚 文章"><span>📚 文章</span></a></li><li><a href=https://canw0916.github.io/en/tags title="💡 标签"><span>💡 标签</span></a></li><li><a href=https://canw0916.github.io/en/archives/ title="⏱️ 时间轴"><span>⏱️ 时间轴</span></a></li><li><a href=https://canw0916.github.io/en/about title="👦 关于"><span>👦 关于</span></a></li><li><a href=https://canw0916.github.io/en/links title="😺 友链"><span>😺 友链</span></a></li></ul></nav></header><main class="main page"><article class=post-single><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://canw0916.github.io/en/>🏠主页</a>&nbsp;»&nbsp;<a href=https://canw0916.github.io/en/posts/>📚文章</a>&nbsp;»&nbsp;<a href=https://canw0916.github.io/en/posts/tech/>🚀 技术</a></div><h1 class=post-title>Mysql数据库</h1><div class=post-meta>创建:2023-02-10|字数:12324字|时长: 25分钟|
作者:Felix
&nbsp;&nbsp;标签: &nbsp;<ul class=post-tags-meta><a href=https://canw0916.github.io/en/tags/python/>Python</a></ul><span id=busuanzi_container_page_pv>&nbsp;| 访问: <span id=busuanzi_value_page_pv></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>文章目录</span></summary><div class=inner><ul><li><a href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e6%a6%82%e8%bf%b0 aria-label=数据库概述>数据库概述</a></li><li><a href=#mysql%e4%bb%8b%e7%bb%8d aria-label=Mysql介绍>Mysql介绍</a></li><li><a href=#mysql%e4%b8%8b%e8%bd%bd%e5%92%8c%e5%ae%89%e8%a3%85 aria-label=Mysql下载和安装>Mysql下载和安装</a><ul><li><a href=#%e4%b8%8b%e8%bd%bd aria-label=下载>下载</a></li><li><a href=#%e8%a7%a3%e5%8e%8b aria-label=解压>解压</a></li><li><a href=#%e9%85%8d%e7%bd%ae%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f aria-label=配置环境变量>配置环境变量</a></li><li><a href=#%e6%89%a7%e8%a1%8c%e5%88%9d%e5%a7%8b%e5%8c%96 aria-label=执行初始化>执行初始化</a></li><li><a href=#%e5%ae%89%e8%a3%85mysql%e6%9c%8d%e5%8a%a1 aria-label=安装Mysql服务>安装Mysql服务</a></li><li><a href=#%e5%90%af%e5%8a%a8mysql%e6%9c%8d%e5%8a%a1 aria-label=启动Mysql服务>启动Mysql服务</a></li><li><a href=#%e5%8f%af%e8%83%bd%e5%8f%91%e7%94%9f%e9%97%ae%e9%a2%98%e5%a4%84%e7%90%86 aria-label=可能发生问题处理>可能发生问题处理</a></li></ul></li><li><a href=#navicate%e4%b8%8b%e8%bd%bd%e5%ae%89%e8%a3%85 aria-label=Navicate下载安装>Navicate下载安装</a></li><li><a href=#sql%e6%a6%82%e8%bf%b0 aria-label=Sql概述>Sql概述</a></li><li><a href=#%e5%ba%93%e8%a1%a8%e6%93%8d%e4%bd%9cddl aria-label=库表操作DDL>库表操作DDL</a><ul><li><a href=#%e5%ba%93%e7%9a%84%e5%a2%9e%e5%88%a0%e6%94%b9%e6%9f%a5 aria-label=库的增删改查>库的增删改查</a></li><li><a href=#%e8%a1%a8%e7%9a%84%e5%a2%9e%e5%88%a0%e6%94%b9%e6%9f%a5 aria-label=表的增删改查>表的增删改查</a><ul><li><a href=#%e5%88%9b%e5%bb%ba%e8%a1%a8 aria-label=创建表>创建表</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e8%a1%a8%e7%bb%93%e6%9e%84 aria-label=查看表结构>查看表结构</a></li><li><a href=#%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b aria-label=数据类型>数据类型</a></li><li><a href=#%e7%ba%a6%e6%9d%9f%e6%9d%a1%e4%bb%b6 aria-label=约束条件>约束条件</a></li><li><a href=#%e4%bf%ae%e6%94%b9%e8%a1%a8 aria-label=修改表>修改表</a></li><li><a href=#%e5%88%a0%e9%99%a4%e8%a1%a8 aria-label=删除表>删除表</a></li></ul></li></ul></li><li><a href=#%e8%ae%b0%e5%bd%95%e6%93%8d%e4%bd%9cdml aria-label=记录操作DML>记录操作DML</a><ul><li><a href=#%e6%8f%92%e5%85%a5%e6%95%b0%e6%8d%ae aria-label=插入数据>插入数据</a></li><li><a href=#%e6%9b%b4%e6%96%b0%e6%95%b0%e6%8d%ae aria-label=更新数据>更新数据</a></li><li><a href=#%e5%88%a0%e9%99%a4%e6%95%b0%e6%8d%ae aria-label=删除数据>删除数据</a></li><li><a href=#%e6%9f%a5%e8%af%a2%e6%95%b0%e6%8d%ae aria-label=查询数据>查询数据</a><ul><li><a href=#%e5%8d%95%e8%a1%a8%e6%9f%a5%e8%af%a2 aria-label=单表查询>单表查询</a></li><li><a href=#%e5%a4%9a%e8%a1%a8%e6%9f%a5%e8%af%a2 aria-label=多表查询>多表查询</a></li></ul></li><li><a href=#%e7%bb%bc%e5%90%88%e7%bb%83%e4%b9%a0 aria-label=综合练习>综合练习</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h3 id=数据库概述>数据库概述<a hidden class=anchor aria-hidden=true href=#数据库概述>#</a></h3><ul><li><p>为什么要使用数据库？</p><ul><li><p>那我们在没有学习数据库的时候，数据存放在json或者磁盘文件中不也挺好的嘛，为啥还要学习数据库？</p><ul><li><p>文件中存储数据，无法基于文件直接对数据进行操作或者运算，必须借助python将数据读取到计算机内存中然后基于Python程序操作数据，麻烦而且性能不高。</p></li><li><p>使用文件存储数据，无法实现数据的共享。</p></li></ul></li></ul></li><li><p>什么是数据库呢？先介绍几个概念：</p><ul><li><p>数据：Data</p><ul><li><blockquote><p>描述事物的符号记录称为数据，描述事物的符号既可以是数字，也可以是文字、图片，图像、声音、语言等，数据由多种表现形式，它们都可以经过数字化后存入计算机。</p></blockquote></li><li><p>例如：描述一个人的基本信息就是一组数据，在数据库中叫一行记录。</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  name age sex
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Ailsa 23 女
</span></span></code></pre></div></li></ul></li><li><p>数据库：DataBase(DB)</p><ul><li><blockquote><p>即存放数据的仓库，我们可以把它想象成文件夹，里面存放了很多张表，每个表就是一个文件，不过数据库中的数据是按照一定的规则进行组织、描述和储存，且具有较小的冗余度、较高的数据独立性和易扩展性，并可为各种用户共享</p></blockquote></li></ul></li><li><p>数据库管理软件</p><ul><li><blockquote><p>在了解了Data与DB的概念后，如何科学地组织和存储数据，如何高效获取和维护数据成了关键，这就用到了一个系统软件&mdash;数据库管理系统</p></blockquote></li><li><p>如MySQL、Oracle、SQLite、Access、MS SQL Server</p></li><li><p>但是我们日常工作中经常会把数据库管理软件称为数据库，注意理解对象的意思：例如</p><ul><li>小王啊，你们公司用的什么数据库啊，这个指的是数据库管理软件</li><li>小王啊，这个学生管理系统的数据库是哪个？这个指的就是数据库文件夹，一般情况下一个项目的所有涉及到的数据会存放在一个数据库中，方便统一管理。</li></ul></li></ul></li><li><p>总结：</p><ul><li>数据库服务器：运行数据库管理软件</li><li>数据库管理软件：管理数据库</li><li>数据库：即文件夹，用来组织文件/表</li><li>表：即文件，用来存放多行内容/多条记录</li></ul></li><li><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql40.png alt=40></p></li></ul></li></ul><h3 id=mysql介绍>Mysql介绍<a hidden class=anchor aria-hidden=true href=#mysql介绍>#</a></h3><ul><li>数据库管理软件按照分类分为 <strong>关系型数据库</strong>和<strong>非关系型数据库</strong></li><li>关系型数据库<ul><li>在数据库中各个表之间存在关联关系，需要设计表结构，一张表中每个字段之间也存在关系，通过SQL语句对数据库进行增删改查的操作。</li><li>例如：MySQL、oracle 、sql server、sqllite，access，db2</li><li>注意：sql语句通用</li></ul></li><li>非关系型数据库<ul><li>非关系型数据库是key-value存储的，没有表结构，存取速度快</li><li>例如：redis、mongodb</li></ul></li><li>Mysql：<ul><li>MySQL是一个关系型数据库管理系统，由瑞典MySQL AB 公司开发，目前属于 Oracle 旗下公司。MySQL 最流行的关系型数据库管理系统，在 WEB 应用方面MySQL是最好的 RDBMS (Relational Database Management System，关系数据库管理系统) 应用软件之一。</li><li>MySQL被广泛的应用在Internet上的大中小型网站中。由于体积小、速度快、总体拥有成本低，开放源代码</li><li>特点:开源,免费,应用广泛</li></ul></li></ul><h3 id=mysql下载和安装>Mysql下载和安装<a hidden class=anchor aria-hidden=true href=#mysql下载和安装>#</a></h3><h4 id=下载>下载<a hidden class=anchor aria-hidden=true href=#下载>#</a></h4><p>我们下载安装的是mysql管理软件，它相当于是一个服务端，每个建立好的连接的用户都可以访问，但是这里为了让自己自主学习，所以我们会把这个软件下载安装到每个人的自己电脑上，相当于在自己电脑上安装了mysql的服务端，这个软件他也自带一个客户端，我们可以通过cmd终端的形式进行访问，当然也可以通过可视化工具navicate来访问，接下来我们会一一讲解。</p><ul><li><p>mysql管理下载</p><ul><li><p>第一步：打开网址，https://www.mysql.com，点击downloads之后跳转到https://www.mysql.com/downloads</p></li><li><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql41.png alt=41></p></li><li><p>第二步：选择Community选项</p></li><li><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql42.png alt=42></p></li><li><p>第三步：选择对应的操作系统版本</p></li><li><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql43.png alt=43></p></li><li><p>第四步：选择具体版本的mysql，建议选择5.6或者5.7版本</p></li><li><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql44.png alt=44></p></li><li><p>第五步：直接下载</p></li><li><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql45.png alt=45></p></li></ul></li></ul><h4 id=解压>解压<a hidden class=anchor aria-hidden=true href=#解压>#</a></h4><ul><li>下载的zip文件解压，将解压之后的文件夹放到任意目录下，这个目录就是mysql的安装目录。</li><li>注意:安装目录尽量在某盘的根目录下,如果不在根目录,则安装路径中<strong>不能有中文,不能有特殊转义符</strong>的出现。</li></ul><h4 id=配置环境变量>配置环境变量<a hidden class=anchor aria-hidden=true href=#配置环境变量>#</a></h4><ul><li>在系统变量PATH后面添加: 你的mysql的bin文件夹的路径（如C:\Program Files\mysql-5.6.41-winx64\bin）</li></ul><h4 id=执行初始化>执行初始化<a hidden class=anchor aria-hidden=true href=#执行初始化>#</a></h4><p>在任意路径下，以管理员的身份打开终端执行：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mysqld --initialize-insecure
</span></span></code></pre></div><p>初始化时将root用户的登录密码设置为空。</p><p>注意，如果报错：提示缺少MSVCP120.dll文件的话，后面有解决办法。</p><p>初始化成功如下图：</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql56.png alt=56></p><p>初始化成功的另一个标志是，在MySQL的安装目录中，会多个data目录，这个data目录是是MySQL在初始化过程中创建的数据目录。</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql57.png alt=57></p><h4 id=安装mysql服务>安装Mysql服务<a hidden class=anchor aria-hidden=true href=#安装mysql服务>#</a></h4><ul><li>1.以<strong>管理员身份打开</strong>cmd窗口，记住,一定要是管理员身份</li><li>2.输入如下指令：<ul><li>mysqld install<ul><li>回车运行</li></ul></li></ul></li></ul><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql58.png alt=58></p><h4 id=启动mysql服务>启动Mysql服务<a hidden class=anchor aria-hidden=true href=#启动mysql服务>#</a></h4><ul><li>现在系统的服务中就可以找到MySQL了。</li></ul><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql59.png alt=59></p><ul><li>但此时MySQL服务还没有启动，你可以在服务中点击启动，也可以在终端中使用net命令来启动/关闭MySQL服务。</li></ul><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql60.png alt=60></p><ul><li>ok，现在MySQL服务正常启动了，并且，由于系统服务中的MySQL服务设置的是自动，下次系统启动时，MySQL服务也默认启动了。</li><li>服务启动成功之后，就可以登录了<ul><li>输入mysql -u root -p（第一次登录没有密码，直接按回车过）</li><li>但登录成功之后需要设置密码:<ul><li>语法: set password = password(&lsquo;密码&rsquo;) 为了方便记忆，密码尽量简单一点，但是实际工作中为了保证数据安全，密码尽量设置的复杂一些。</li></ul></li></ul></li></ul><h4 id=可能发生问题处理>可能发生问题处理<a hidden class=anchor aria-hidden=true href=#可能发生问题处理>#</a></h4><ul><li>缺少MSVCP120.dll文件</li></ul><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql61.png alt=61></p><ul><li><p>报错原因是，系统缺少Visual C ++可再发行组件包。</p></li><li><p>解决：</p><ul><li>打开microsoft官网：https://www.microsoft.com/en-us/download/details.aspx?id=40784，点击下载:</li><li><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql62.png alt=62></li><li>根据系统位数选择下载：</li><li><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql63.png alt=63></li><li>以管理员的身份运行，然后默认安装即可。</li><li><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql64.png alt=64></li><li><strong>重新以管理员身份打开终端</strong>，重新执行初始化步骤吧！</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mysqld --initialize-insecure
</span></span></code></pre></div></li></ul><h3 id=navicate下载安装>Navicate下载安装<a hidden class=anchor aria-hidden=true href=#navicate下载安装>#</a></h3><ul><li>Navicate是一种操作数据库的可视化工具。</li><li>下载地址：https://www.navicat.com.cn/products</li><li>使用Navicate链接数据库：连接成功之后，你就可以通过该软件查看所有的数据库文件了<ul><li><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql47.png alt=47></li></ul></li></ul><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql48.png alt=47></p><h3 id=sql概述>Sql概述<a hidden class=anchor aria-hidden=true href=#sql概述>#</a></h3><ul><li><p>先来看一个例子：小王第一次使用数据库，然后跟数据库来了个隔空对话</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql49.png alt=49></p><ul><li>其实，我们想一想，mysql是一个软件，它有它自己一套的管理规则，我们想要跟它打交道，就必须遵守它的规则，如果我想获取数据，它自己有一套规则，这个规则就是SQL。</li></ul></li><li><p>什么是sql？</p><ul><li>SQL : 结构化查询语言(Structured Query Language)简称SQL，是一种特殊目的的编程言，是一种数据库查询和程序设计语言，SQL语言主要用于存取数据、查询数据、更新数据和管理关系数据库系统,SQL语言由IBM开发。</li><li>其实简单的说，就是你发送给他能识别的暗号，他懂了就会给你返回数据。</li><li>注意：<ul><li>对于关系型数据库而言，SQL语句是通用的，学会了一种，其他只是一些细微的差别，毕竟人家数据库也是一个种族，语言是通用的，只不过有些存在方言的差别。</li></ul></li></ul></li><li><p>sql的分类</p><ul><li><p>SQL语言分为3种类型：</p><p>1、DDL语句 数据库定义语言： 数据库、表、视图、索引、存储过程，例如CREATE DROP ALTER</p><p>2、DML语句 数据库操纵语言： 插入数据INSERT、删除数据DELETE、更新数据UPDATE、查询数据SELECT</p><p>3、DCL语句 数据库控制语言： 例如控制用户的访问权限GRANT、REVOKE</p></li></ul></li></ul><h3 id=库表操作ddl>库表操作DDL<a hidden class=anchor aria-hidden=true href=#库表操作ddl>#</a></h3><h4 id=库的增删改查>库的增删改查<a hidden class=anchor aria-hidden=true href=#库的增删改查>#</a></h4><p>这里的库指的数据库，也就是我们所谓的那个文件夹，一般情况下，我们在开发项目前，会先设计数据库中相关表结构，一个项目中所有表都会放在同一个文件夹下，对于库的操作属于SQL分类中的DDL，也就是数据库定义语言。</p><ul><li><p>创建数据库</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  create database 仓库名;
</span></span></code></pre></div></li><li><p>创建数据库并制定编码:utf8设置好后，就表示数据库中可以存储中文数据</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  create database 仓库名 charset utf8;
</span></span></code></pre></div></li><li><p>使用数据库</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  use 仓库名;
</span></span></code></pre></div></li><li><p>查看所有数据库和单独常看当前数据库</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  show databases;  #查看当前所有的数据仓库
</span></span><span class=line><span class=cl>  select database(); #查看当前使用的是哪一个数据仓库
</span></span><span class=line><span class=cl>  #注意：sql语句不区分大小写，但是sql中使用的标识符尽量控制大小写
</span></span></code></pre></div></li><li><p>修改数据库</p><ul><li>数据库的名称一旦创建好之后就无法修改</li><li>修改数据库一般只修改编码</li></ul></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  alter database 仓库名 charset gbk #将数据的字符集编码修改成了gbk
</span></span></code></pre></div></li><li><p>删除数据库</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  drop database 仓库名;
</span></span></code></pre></div></li></ul><h4 id=表的增删改查>表的增删改查<a hidden class=anchor aria-hidden=true href=#表的增删改查>#</a></h4><h5 id=创建表>创建表<a hidden class=anchor aria-hidden=true href=#创建表>#</a></h5><ul><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  create table 表名(
</span></span><span class=line><span class=cl>    字段名1 类型(宽度) 约束条件,
</span></span><span class=line><span class=cl>    字段名2 类型(宽度) 约束条件,
</span></span><span class=line><span class=cl>    字段名3 类型(宽度) 约束条件,
</span></span><span class=line><span class=cl>  );
</span></span><span class=line><span class=cl>  注意:
</span></span><span class=line><span class=cl>  	1.字段名不能重复
</span></span><span class=line><span class=cl>  	2.宽度和约束条件可选
</span></span><span class=line><span class=cl>  	3.字段名和类型是必须的
</span></span></code></pre></div></li></ul><h5 id=查看表结构>查看表结构<a hidden class=anchor aria-hidden=true href=#查看表结构>#</a></h5><ul><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  desc 表名；
</span></span></code></pre></div></li></ul><h5 id=数据类型>数据类型<a hidden class=anchor aria-hidden=true href=#数据类型>#</a></h5><p>**字符串：**顾名思义，就是存储的一连串的字符，例如文字</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql50.png alt=50></p><p>​</p><p><strong>数值型</strong>：常用的有：int ，double， float</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql51.png alt=51></p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql52.png alt=51></p><ul><li><p>整数型：int 基本int能够处理日常工作中大部分整数存储问题</p></li><li><p>小数型：double float</p><ul><li>强调一下float(5,2)其中5代表总长度，2代表小数长度,这个意思是整数是3位,小数是2位</li></ul></li><li><p>日常工作中float足以解决小数问题了。</p></li></ul><p><strong>日期类型</strong></p><ul><li><p>now()函数：返回当前系统时间</p></li><li><p>date：年月日</p></li><li><p>time：时分秒</p></li><li><p>datetime：年月日时分秒</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>create table t(date1 date,date2 time,date3,datetime);
</span></span><span class=line><span class=cl>insert into t(now(),now(),now());
</span></span><span class=line><span class=cl>mysql&gt; select * from t;
</span></span><span class=line><span class=cl>+------------+----------+---------------------+
</span></span><span class=line><span class=cl>| date1      | date2    | date3               |
</span></span><span class=line><span class=cl>+------------+----------+---------------------+
</span></span><span class=line><span class=cl>| 2020-04-15 | 16:02:43 | 2020-04-15 16:02:43 |
</span></span><span class=line><span class=cl>+------------+----------+---------------------+
</span></span><span class=line><span class=cl>1 row in set (0.00 sec)
</span></span></code></pre></div><p><strong>ENUM和SET类型</strong>：</p><ul><li>这里的类似于下拉字段，在进行数据插入的时候，必须选择事先设置的内容</li><li>对于set而言，可以多选，但是enum只能单选</li></ul><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql53.png alt=53></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>create</span> <span class=n>table</span> <span class=n>UserData</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=n>id</span> <span class=ne>int</span><span class=p>,</span> <span class=c1>#用户编号</span>
</span></span><span class=line><span class=cl>	<span class=n>money</span> <span class=ne>float</span><span class=p>(</span><span class=mi>9</span><span class=p>,</span><span class=mi>2</span><span class=p>),</span><span class=c1>#用户余额</span>
</span></span><span class=line><span class=cl>	<span class=n>registTime</span> <span class=n>datetime</span><span class=p>,</span><span class=c1>#用户的注册时间</span>
</span></span><span class=line><span class=cl>	<span class=n>usernmae</span> <span class=n>varchar</span><span class=p>(</span><span class=mi>50</span><span class=p>),</span>
</span></span><span class=line><span class=cl>	<span class=n>sex</span> <span class=k>enum</span><span class=p>(</span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=s1>&#39;female&#39;</span><span class=p>),</span><span class=c1>#单选</span>
</span></span><span class=line><span class=cl>	<span class=n>address</span> <span class=n>set</span><span class=p>(</span><span class=s1>&#39;BJ&#39;</span><span class=p>,</span><span class=s1>&#39;SH&#39;</span><span class=p>,</span><span class=s1>&#39;GZ&#39;</span><span class=p>)</span><span class=c1>#多选</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><h5 id=约束条件>约束条件<a hidden class=anchor aria-hidden=true href=#约束条件>#</a></h5><ul><li><p>为了防止不符合规范的数据进入数据库，在用户对数据进行插入、修改、删除等操作时，DBMS自动按照一定的约束条件对数据进行监测，使不符合规范的数据不能进入数据库，以确保数据库中存储的数据正确、有效、相容。</p></li><li><p>约束条件与数据类型的宽度一样，都是可选参数，主要分为以下几种：</p><ul><li>NOT NULL ：非空约束，指定某列不能为空；</li><li>DEFAULT:默认值</li><li>UNIQUE : 唯一约束，指定某列或者几列组合不能重复</li><li>PRIMARY KEY ：主键，指定该列的值可以唯一地标识该列记录</li><li>FOREIGN KEY ：外键，指定该行记录从属于主表中的一条记录，主要用于参照完整性</li></ul></li><li><p>not null:不为空，当你设置一个字段时，不允许它为空，可以使用此约束条件</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl>  <span class=n>create</span> <span class=n>table</span> <span class=n>t1</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>  	<span class=n>id</span> <span class=ne>int</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  	<span class=n>name</span> <span class=n>varchar</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span> <span class=ow>not</span> <span class=n>null</span><span class=c1>#name字段的值不可以为空</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span></code></pre></div></li><li><p>default 默认值</p><ul><li>例如：对于性别一列，如果大部分都是男性，可以设置成默认值，不填则取默认值，填写了则覆盖默认值</li></ul></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl>  <span class=n>create</span> <span class=n>table</span> <span class=n>t2</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>  	<span class=n>id</span> <span class=ne>int</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  	<span class=n>name</span> <span class=n>varchar</span><span class=p>(</span><span class=mi>20</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  	<span class=n>sex</span> <span class=n>char</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span> <span class=n>DEFAULT</span><span class=p>(</span><span class=s1>&#39;male&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span></code></pre></div></li><li><p>unique 唯一:当有一列字段你不想让它有重复值时，可以设置为唯一</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>create</span> <span class=n>table</span> <span class=n>t3</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=n>id</span> <span class=ne>int</span> <span class=n>unique</span><span class=p>,</span> <span class=c1>#唯一约束</span>
</span></span><span class=line><span class=cl>	<span class=n>name</span> <span class=n>varchar</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><ul><li>联合唯一：只有当你设置的这些字段同时重复时才会报错</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>create</span> <span class=n>table</span> <span class=n>t4</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=n>id</span> <span class=ne>int</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>	<span class=n>name</span> <span class=n>varchar</span><span class=p>(</span><span class=mi>20</span><span class=p>),</span>
</span></span><span class=line><span class=cl>	<span class=n>dep</span> <span class=n>char</span><span class=p>(</span><span class=mi>10</span><span class=p>),</span>
</span></span><span class=line><span class=cl>	<span class=n>UNIQUE</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=n>dep</span><span class=p>)</span> <span class=c1>#联合唯一约束</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><ul><li><p>primary key</p><ul><li><p>主键为了保证表中的每一条数据的该字段都是表格中的唯一值。换言之，它是用来独一无二地确认一个表格中的每一行数据。</p></li><li><p>主键可以包含一个字段或多个字段。当主键包含多个字段时，称为组合键 (Composite <a href="https://link.zhihu.com/?target=https%3A//www.baidu.com/s%3Fwd%3DKey%26tn%3DSE_PcZhidaonwhc_ngpagmjz%26rsv_dl%3Dgh_pc_zhidao">Key</a>),也可以叫联合主键。</p></li><li><p>单字段主键：</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl>  <span class=n>create</span> <span class=n>table</span> <span class=n>t5</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>  	<span class=n>id</span> <span class=ne>int</span> <span class=n>PRIMARY</span> <span class=n>KEY</span> <span class=p>,</span> <span class=c1>#主键约束 </span>
</span></span><span class=line><span class=cl>  	<span class=n>name</span> <span class=n>varchar</span><span class=p>(</span><span class=mi>20</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  	<span class=n>salary</span> <span class=ne>float</span><span class=p>(</span><span class=mi>6</span><span class=p>,</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span></code></pre></div></li><li><p>联合主键:</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl>  <span class=n>create</span> <span class=n>table</span> <span class=n>t6</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>  	<span class=n>id</span> <span class=ne>int</span><span class=p>,</span> <span class=c1>#主键约束 </span>
</span></span><span class=line><span class=cl>  	<span class=n>name</span> <span class=n>varchar</span><span class=p>(</span><span class=mi>20</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  	<span class=n>salary</span> <span class=ne>float</span><span class=p>(</span><span class=mi>6</span><span class=p>,</span><span class=mi>2</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  	<span class=n>PRIMARY</span> <span class=n>KEY</span><span class=p>(</span><span class=n>id</span><span class=p>,</span><span class=n>name</span><span class=p>)</span> <span class=c1>#联合主键</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span></code></pre></div></li></ul></li><li><p>auto_increment 自增字段:</p><ul><li><p>对于主键id而言，往往我们可以设置为自增字段，不用手动填写</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl>  <span class=n>create</span> <span class=n>table</span> <span class=n>t7</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>  	<span class=n>id</span> <span class=ne>int</span> <span class=n>PRIMARY</span> <span class=n>KEY</span> <span class=n>auto_increment</span><span class=p>,</span> <span class=c1>#主键约束 </span>
</span></span><span class=line><span class=cl>  	<span class=n>name</span> <span class=n>varchar</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span></code></pre></div></li></ul></li><li><p>foreign key</p><ul><li><p>思考：</p><ul><li><p>假设我们要描述所有公司的员工，需要描述的属性有这些 ： 姓名,年龄，性别，部门，部门描述</p></li><li><p>公司有3个部门，但是有1个亿的员工，那意味着部门和部门描述这两个字段需要重复存储，部门名字和部门描述内容越长，越浪费内存，如何处理呢？</p><ul><li><p>解决方法： 我们完全可以定义一个部门表然后让员工信息表关联该表，如何关联，即foreign key</p></li><li><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql54.png alt=54></p><ul><li>foreign key(当前表中建立关系的外键字段) references 被关联表名(id)</li></ul></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl>  <span class=c1>#创建两张表：</span>
</span></span><span class=line><span class=cl>  <span class=c1>#被关联表：dep：</span>
</span></span><span class=line><span class=cl>  <span class=n>create</span> <span class=n>table</span> <span class=n>dep</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=n>id</span> <span class=ne>int</span> <span class=n>primary</span> <span class=n>key</span> <span class=n>auto_increment</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=n>dep_name</span> <span class=n>varchar</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=n>dep_desc</span> <span class=n>varchar</span><span class=p>(</span><span class=mi>255</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>#关联表：emp:	</span>
</span></span><span class=line><span class=cl>  <span class=n>create</span> <span class=n>table</span> <span class=n>emp</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=n>id</span> <span class=ne>int</span> <span class=n>primary</span> <span class=n>key</span> <span class=n>auto_increment</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=n>name</span> <span class=n>varchar</span><span class=p>(</span><span class=mi>6</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=n>age</span> <span class=ne>int</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=n>gender</span> <span class=k>enum</span><span class=p>(</span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=s1>&#39;female&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=n>dep_id</span> <span class=ne>int</span> <span class=ow>not</span> <span class=n>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=n>foreign</span> <span class=n>key</span><span class=p>(</span><span class=n>dep_id</span><span class=p>)</span> <span class=n>references</span> <span class=n>dep</span><span class=p>(</span><span class=n>id</span><span class=p>));</span>
</span></span></code></pre></div></li></ul></li></ul></li><li><p>级联删除，级联更新</p><ul><li><p>两张表建立关联之后，如果部门表某个部门的砍掉了，那对应的人员表中的那些部门的人员相应的该怎么处理呢？可以保存，也可以随之一起删除.</p><ul><li><p>如果要保证两表一致，则需要在设置外键时添加on delete cascade</p></li><li><p>如果部门id更新了，要一起更新的话，则添加on update cascade</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl>  <span class=c1>#被关联表：dep：</span>
</span></span><span class=line><span class=cl>  <span class=n>create</span> <span class=n>table</span> <span class=n>dep</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=n>id</span> <span class=ne>int</span> <span class=n>primary</span> <span class=n>key</span> <span class=n>auto_increment</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=n>dep_name</span> <span class=n>varchar</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=n>dep_desc</span> <span class=n>varchar</span><span class=p>(</span><span class=mi>255</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>#关联表：emp:	</span>
</span></span><span class=line><span class=cl>  <span class=n>create</span> <span class=n>table</span> <span class=n>emp</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=n>id</span> <span class=ne>int</span> <span class=n>primary</span> <span class=n>key</span> <span class=n>auto_increment</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=n>name</span> <span class=n>varchar</span><span class=p>(</span><span class=mi>6</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=n>age</span> <span class=ne>int</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=n>gender</span> <span class=k>enum</span><span class=p>(</span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=s1>&#39;female&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=n>dep_id</span> <span class=ne>int</span> <span class=ow>not</span> <span class=n>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=n>foreign</span> <span class=n>key</span><span class=p>(</span><span class=n>dep_id</span><span class=p>)</span> <span class=n>references</span> <span class=n>dep</span><span class=p>(</span><span class=n>id</span><span class=p>)</span> <span class=n>on</span> <span class=n>delete</span> <span class=n>cascade</span> <span class=n>on</span> <span class=n>update</span> <span class=n>cascade</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span></code></pre></div></li></ul></li></ul></li></ul></li></ul><h5 id=修改表>修改表<a hidden class=anchor aria-hidden=true href=#修改表>#</a></h5><ul><li><p>修改表名</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  alter table 旧表名 rename 新表名
</span></span></code></pre></div></li><li><p>修改表字段的数据类型</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  alter table 表名 modify 字段 新数据类型
</span></span></code></pre></div></li><li><p>修改表字段名</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  alter table 表名 change 旧字段名 新字段名 新数据类型 
</span></span></code></pre></div></li><li><p>新增字段</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  alter table 表名 add 新增字段名 数据类型 约束条件#约束条件可选
</span></span></code></pre></div></li><li><p>删除字段</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  alter table 表名 drop 字段名
</span></span></code></pre></div></li><li><p>查看所有的表</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  show tables
</span></span></code></pre></div></li></ul><h5 id=删除表>删除表<a hidden class=anchor aria-hidden=true href=#删除表>#</a></h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>drop table 表名
</span></span></code></pre></div><h3 id=记录操作dml>记录操作DML<a hidden class=anchor aria-hidden=true href=#记录操作dml>#</a></h3><h4 id=插入数据>插入数据<a hidden class=anchor aria-hidden=true href=#插入数据>#</a></h4><ul><li><p>插入完整的数据</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl>  <span class=n>insert</span> <span class=n>into</span> <span class=err>表名</span> <span class=p>(</span><span class=err>字段</span><span class=mi>1</span><span class=err>，字段</span><span class=mi>2</span><span class=p>)</span> <span class=n>values</span> <span class=p>(</span><span class=s1>&#39;字段1的值&#39;</span><span class=p>,</span><span class=s1>&#39;字段2的值&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>create</span> <span class=n>table</span> <span class=n>new_dep</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  	<span class=n>id</span> <span class=ne>int</span> <span class=n>PRIMARY</span> <span class=n>KEY</span> <span class=n>auto_increment</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  	<span class=n>dep_name</span> <span class=n>varchar</span><span class=p>(</span><span class=mi>10</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  	<span class=n>dep_desc</span> <span class=n>varchar</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span></code></pre></div><ul><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>给指定字段插入数据</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>new_dep</span><span class=w> </span><span class=p>(</span><span class=n>dep_name</span><span class=p>,</span><span class=n>dep_desc</span><span class=p>)</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>values</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;yanfabu&#39;</span><span class=p>,</span><span class=s1>&#39;ssss&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>new_dep</span><span class=w> </span><span class=p>(</span><span class=n>dep_name</span><span class=p>,</span><span class=n>dep_desc</span><span class=p>)</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>values</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;销售部&#39;</span><span class=p>,</span><span class=s1>&#39;ssss&#39;</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div></li></ul></li><li><p>插入多条数据</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  insert into 表名 values (&#39;xx1&#39;,&#39;xx2&#39;),(xx1,xx2) #插入几条数据就写几个括号
</span></span></code></pre></div></li></ul><h4 id=更新数据>更新数据<a hidden class=anchor aria-hidden=true href=#更新数据>#</a></h4><ul><li><p>单独更新一个字段</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  update 表名 set 字段名 = 字段值 where 条件
</span></span></code></pre></div></li><li><p>更新多个字段</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  update 表名 set 字段1 = 字段值1,字段2 = 字段值2 where 条件
</span></span></code></pre></div></li></ul><h4 id=删除数据>删除数据<a hidden class=anchor aria-hidden=true href=#删除数据>#</a></h4><ul><li><p>删除指定数据数据</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  delete from 表名 where 条件
</span></span></code></pre></div></li><li><p>删除表中所有数据</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  #不加where条件就是清空表,一定要慎重使用delete
</span></span><span class=line><span class=cl>  # 如果有自增id，新增的数据，仍然是以删除前的最后一样作为起始。
</span></span><span class=line><span class=cl>  delete from 表名
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  # 数据量大，删除速度比上一条快，且直接从零开始
</span></span><span class=line><span class=cl>  truncate table t1;
</span></span></code></pre></div></li></ul><h4 id=查询数据>查询数据<a hidden class=anchor aria-hidden=true href=#查询数据>#</a></h4><h5 id=单表查询>单表查询<a hidden class=anchor aria-hidden=true href=#单表查询>#</a></h5><ul><li><p>准备数据</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>创建员工表，字段为：</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=n>id自增</span><span class=err>，员工名不能为空，性别只可以为</span><span class=n>male或者female且不能为空</span><span class=err>，默认值为</span><span class=n>male</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=n>age不能为空</span><span class=err>，默认值</span><span class=mi>28</span><span class=err>，入职日期只显示年月日，职位名称，工资保留两位小数，办公室门牌号，部门</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=n>id</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=n>auto_increment</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=n>name</span><span class=w> </span><span class=nb>char</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=n>gender</span><span class=w> </span><span class=n>enum</span><span class=p>(</span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=s1>&#39;female&#39;</span><span class=p>)</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=n>age</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=mi>28</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=n>hire_date</span><span class=w> </span><span class=nb>date</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=n>job_title</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>30</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=n>salary</span><span class=w> </span><span class=nb>float</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=mi>2</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=n>office_num</span><span class=w> </span><span class=nb>int</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=n>dep_id</span><span class=w> </span><span class=nb>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=err>数据</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=n>gender</span><span class=p>,</span><span class=n>age</span><span class=p>,</span><span class=n>hire_date</span><span class=p>,</span><span class=n>job_title</span><span class=p>,</span><span class=n>salary</span><span class=p>,</span><span class=n>office_num</span><span class=p>,</span><span class=n>dep_id</span><span class=p>)</span><span class=k>values</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;weiwei&#39;</span><span class=p>,</span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=mi>78</span><span class=p>,</span><span class=s1>&#39;20150302&#39;</span><span class=p>,</span><span class=s1>&#39;teacher&#39;</span><span class=p>,</span><span class=mi>1000000</span><span class=p>.</span><span class=mi>31</span><span class=p>,</span><span class=mi>401</span><span class=p>,</span><span class=mi>1</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;lala&#39;</span><span class=p>,</span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=mi>81</span><span class=p>,</span><span class=s1>&#39;20130305&#39;</span><span class=p>,</span><span class=s1>&#39;teacher&#39;</span><span class=p>,</span><span class=mi>8300</span><span class=p>,</span><span class=mi>401</span><span class=p>,</span><span class=mi>1</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;zhangsan&#39;</span><span class=p>,</span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=mi>73</span><span class=p>,</span><span class=s1>&#39;20140701&#39;</span><span class=p>,</span><span class=s1>&#39;teacher&#39;</span><span class=p>,</span><span class=mi>3500</span><span class=p>,</span><span class=mi>401</span><span class=p>,</span><span class=mi>1</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;liulaogen&#39;</span><span class=p>,</span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=mi>28</span><span class=p>,</span><span class=s1>&#39;20121101&#39;</span><span class=p>,</span><span class=s1>&#39;teacher&#39;</span><span class=p>,</span><span class=mi>2100</span><span class=p>,</span><span class=mi>401</span><span class=p>,</span><span class=mi>1</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;aal&#39;</span><span class=p>,</span><span class=s1>&#39;female&#39;</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=s1>&#39;20110211&#39;</span><span class=p>,</span><span class=s1>&#39;teacher&#39;</span><span class=p>,</span><span class=mi>9000</span><span class=p>,</span><span class=mi>401</span><span class=p>,</span><span class=mi>1</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;zhugelang&#39;</span><span class=p>,</span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=s1>&#39;19000301&#39;</span><span class=p>,</span><span class=s1>&#39;teacher&#39;</span><span class=p>,</span><span class=mi>30000</span><span class=p>,</span><span class=mi>401</span><span class=p>,</span><span class=mi>1</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;成龙&#39;</span><span class=p>,</span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=mi>48</span><span class=p>,</span><span class=s1>&#39;20101111&#39;</span><span class=p>,</span><span class=s1>&#39;teacher&#39;</span><span class=p>,</span><span class=mi>10000</span><span class=p>,</span><span class=mi>401</span><span class=p>,</span><span class=mi>1</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;歪歪&#39;</span><span class=p>,</span><span class=s1>&#39;female&#39;</span><span class=p>,</span><span class=mi>48</span><span class=p>,</span><span class=s1>&#39;20150311&#39;</span><span class=p>,</span><span class=s1>&#39;sale&#39;</span><span class=p>,</span><span class=mi>3000</span><span class=p>.</span><span class=mi>13</span><span class=p>,</span><span class=mi>402</span><span class=p>,</span><span class=mi>2</span><span class=p>),</span><span class=o>#</span><span class=err>以下是销售部门</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;丫丫&#39;</span><span class=p>,</span><span class=s1>&#39;female&#39;</span><span class=p>,</span><span class=mi>38</span><span class=p>,</span><span class=s1>&#39;20101101&#39;</span><span class=p>,</span><span class=s1>&#39;sale&#39;</span><span class=p>,</span><span class=mi>2000</span><span class=p>.</span><span class=mi>35</span><span class=p>,</span><span class=mi>402</span><span class=p>,</span><span class=mi>2</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;丁丁&#39;</span><span class=p>,</span><span class=s1>&#39;female&#39;</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=s1>&#39;20110312&#39;</span><span class=p>,</span><span class=s1>&#39;sale&#39;</span><span class=p>,</span><span class=mi>1000</span><span class=p>.</span><span class=mi>37</span><span class=p>,</span><span class=mi>402</span><span class=p>,</span><span class=mi>2</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;星星&#39;</span><span class=p>,</span><span class=s1>&#39;female&#39;</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=s1>&#39;20160513&#39;</span><span class=p>,</span><span class=s1>&#39;sale&#39;</span><span class=p>,</span><span class=mi>3000</span><span class=p>.</span><span class=mi>29</span><span class=p>,</span><span class=mi>402</span><span class=p>,</span><span class=mi>2</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;格格&#39;</span><span class=p>,</span><span class=s1>&#39;female&#39;</span><span class=p>,</span><span class=mi>28</span><span class=p>,</span><span class=s1>&#39;20170127&#39;</span><span class=p>,</span><span class=s1>&#39;sale&#39;</span><span class=p>,</span><span class=mi>4000</span><span class=p>.</span><span class=mi>33</span><span class=p>,</span><span class=mi>402</span><span class=p>,</span><span class=mi>2</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;张野&#39;</span><span class=p>,</span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=mi>28</span><span class=p>,</span><span class=s1>&#39;20160311&#39;</span><span class=p>,</span><span class=s1>&#39;operation&#39;</span><span class=p>,</span><span class=mi>10000</span><span class=p>.</span><span class=mi>13</span><span class=p>,</span><span class=mi>403</span><span class=p>,</span><span class=mi>3</span><span class=p>),</span><span class=w> </span><span class=o>#</span><span class=err>以下是运营部门</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;程咬金&#39;</span><span class=p>,</span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=s1>&#39;19970312&#39;</span><span class=p>,</span><span class=s1>&#39;operation&#39;</span><span class=p>,</span><span class=mi>20000</span><span class=p>,</span><span class=mi>403</span><span class=p>,</span><span class=mi>3</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;程咬银&#39;</span><span class=p>,</span><span class=s1>&#39;female&#39;</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=s1>&#39;20130311&#39;</span><span class=p>,</span><span class=s1>&#39;operation&#39;</span><span class=p>,</span><span class=mi>19000</span><span class=p>,</span><span class=mi>403</span><span class=p>,</span><span class=mi>3</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;程咬铜&#39;</span><span class=p>,</span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=s1>&#39;20150411&#39;</span><span class=p>,</span><span class=s1>&#39;operation&#39;</span><span class=p>,</span><span class=mi>18000</span><span class=p>,</span><span class=mi>403</span><span class=p>,</span><span class=mi>3</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;程咬铁&#39;</span><span class=p>,</span><span class=s1>&#39;female&#39;</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=s1>&#39;20140512&#39;</span><span class=p>,</span><span class=s1>&#39;operation&#39;</span><span class=p>,</span><span class=mi>17000</span><span class=p>,</span><span class=mi>403</span><span class=p>,</span><span class=mi>3</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div></li><li><p>查询所有字段信息</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  select * from 表名; #星华表示的是通配符，表示所有的字段
</span></span></code></pre></div></li><li><p>查询指定字段信息</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=err>字段</span><span class=mi>1</span><span class=err>，字段</span><span class=mi>2</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=err>表名</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=n>salary</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=o>#</span><span class=err>查看所有员工的姓名和薪资的信息</span><span class=w>
</span></span></span></code></pre></div></li><li><p>通过四则运算查询</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>查看员工的姓名和其年薪</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=n>salary</span><span class=o>*</span><span class=mi>12</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=n>as可以给列起一个别名</span><span class=err>，</span><span class=n>as关键字可以省略</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=n>salary</span><span class=o>*</span><span class=mi>12</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>year_salary</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w>
</span></span></span></code></pre></div></li><li><p>为库表重命名</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=o>#</span><span class=n>e就是emp的别名</span><span class=w>
</span></span></span></code></pre></div></li><li><p>条件查询where语句</p><ul><li><p>单条件查询</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>查询销售员工的姓名和薪资</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=n>salary</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>job_title</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;sale&#39;</span><span class=w>
</span></span></span></code></pre></div></li><li><p>多条件查询1：结合and</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>查询薪资大于</span><span class=mi>1</span><span class=n>w的老师对应的名字和薪资</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=n>salary</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>job_title</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;teacher&#39;</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>10000</span><span class=w> 
</span></span></span></code></pre></div></li><li><p>多条件查询2：结合or</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>查询薪资为</span><span class=mi>3</span><span class=err>，</span><span class=mi>3</span><span class=p>.</span><span class=mi>5</span><span class=err>，</span><span class=mi>4</span><span class=err>，</span><span class=mi>9</span><span class=n>k的员工名字和具体薪资</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=n>salary</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>3000</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>3500</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>4000</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>9000</span><span class=w>
</span></span></span></code></pre></div></li><li><p>多条件查询3：结合between&mldr;and</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>查询薪资范围在</span><span class=mi>1000</span><span class=o>-</span><span class=mi>5000</span><span class=err>之间的员工名字和具体信息</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=n>salary</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=k>between</span><span class=w> </span><span class=mi>1000</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=mi>5000</span><span class=w>
</span></span></span></code></pre></div></li><li><p>多条件查询4:结合in</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>查询薪资为</span><span class=mi>3</span><span class=err>，</span><span class=mi>3</span><span class=p>.</span><span class=mi>5</span><span class=err>，</span><span class=mi>4</span><span class=err>，</span><span class=mi>9</span><span class=n>k的员工名字和具体薪资</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=n>salary</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=mi>3000</span><span class=p>,</span><span class=mi>3500</span><span class=p>,</span><span class=mi>4000</span><span class=p>,</span><span class=mi>9000</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div></li><li><p>多条件查询5:结合not in</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=n>salary</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=mi>3000</span><span class=p>,</span><span class=mi>3500</span><span class=p>,</span><span class=mi>4000</span><span class=p>,</span><span class=mi>9000</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div></li><li><p>模糊查询like</p><ul><li><p>通配符%:表示多个字符</p><ul><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=k>like</span><span class=w> </span><span class=s1>&#39;a%&#39;</span><span class=w>
</span></span></span></code></pre></div></li></ul></li><li><p>通配符_:表示一个字符</p><ul><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=k>like</span><span class=w> </span><span class=s1>&#39;zhang___&#39;</span><span class=w>
</span></span></span></code></pre></div></li></ul></li></ul></li></ul></li><li><p>分组查询：group by</p><ul><li><p>简单的分组查询</p><ul><li>注意：使用group by的查询字段必须是分组字段(或者是其他字段的聚合形式)，否则会出错，想要获取其他字段信息,可以借助于聚合函数</li></ul></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>job_title</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>job_title</span><span class=w>
</span></span></span></code></pre></div></li><li><p>分组聚合</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>查看每一个岗位的人数</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=k>count</span><span class=p>()</span><span class=err>使用来做计数操作</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>job_title</span><span class=p>,</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>job_title</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>计算男女员工的平均年龄</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>gender</span><span class=p>,</span><span class=k>avg</span><span class=p>(</span><span class=n>age</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>gender</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>计算不同岗位员工的平均薪资</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>job_title</span><span class=p>,</span><span class=k>avg</span><span class=p>(</span><span class=n>salary</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>job_title</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>查看男女员工的最大</span><span class=p>,</span><span class=err>最小年级和整体年龄</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>gender</span><span class=p>,</span><span class=k>max</span><span class=p>(</span><span class=n>age</span><span class=p>),</span><span class=k>min</span><span class=p>(</span><span class=n>age</span><span class=p>),</span><span class=k>sum</span><span class=p>(</span><span class=n>age</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>gender</span><span class=w>
</span></span></span></code></pre></div></li><li><p>having子句</p><ul><li><p>where 与 having的区别：</p><ul><li>where 是针对分组之前的字段内容进行过滤,而having是针对分组后的</li></ul></li><li><p>注意：having后面的条件字段只可以是分组后结果中存在的字段名，否则会报错！</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>查看销售岗位的平均薪资</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>job_title</span><span class=p>,</span><span class=k>avg</span><span class=p>(</span><span class=n>salary</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>job_title</span><span class=w> </span><span class=k>having</span><span class=w> </span><span class=n>job_title</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;sale&#39;</span><span class=w>
</span></span></span></code></pre></div></li></ul></li></ul></li><li><p>排序：order by</p><ul><li><p>升序： order by 字段 asc(默认升序,可以不写)</p></li><li><p>降序： order by 字段 desc</p></li><li><p>单列排序：</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>salary</span><span class=w>
</span></span></span></code></pre></div></li><li><p>多列排序：越前面的列优先级越高</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=k>desc</span><span class=w>
</span></span></span></code></pre></div></li></ul></li><li><p>limit</p><ul><li><p>显示前三条数据</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>limit</span><span class=w> </span><span class=mi>3</span><span class=w>
</span></span></span></code></pre></div></li><li><p>从0开始,先查出第一条,然后包含这条再往后查5条</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>limit</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=mi>5</span><span class=w>
</span></span></span></code></pre></div></li><li><p>从第3开始,即先查出第4条,然后包含这条再往后查7条</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>limit</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=mi>7</span><span class=w>
</span></span></span></code></pre></div></li></ul></li><li><p>使用正则：regexp</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=w> </span><span class=o>^</span><span class=w> </span><span class=err>以什么开头</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=n>name</span><span class=p>,</span><span class=n>job_title</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=n>regexp</span><span class=w> </span><span class=s2>&#34;^a&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=w> </span><span class=err>$</span><span class=w> </span><span class=err>以什么结尾</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=n>name</span><span class=p>,</span><span class=n>job_title</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=n>regexp</span><span class=w> </span><span class=s2>&#34;san$&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=w> </span><span class=err>匹配指定字符内容</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=n>name</span><span class=p>,</span><span class=n>job_title</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=n>regexp</span><span class=w> </span><span class=s2>&#34;i{1}&#34;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div></li></ul><h5 id=多表查询>多表查询<a hidden class=anchor aria-hidden=true href=#多表查询>#</a></h5><p>根据指定条件将两张表中的数据进行合并，然后在合并后的结果表中进行数据的查询</p><ul><li><p>准备数据</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>dep</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=n>id</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=n>name</span><span class=w> </span><span class=nb>char</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>emp</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=n>id</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=w> </span><span class=n>auto_increment</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=n>name</span><span class=w> </span><span class=nb>char</span><span class=p>(</span><span class=mi>20</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=n>sex</span><span class=w> </span><span class=n>enum</span><span class=p>(</span><span class=s2>&#34;male&#34;</span><span class=p>,</span><span class=s2>&#34;female&#34;</span><span class=p>)</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=s2>&#34;male&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=n>age</span><span class=w> </span><span class=nb>int</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=n>dep_id</span><span class=w> </span><span class=nb>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=w> </span><span class=err>插入数据</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>dep</span><span class=w> </span><span class=k>values</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>200</span><span class=p>,</span><span class=s1>&#39;技术&#39;</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>201</span><span class=p>,</span><span class=s1>&#39;人力资源&#39;</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>202</span><span class=p>,</span><span class=s1>&#39;销售&#39;</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>203</span><span class=p>,</span><span class=s1>&#39;运营&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>emp</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=n>sex</span><span class=p>,</span><span class=n>age</span><span class=p>,</span><span class=n>dep_id</span><span class=p>)</span><span class=w> </span><span class=k>values</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;ailsa&#39;</span><span class=p>,</span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=mi>200</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;lala&#39;</span><span class=p>,</span><span class=s1>&#39;female&#39;</span><span class=p>,</span><span class=mi>48</span><span class=p>,</span><span class=mi>201</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;huahua&#39;</span><span class=p>,</span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=mi>38</span><span class=p>,</span><span class=mi>201</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;zhangsan&#39;</span><span class=p>,</span><span class=s1>&#39;female&#39;</span><span class=p>,</span><span class=mi>28</span><span class=p>,</span><span class=mi>202</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;zhaosi&#39;</span><span class=p>,</span><span class=s1>&#39;male&#39;</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=mi>200</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;shenteng&#39;</span><span class=p>,</span><span class=s1>&#39;female&#39;</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=mi>204</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div></li><li><p>内连接:</p><ul><li>两张表公共的部分,必须同时有,没有就不显示</li></ul></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  #语法；select * from 表1 inner join 表2 on 合并条件
</span></span><span class=line><span class=cl>  select * from emp inner join dep on emp.dep_id = dep.id
</span></span></code></pre></div></li><li><p>外连接之左连接</p><ul><li>外连接之左连接<ul><li>以左表为主表,根据左表数据匹配右表,左表数据是全的,而右表若匹配不上则为null</li></ul></li></ul></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  select * from emp left join dep on emp.dep_id = dep.id
</span></span></code></pre></div></li><li><p>外连接之右连接</p><ul><li>以右表为主表,根据右表数据匹配左表,右表数据是全的,而左表若匹配不上则为null</li></ul></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  select * from emp right join dep on emp.dep_id = dep.id
</span></span></code></pre></div></li><li><p>符合条件的多表联查</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>示例</span><span class=mi>1</span><span class=err>：以内连接的方式查询</span><span class=n>emp和dep表</span><span class=err>，并且</span><span class=n>emp表中的age字段值必须大于25</span><span class=p>,</span><span class=err>即找出年龄大于</span><span class=mi>25</span><span class=err>岁的员工以及员工所在的部门</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>inner</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>dep</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>emp</span><span class=p>.</span><span class=n>dep_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dep</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>age</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>25</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>给表通过</span><span class=n>as起别名</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>d</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=n>e</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=k>inner</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>dep</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>dep_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>d</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>age</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>25</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>示例</span><span class=mi>2</span><span class=err>：以内连接的方式查询</span><span class=n>emp和dep表</span><span class=err>，并且</span><span class=n>emp表中的age字段值必须大于25</span><span class=err>，并且以</span><span class=n>age字段的升序方式显示</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=k>inner</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>dep</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>d</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>dep_id</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>age</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>25</span><span class=w> </span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>age</span><span class=w>
</span></span></span></code></pre></div></li><li><p>子查询:子查询是将一个查询语句嵌套在另一个查询语句中</p><ul><li><p>带in关键字的子查询</p><ul><li>查询平均年龄在25岁以上的部门名</li></ul></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>dep</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=mi>200</span><span class=p>,</span><span class=mi>201</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>下述</span><span class=n>sql返回的就是201和202</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>dep_id</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>dep_id</span><span class=w> </span><span class=k>having</span><span class=w> </span><span class=k>avg</span><span class=p>(</span><span class=n>age</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>25</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>整合后的子查询语句</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>dep</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=k>in</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=k>select</span><span class=w> </span><span class=n>dep_id</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>dep_id</span><span class=w> </span><span class=k>having</span><span class=w> </span><span class=k>avg</span><span class=p>(</span><span class=n>age</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>25</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><ul><li>查看技术部员工姓名</li></ul></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>dep_id</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=mi>200</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>获取部门编号</span><span class=mi>200</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>dep</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;技术&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>子查询</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>dep_id</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=k>select</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>dep</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;技术&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div></li><li><p>带比较运算符的子查询(比较运算符: =、!=、>、>=、&lt;、&lt;=、&lt;>)</p><ul><li><p>查询大于所有人平均年龄的员工名字与年龄</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=n>name</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>age</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>xx</span><span class=w> </span><span class=o>#</span><span class=n>xx就是所有员工的平均年龄</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>如何获取所有员工的平均年龄</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=k>avg</span><span class=p>(</span><span class=n>age</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=err>整合后的子查询</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=n>name</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>age</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=k>avg</span><span class=p>(</span><span class=n>age</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div></li></ul></li></ul></li></ul><h4 id=综合练习>综合练习<a hidden class=anchor aria-hidden=true href=#综合练习>#</a></h4><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/mysql65.png alt=65></p><ul><li><p>准备数据</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>class</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>cid</span><span class=w> </span><span class=nb>int</span><span class=p>(</span><span class=mi>11</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=n>AUTO_INCREMENT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>caption</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>32</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>cid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>)</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=k>class</span><span class=w> </span><span class=k>VALUES</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;三年二班&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;三年三班&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;一年二班&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;二年九班&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>teacher</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>tid</span><span class=w> </span><span class=nb>int</span><span class=p>(</span><span class=mi>11</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=n>AUTO_INCREMENT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>tname</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>32</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>tid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>)</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>teacher</span><span class=w> </span><span class=k>VALUES</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;张磊老师&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;李平老师&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;刘海燕老师&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;朱云海老师&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;李杰老师&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>course</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>cid</span><span class=w> </span><span class=nb>int</span><span class=p>(</span><span class=mi>11</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=n>AUTO_INCREMENT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>cname</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>32</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>teacher_id</span><span class=w> </span><span class=nb>int</span><span class=p>(</span><span class=mi>11</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>cid</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>teacher_id</span><span class=p>)</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>teacher</span><span class=w> </span><span class=p>(</span><span class=n>tid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>)</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>VALUES</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;生物&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;物理&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;体育&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;美术&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>student</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>sid</span><span class=w> </span><span class=nb>int</span><span class=p>(</span><span class=mi>11</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=n>AUTO_INCREMENT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>gender</span><span class=w> </span><span class=nb>char</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>class_id</span><span class=w> </span><span class=nb>int</span><span class=p>(</span><span class=mi>11</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>sname</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>32</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>sid</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>class_id</span><span class=p>)</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=k>class</span><span class=w> </span><span class=p>(</span><span class=n>cid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>)</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=k>VALUES</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;男&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;理解&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;女&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;钢蛋&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;男&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;张三&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;男&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;张一&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;女&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;张二&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;男&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;张四&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;女&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;铁锤&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;男&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;李三&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>9</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;男&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;李一&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;女&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;李二&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>11</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;男&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;李四&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>12</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;女&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;如花&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>13</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;男&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;刘三&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>14</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;男&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;刘一&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>15</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;女&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;刘二&#39;</span><span class=p>),</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>16</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;男&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;刘四&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>sid</span><span class=w> </span><span class=nb>int</span><span class=p>(</span><span class=mi>11</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=n>AUTO_INCREMENT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>student_id</span><span class=w> </span><span class=nb>int</span><span class=p>(</span><span class=mi>11</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>course_id</span><span class=w> </span><span class=nb>int</span><span class=p>(</span><span class=mi>11</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>num</span><span class=w> </span><span class=nb>int</span><span class=p>(</span><span class=mi>11</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>sid</span><span class=p>),</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>course_id</span><span class=p>)</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=p>(</span><span class=n>cid</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>student_id</span><span class=p>)</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>student</span><span class=p>(</span><span class=n>sid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>)</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=k>VALUES</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>9</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>66</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>8</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>68</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>9</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>99</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>77</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>11</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>66</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>12</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>87</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>13</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>99</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>14</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>79</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>15</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>11</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>16</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>67</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>17</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>100</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>18</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>79</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>19</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>11</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>67</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>21</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>100</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>22</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>9</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>23</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>100</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>24</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>67</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>25</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>100</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>26</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>9</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>27</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>100</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>28</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>67</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>29</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>88</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>30</span><span class=p>,</span><span class=w> </span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>9</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>31</span><span class=p>,</span><span class=w> </span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>100</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>32</span><span class=p>,</span><span class=w> </span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>67</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>33</span><span class=p>,</span><span class=w> </span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>88</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>34</span><span class=p>,</span><span class=w> </span><span class=mi>9</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>91</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>35</span><span class=p>,</span><span class=w> </span><span class=mi>9</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>88</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>36</span><span class=p>,</span><span class=w> </span><span class=mi>9</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>67</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>37</span><span class=p>,</span><span class=w> </span><span class=mi>9</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>22</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>38</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>90</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>39</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>77</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>40</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>43</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>41</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>87</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>42</span><span class=p>,</span><span class=w> </span><span class=mi>11</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>90</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>43</span><span class=p>,</span><span class=w> </span><span class=mi>11</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>77</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>44</span><span class=p>,</span><span class=w> </span><span class=mi>11</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>43</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>45</span><span class=p>,</span><span class=w> </span><span class=mi>11</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>87</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>46</span><span class=p>,</span><span class=w> </span><span class=mi>12</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>90</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>47</span><span class=p>,</span><span class=w> </span><span class=mi>12</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>77</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>48</span><span class=p>,</span><span class=w> </span><span class=mi>12</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>43</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>49</span><span class=p>,</span><span class=w> </span><span class=mi>12</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>87</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=mi>52</span><span class=p>,</span><span class=w> </span><span class=mi>13</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>87</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div></li><li><p>题目</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  1、查询所有的课程的名称以及对应的任课老师姓名
</span></span><span class=line><span class=cl>  select c.cname,t.tname from course as c inner join teacher as t ON
</span></span><span class=line><span class=cl>  	c.teacher_id = t.tid
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  2、查询学生表中男女生各有多少人
</span></span><span class=line><span class=cl>  select gender,count(sid) from student GROUP BY gender 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  3、查询物理成绩等于100的学生的姓名
</span></span><span class=line><span class=cl>  select t.sname,c.cname,s.num from student as t inner join score as s ON t.sid = s.student_id inner join course as c ON c.cid = s.course_id where c.cname = &#39;物理&#39; and s.num = 100
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  4、查询平均成绩大于八十分的同学的姓名和平均成绩
</span></span><span class=line><span class=cl>  #查询平均成绩大于八十分的同学的姓名和平均成绩
</span></span><span class=line><span class=cl>  #涉及到的字段：成绩，学生名字
</span></span><span class=line><span class=cl>  #注意：分组条件为一张表的主键ID，则查询字段可以是该表中的任意字段
</span></span><span class=line><span class=cl>  select t.sid,avg(num),t.sname from student as t inner join score as s on s.student_id = t.sid
</span></span><span class=line><span class=cl>  GROUP BY t.sid having avg(s.num) &gt; 80
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  5、查询所有学生的学号，姓名，选课数，总成绩
</span></span><span class=line><span class=cl>  select t.sname,count(course_id) as 科目数,sum(s.num) as 总成绩 from student as t inner join score as s on t.sid = s.student_id
</span></span><span class=line><span class=cl>  GROUP BY t.sid 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  6、 查询姓李老师的个数
</span></span><span class=line><span class=cl>  select count(tid) from teacher where tname like &#39;李%&#39;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  7、 查询没有报李平老师课的学生姓名
</span></span><span class=line><span class=cl>  #查询没有报李平老师课的学生姓名
</span></span><span class=line><span class=cl>  #select sname from student where sname not in (报李平老师学生的名字)
</span></span><span class=line><span class=cl>  #报李平老师学生的名字
</span></span><span class=line><span class=cl>  #select t1.sname from student as t1 inner join score as s on t1.sid = s.student_id inner join course as c on c.cid = s.course_id inner join teacher as t ON t.tid = c.teacher_id  where t.tname = &#39;李平老师&#39;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  #整合的完成操作
</span></span><span class=line><span class=cl>  select sname from student where sname not in (select t1.sname from student as t1 inner join score as s on t1.sid = s.student_id
</span></span><span class=line><span class=cl>  inner join course as c on c.cid = s.course_id inner join teacher as t ON
</span></span><span class=line><span class=cl>  t.tid = c.teacher_id  where t.tname = &#39;李平老师&#39;)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  8、 查询物理课程比生物课程高的学生的学号
</span></span><span class=line><span class=cl>  #1.求出每个学生的物理分数
</span></span><span class=line><span class=cl>  select s.student_id,s.num from score as s inner join course as c on s.course_id = c.cid
</span></span><span class=line><span class=cl>  where c.cname = &#39;物理&#39;
</span></span><span class=line><span class=cl>  #2.求出每个学生的生物分数
</span></span><span class=line><span class=cl>  select s.student_id,s.num from score as s inner join course as c on s.course_id = c.cid
</span></span><span class=line><span class=cl>  where c.cname = &#39;生物&#39;
</span></span><span class=line><span class=cl>  #假设t1就是上面物理对应的表，t2就是上面生物对应的表
</span></span><span class=line><span class=cl>  select * from t1 inner join t2 on t1.student_id = t2.student_id 
</span></span><span class=line><span class=cl>  where t1.num &gt; t2.num
</span></span><span class=line><span class=cl>  #最终的整合
</span></span><span class=line><span class=cl>  select t2.student_id from (select s.student_id,s.num from score as s inner join course as c on s.course_id = c.cid
</span></span><span class=line><span class=cl>  where c.cname = &#39;物理&#39;) as t1 inner join (select s.student_id,s.num from score as s inner join course as c on s.course_id = c.cid
</span></span><span class=line><span class=cl>  where c.cname = &#39;生物&#39;) as t2 on t1.student_id = t2.student_id 
</span></span><span class=line><span class=cl>  where t1.num &gt; t2.num
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  9、 查询没有同时选修物理课程和体育课程的学生姓名
</span></span><span class=line><span class=cl>  #1.求出报物理或者报体育学生的记录信息（如果一个学生报物理也报体育了是满足下面条件）
</span></span><span class=line><span class=cl>  select * from student as t inner join score as s on t.sid = s.student_id
</span></span><span class=line><span class=cl>  inner join course as c on c.cid = s.course_id
</span></span><span class=line><span class=cl>  where c.cname = &#39;物理&#39; or c.cname = &#39;体育&#39;
</span></span><span class=line><span class=cl>  #限制只能要求学生报物理或者报体育其中的一门，不能同时报这两门
</span></span><span class=line><span class=cl>  select t.sid,t.sname from student as t inner join score as s on t.sid = s.student_id
</span></span><span class=line><span class=cl>  inner join course as c on c.cid = s.course_id
</span></span><span class=line><span class=cl>  where c.cname = &#39;物理&#39; or c.cname = &#39;体育&#39;
</span></span><span class=line><span class=cl>  GROUP BY t.sid having count(c.cid) &lt; 2
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  10、查询挂科超过两门(包括两门)的学生姓名和班级id
</span></span><span class=line><span class=cl>  select t.sname,t.class_id from student as t inner join score as s on t.sid = s.student_id
</span></span><span class=line><span class=cl>  where num &lt; 60 GROUP BY t.sid having count(t.sid) &gt;= 2
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  11、查询选修了所有课程的学生姓名
</span></span><span class=line><span class=cl>  #查询选修了所有课程的学生姓名
</span></span><span class=line><span class=cl>  select t.sname from student as t inner join score as s on t.sid = s.student_id
</span></span><span class=line><span class=cl>  GROUP BY t.sid having count(s.course_id) = 所有科目的数量
</span></span><span class=line><span class=cl>  #查询所有科目的数量
</span></span><span class=line><span class=cl>  select count(cid) from course
</span></span><span class=line><span class=cl>  #整合
</span></span><span class=line><span class=cl>  select t.sname from student as t inner join score as s on t.sid = s.student_id
</span></span><span class=line><span class=cl>  GROUP BY t.sid having count(s.course_id) = (select count(cid) from course
</span></span><span class=line><span class=cl>  )
</span></span><span class=line><span class=cl>  12、查询李平老师教的课程的所有学生（id）的成绩记录
</span></span><span class=line><span class=cl>  select t1.sid,num from student as t1 inner join score as s on t1.sid = s.student_id
</span></span><span class=line><span class=cl>  inner join course as c on c.cid = s.course_id inner join teacher t ON
</span></span><span class=line><span class=cl>  t.tid = c.teacher_id where t.tname = &#39;李平老师&#39;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  13、查询全部学生都选修了的课程号和课程名
</span></span><span class=line><span class=cl>  select c.cid,c.cname from score as s inner join course as c ON
</span></span><span class=line><span class=cl>  s.course_id = c.cid GROUP BY c.cid 
</span></span><span class=line><span class=cl>  having count(course_id) = (select count(sid) from student)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  14、查询每门课程被选修的次数
</span></span><span class=line><span class=cl>  select c.cname,count(c.cid) from score as s inner join course as c ON
</span></span><span class=line><span class=cl>  s.course_id = c.cid GROUP BY c.cid 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  15、查询只选修了一门课程的学生姓名和学号
</span></span><span class=line><span class=cl>  select t.sname,t.sid from student as t inner join score as s on
</span></span><span class=line><span class=cl>  t.sid = s.student_id GROUP BY student_id HAVING
</span></span><span class=line><span class=cl>  count(s.course_id) = 1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  16、查询所有学生考出的成绩并按从高到低排序（成绩去重）
</span></span><span class=line><span class=cl>  #查询所有学生考出的成绩并按从高到低排序（成绩去重）
</span></span><span class=line><span class=cl>  #DISTINCT对某一个查询字段去重
</span></span><span class=line><span class=cl>  select DISTINCT num from score ORDER BY num desc
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  17、查询平均成绩大于85的学生姓名和平均成绩
</span></span><span class=line><span class=cl>  select t.sname,avg(num) from student as t inner join score as s on 
</span></span><span class=line><span class=cl>  t.sid = s.student_id group by t.sid having avg(num) &gt; 85
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  18、查询生物成绩不及格的学生姓名和对应生物分数
</span></span><span class=line><span class=cl>  select t.sname,num from student as t inner join score as s on t.sid = s.student_id inner join course as c on c.cid = s.course_id where cname = &#39;生物&#39; and num &lt; 60
</span></span><span class=line><span class=cl>  19、查询在所有选修了李平老师课程的学生中，这些课程(李平老师的课程，不是所有课程)平均成绩最高的学生姓名
</span></span><span class=line><span class=cl>  select t1.sname,avg(num) from student as t1 inner join score as s on t1.sid = s.student_id inner join course as c on c.cid = s.course_id inner join teacher as t on t.tid = c.teacher_id where t.tname = &#39;李平老师&#39; group by t1.sid order by avg(num) desc limit 1
</span></span></code></pre></div></li><li><p>答案</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>  </span><span class=mi>1</span><span class=err>、查询所有的课程的名称以及对应的任课老师姓名</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cid</span><span class=p>,</span><span class=k>c</span><span class=p>.</span><span class=n>cname</span><span class=p>,</span><span class=n>t</span><span class=p>.</span><span class=n>tname</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>course</span><span class=w>  </span><span class=k>c</span><span class=w> </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>teacher</span><span class=w> </span><span class=n>t</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>teacher_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>tid</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>2</span><span class=err>、查询学生表中男女生各有多少人</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>gender</span><span class=p>,</span><span class=k>count</span><span class=p>(</span><span class=n>gender</span><span class=p>)</span><span class=w> </span><span class=err>人数</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>gender</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>3</span><span class=err>、查询物理成绩等于</span><span class=mi>100</span><span class=err>的学生的姓名</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>sname</span><span class=p>,</span><span class=n>num</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>student</span><span class=w>  </span><span class=n>s</span><span class=w> </span><span class=k>inner</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>sid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>student_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>course_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&#34;物理&#34;</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>100</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>4</span><span class=err>、查询平均成绩大于八十分的同学的姓名和平均成绩</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>sname</span><span class=p>,</span><span class=k>avg</span><span class=p>(</span><span class=n>num</span><span class=p>)</span><span class=w> </span><span class=err>平均成绩</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>sid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>sname</span><span class=w> </span><span class=k>having</span><span class=w> </span><span class=k>avg</span><span class=p>(</span><span class=n>num</span><span class=p>)</span><span class=o>&gt;=</span><span class=mi>80</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>5</span><span class=err>、查询所有学生的学号，姓名，选课数，总成绩</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>student</span><span class=p>.</span><span class=n>sid</span><span class=p>,</span><span class=n>student</span><span class=p>.</span><span class=n>sname</span><span class=p>,</span><span class=k>sum</span><span class=p>(</span><span class=n>num</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=err>总成绩</span><span class=p>,</span><span class=k>count</span><span class=p>(</span><span class=n>course_id</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=err>课程数</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=k>inner</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>student</span><span class=p>.</span><span class=n>sid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>score</span><span class=p>.</span><span class=n>student_id</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>student</span><span class=p>.</span><span class=n>sid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>6</span><span class=err>、</span><span class=w> </span><span class=err>查询姓李老师的个数</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>tid</span><span class=p>)</span><span class=w> </span><span class=err>个数</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>teacher</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>tname</span><span class=w> </span><span class=k>like</span><span class=w> </span><span class=s2>&#34;李%&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>7</span><span class=err>、</span><span class=w> </span><span class=err>查询没有报李平老师课的学生姓名</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>sname</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>sname</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=k>select</span><span class=w>  </span><span class=n>sname</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=n>s</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>sid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>student_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>course_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>teacher</span><span class=w> </span><span class=n>t</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>tid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>teacher_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>tname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&#34;李平老师&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>8</span><span class=err>、</span><span class=w> </span><span class=err>查询物理课程比生物课程高的学生的学号</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=err>返回每个学生的物理分数表和每个学生生物分数表，将其连接成一张表，然后进行条件查询</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>t1</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span><span class=k>from</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>student_id</span><span class=p>,</span><span class=n>s</span><span class=p>.</span><span class=n>num</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=k>inner</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>course_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;物理&#39;</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>t1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>inner</span><span class=w> </span><span class=k>join</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>student_id</span><span class=p>,</span><span class=n>s</span><span class=p>.</span><span class=n>num</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=k>inner</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>course_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;生物&#39;</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>t2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>on</span><span class=w> </span><span class=n>t1</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t2</span><span class=p>.</span><span class=n>student_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=n>t1</span><span class=p>.</span><span class=n>num</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>t2</span><span class=p>.</span><span class=n>num</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>9</span><span class=err>、</span><span class=w> </span><span class=err>查询没有同时选修物理课程和体育课程的学生姓名</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=w> </span><span class=err>第一种写法</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>sname</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>t</span><span class=w> </span><span class=k>inner</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>sid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>student_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>inner</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>course_id</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;物理&#39;</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;体育&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>sid</span><span class=w> </span><span class=k>having</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=k>c</span><span class=p>.</span><span class=n>cid</span><span class=p>)</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=w> </span><span class=err>第二种写法</span><span class=p>:</span><span class=err>将选修物理或体育的学生根据学号分组，然后每组数据的行等于</span><span class=mi>1</span><span class=err>的学生就是</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>sid</span><span class=w> </span><span class=k>in</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>student_id</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>course_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=n>cname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&#34;物理&#34;</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=n>cname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&#34;体育&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>student_id</span><span class=w> </span><span class=k>having</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>student_id</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>10</span><span class=err>、查询挂科超过两门</span><span class=p>(</span><span class=err>包括两门</span><span class=p>)</span><span class=err>的学生姓名和挂科数量</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>sname</span><span class=p>,</span><span class=k>count</span><span class=p>(</span><span class=n>s1</span><span class=p>.</span><span class=n>sid</span><span class=p>)</span><span class=w> </span><span class=err>个数</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>join</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>sid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>student_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=n>num</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>60</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>sname</span><span class=w> </span><span class=k>having</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>s1</span><span class=p>.</span><span class=n>sid</span><span class=p>)</span><span class=o>&gt;=</span><span class=mi>2</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>11</span><span class=err>、查询选修了所有课程的学生姓名</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>sname</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>join</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>sid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>student_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>sname</span><span class=w> </span><span class=k>having</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>student_id</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>cid</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>course</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>12</span><span class=err>、查询李平老师教的课程的所有学生（</span><span class=n>id</span><span class=err>）的成绩记录</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>student_id</span><span class=p>,</span><span class=k>c</span><span class=p>.</span><span class=n>cname</span><span class=p>,</span><span class=n>s</span><span class=p>.</span><span class=n>num</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>course_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>teacher</span><span class=w> </span><span class=n>t</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>tid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>teacher_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>tname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&#34;李平老师&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>13</span><span class=err>、查询全部学生都选修了的课程号和课程名</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>course_id</span><span class=p>,</span><span class=n>cname</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>course_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>course_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>HAVING</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>course_id</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>sid</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>student</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>14</span><span class=err>、查询每门课程被选修的次数</span><span class=p>(</span><span class=err>每门课有多少学生选择</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>cname</span><span class=p>,</span><span class=k>count</span><span class=p>(</span><span class=k>c</span><span class=p>.</span><span class=n>cname</span><span class=p>)</span><span class=w> </span><span class=err>次数</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>course_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>cname</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>15</span><span class=err>、查询只选修了一门课程的学生姓名和学号</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>student_id</span><span class=p>,</span><span class=n>sname</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>join</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>sid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>student_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>having</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=n>course_id</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>16</span><span class=err>、查询所有学生考出的成绩并按从高到低排序（成绩去重</span><span class=p>:</span><span class=err>在需要去重字段前面加</span><span class=k>distinct</span><span class=err>）</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=k>distinct</span><span class=w> </span><span class=n>num</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>num</span><span class=w> </span><span class=k>desc</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>17</span><span class=err>、查询平均成绩大于</span><span class=mi>85</span><span class=err>的学生姓名和平均成绩</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>sname</span><span class=p>,</span><span class=k>avg</span><span class=p>(</span><span class=n>num</span><span class=p>)</span><span class=w> </span><span class=err>平均成绩</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>join</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>sid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>sname</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>having</span><span class=w> </span><span class=k>avg</span><span class=p>(</span><span class=n>num</span><span class=p>)</span><span class=o>&gt;</span><span class=mi>85</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>18</span><span class=err>、查询生物成绩不及格的学生姓名和对应生物分数</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>sname</span><span class=p>,</span><span class=n>num</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>sid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>course_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=n>cname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&#34;生物&#34;</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>num</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>60</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=mi>19</span><span class=err>、查询在所有选修了李平老师课程的学生中，这些课程</span><span class=p>(</span><span class=err>李平老师的课程，不是所有课程</span><span class=p>)</span><span class=err>平均成绩最高的学生姓名</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>sname</span><span class=p>,</span><span class=k>avg</span><span class=p>(</span><span class=n>num</span><span class=p>)</span><span class=w> </span><span class=err>平均成绩</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>sid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>course_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>teacher</span><span class=w> </span><span class=n>t</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>teacher_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>tid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=n>tname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&#34;李平老师&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>sname</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=k>avg</span><span class=p>(</span><span class=n>num</span><span class=p>)</span><span class=w> </span><span class=k>desc</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>limit</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>#</span><span class=w> </span><span class=err>第二种方法</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>sname</span><span class=p>,</span><span class=k>avg</span><span class=p>(</span><span class=n>num</span><span class=p>)</span><span class=w> </span><span class=err>平均成绩</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>sid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>course_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>teacher</span><span class=w> </span><span class=n>t</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>teacher_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>tid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=n>tname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&#34;李平老师&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>sname</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>having</span><span class=w> </span><span class=k>avg</span><span class=p>(</span><span class=n>num</span><span class=p>)</span><span class=o>=</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=k>max</span><span class=p>(</span><span class=err>平均成绩</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=n>sname</span><span class=p>,</span><span class=k>avg</span><span class=p>(</span><span class=n>num</span><span class=p>)</span><span class=w> </span><span class=err>平均成绩</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>sid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>course_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>cid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>teacher</span><span class=w> </span><span class=n>t</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>teacher_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>tid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=n>tname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&#34;李平老师&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>sname</span><span class=p>)</span><span class=w> </span><span class=n>t</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div></li></ul></div><div class=post-reward><div style=padding:0;margin:0;width:100%;font-size:16px;text-align:center><div id=QR style=opacity:0><div id=wechat style=display:inline-block><a class=fancybox rel=group><img id=wechat_qr src=https://canw0916.github.io/img/wxPay.jpg alt=wechat_pay></a><p>微信</p></div><div id=alipay style=display:inline-block><a class=fancybox rel=group><img id=alipay_qr src=https://canw0916.github.io/img/aliPay.jpg alt=alipay></a><p>支付宝</p></div></div><button id=rewardButton onclick='var qr=document.getElementById("QR");qr.style.opacity==="0"?qr.style.opacity="1":qr.style.opacity="0"'>
<span>🧧 鼓励</span></button></div></div><footer class=post-footer><nav class=paginav><a class=prev href=https://canw0916.github.io/en/posts/tech/mysql%E9%AB%98%E7%BA%A7/><span class=title>« 上一页</span><br><span>Mysql高级</span>
</a><a class=next href=https://canw0916.github.io/en/posts/tech/selenium/><span class=title>下一页 »</span><br><span>Selenium</span></a></nav></footer></div><div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>💬评论</span><hr></div><div id=tcomment></div><script src=https://utteranc.es/client.js repo=canw0916/utterances_comments issue-term=title theme=photon-dark crossorigin=anonymous async></script></div></article></main><script async src=https://unpkg.com/mermaid@8.8.1/dist/mermaid.min.js></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><footer class=footer><span>Copyright
&copy;
2023-2024
<a href=https://canw0916.github.io/en/ style=color:#939393>Felix's Blog</a>
All Rights Reserved
</span><a href=https://beian.miit.gov.cn/ target=_blank style=color:#939393></a>&nbsp;
<span><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=null" style=display:inline-block;text-decoration:none;height:20px;color:#939393><img src style="float:left;margin:0 5px 0 0">
</a></span><span id=busuanzi_container><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css>总访客数: <span id=busuanzi_value_site_uv></span>
总访问量: <span id=busuanzi_value_site_pv></span></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
<span id=read_progress></span>
</span></a><script>document.addEventListener("scroll",function(){const t=document.getElementById("read_progress"),n=document.documentElement.scrollHeight,s=document.documentElement.clientHeight,o=document.documentElement.scrollTop||document.body.scrollTop;t.innerText=((o/(n-s)).toFixed(2)*100).toFixed(0)})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>let mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>400||document.documentElement.scrollTop>400?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="📄复制";function s(){t.innerText="👌🏻已复制!",setTimeout(()=>{t.innerText="📄复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){let t=e.textContent+`\r
————————————————\r
版权声明：本文为「Felix's Blog」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。\r
原文链接：`+location.href;navigator.clipboard.writeText(t),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild===n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName==="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script src=https://code.jquery.com/jquery-1.12.4.min.js></script><script>$("code[class^=language] ").on("mouseover",function(){this.clientWidth<this.scrollWidth&&$(this).css("width","135%")}).on("mouseout",function(){$(this).css("width","100%")})</script></body></html>