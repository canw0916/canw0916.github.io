<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>MongoDB | Felix's Blog</title>
<meta name=keywords content><meta name=description content="MongoDBæ•°æ®å­˜å‚¨ MongoDBæ˜¯ä¸€ä¸ªéå…³ç³»å‹æ•°æ®åº“(NoSQL). éå¸¸é€‚åˆè¶…å¤§æ•°æ®é›†çš„å­˜å‚¨, ç”± C++ è¯­è¨€ç¼–å†™,æ—¨åœ¨ä¸º WEB åº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§"><meta name=author content="
ä½œè€…:Felix"><link rel=canonical href=https://canw0916.github.io/en/posts/tech/mongodb/><link crossorigin=anonymous href=/assets/css/stylesheet.a7d877c95a8fd8f651ae0a99e2d0566db6cd06091905d495b3f79ebd3536ed91.css integrity="sha256-p9h3yVqP2PZRrgqZ4tBWbbbNBgkZBdSVs/eevTU27ZE=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://canw0916.github.io/img/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://canw0916.github.io/img/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://canw0916.github.io/img/favicon-32x32.png><link rel=apple-touch-icon href=https://canw0916.github.io/img/apple-touch-icon.png><link rel=mask-icon href=https://canw0916.github.io/img/android-chrome-512x512.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://canw0916.github.io/en/posts/tech/mongodb/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-7ENSZ7BS0C"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-7ENSZ7BS0C")}</script><meta property="og:title" content="MongoDB"><meta property="og:description" content="MongoDBæ•°æ®å­˜å‚¨ MongoDBæ˜¯ä¸€ä¸ªéå…³ç³»å‹æ•°æ®åº“(NoSQL). éå¸¸é€‚åˆè¶…å¤§æ•°æ®é›†çš„å­˜å‚¨, ç”± C++ è¯­è¨€ç¼–å†™,æ—¨åœ¨ä¸º WEB åº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§"><meta property="og:type" content="article"><meta property="og:url" content="https://canw0916.github.io/en/posts/tech/mongodb/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-10T14:57:56+08:00"><meta property="article:modified_time" content="2023-02-10T14:57:56+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="MongoDB"><meta name=twitter:description content="MongoDBæ•°æ®å­˜å‚¨ MongoDBæ˜¯ä¸€ä¸ªéå…³ç³»å‹æ•°æ®åº“(NoSQL). éå¸¸é€‚åˆè¶…å¤§æ•°æ®é›†çš„å­˜å‚¨, ç”± C++ è¯­è¨€ç¼–å†™,æ—¨åœ¨ä¸º WEB åº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ğŸ“šæ–‡ç« ","item":"https://canw0916.github.io/en/posts/"},{"@type":"ListItem","position":2,"name":"ğŸš€ æŠ€æœ¯","item":"https://canw0916.github.io/en/posts/tech/"},{"@type":"ListItem","position":3,"name":"MongoDB","item":"https://canw0916.github.io/en/posts/tech/mongodb/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"MongoDB","name":"MongoDB","description":"MongoDBæ•°æ®å­˜å‚¨ MongoDBæ˜¯ä¸€ä¸ªéå…³ç³»å‹æ•°æ®åº“(NoSQL). éå¸¸é€‚åˆè¶…å¤§æ•°æ®é›†çš„å­˜å‚¨, ç”± C++ è¯­è¨€ç¼–å†™,æ—¨åœ¨ä¸º WEB åº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§","keywords":[""],"articleBody":"MongoDBæ•°æ®å­˜å‚¨ MongoDBæ˜¯ä¸€ä¸ªéå…³ç³»å‹æ•°æ®åº“(NoSQL). éå¸¸é€‚åˆè¶…å¤§æ•°æ®é›†çš„å­˜å‚¨, ç”± C++ è¯­è¨€ç¼–å†™,æ—¨åœ¨ä¸º WEB åº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚MongoDB æ˜¯ä¸€ä¸ªä»‹äºå…³ç³»æ•°æ®åº“å’Œéå…³ç³»æ•°æ®åº“ä¹‹é—´çš„äº§å“ï¼Œæ˜¯éå…³ç³»æ•°æ®åº“å½“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œï¼Œæœ€åƒå…³ç³»æ•°æ®åº“çš„ã€‚\nä¸‹é¢æ˜¯Sqlä¸mongodbçš„æœ¯è¯­å¯¹æ¯”\nSQL Mongodb è¡¨ï¼ˆTalbeï¼‰ é›†åˆï¼ˆCollectionï¼‰ è¡Œï¼ˆRowï¼‰ æ–‡æ¡£ï¼ˆDocumentï¼‰ åˆ—ï¼ˆColï¼‰ å­—æ®µï¼ˆFieldï¼‰ ä¸»é”®ï¼ˆPrimary Keyï¼‰ å¯¹è±¡IDï¼ˆObjectIdï¼‰ ä¸€, MongoDBä¸å®‰è£…(windows) é¦–å…ˆå»å®˜ç½‘ä¸‹è½½MongoDBçš„å®‰è£…åŒ…, https://www.mongodb.com/try/download/community\nå°†mongodbç›®å½•ä¸‹çš„binæ–‡ä»¶å¤¹æ·»åŠ åˆ°ç¯å¢ƒå˜é‡\nå¯¹äºmacçš„å®‰è£…:https://blog.csdn.net/qq991658923/article/details/121436106\nMacå¯åŠ¨ï¼š mongod â€“dbpath /opt/mongodb/data â€“logpath /opt/mongodb/log/mongo.log â€“fork mongo äºŒ, MongoDBçš„ç®€å•ä½¿ç”¨ ç®€å•ä»‹ç»ä¸€ä¸‹mongoDBä¸­ä¸€äº›æ“ä½œ(äº†è§£)\nshow dbs: æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“ show databases: æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“ use xxxx: ä½¿ç”¨æŒ‡å®šæ•°æ®åº“/åˆ›å»ºæ•°æ®åº“ï¼ˆæ–°åº“ä¸­æ’å…¥æ•°æ®æ‰å¯ä»¥æ˜¾ç¤ºæ–°åº“ï¼‰ db: å½“å‰æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“ db.dropDatabase(): åˆ é™¤æ•°æ®åº“ show collections: æ˜¾ç¤ºå½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰çš„é›†åˆ(è¡¨) ä¸‰, MongoDBçš„å¢åˆ æ”¹æŸ¥ 1. mongodbä¸­å¸¸è§çš„æ•°æ®ç±»å‹(äº†è§£): Object ID: ä¸»é”®IDã€\"_id\" : ObjectId(\"56063f17ade2f21f36b03133\")ã€‘ String: å­—ç¬¦ä¸² Boolean: å¸ƒå°”å€¼ Integer: æ•°å­— Doube: å°æ•° Arrays: æ•°ç»„,[1,2,3] Object: æ–‡æ¡£(å…³è”å…¶ä»–å¯¹è±¡) {sname: æå˜‰è¯š, sage: 18, class:{cccc}} Null : ç©ºå€¼ Timestamp: æ—¶é—´æˆ³ Date: æ—¶é—´æ—¥æœŸ 2. mongodbæ’å…¥æ•°æ®/æ–‡æ¡£ #collection_nameé›†åˆ/è¡¨ä¸å­˜åœ¨åˆ™ä¼šæ–°å»º db.collection_name.insert({å­—æ®µ:å€¼,å­—æ®µ:å€¼}) ç¤ºä¾‹:\ndb.c1.insert({name:\"bobo\", age:18, hobby:['eat', 'sleep']}) æ’å…¥å¤šæ¡æ•°æ®ï¼š\n#c1æ˜¯è¡¨å/é›†åˆå db.getCollection('c1').insertMany([ { \"name\":\"bobo\", }, { \"address\":\"æ²³åŒ—\" }, ] ); æ³¨æ„, å¦‚æœé›†åˆä¸å­˜åœ¨. åˆ™ä¼šè‡ªåŠ¨åˆ›å»ºé›†åˆ\næ’å…¥æ•°æ®åå¯ä»¥æŸ¥è¯¢æ‰€æœ‰æ•°æ®æŸ¥çœ‹æ˜¯å¦æ’å…¥æˆåŠŸï¼š\ndb.stu.find() 3. mongodbä¿®æ”¹æ•°æ® 3.1 updateæ›´æ–° #d1æ˜¯è¡¨å db.d1.update({æŸ¥è¯¢æ¡ä»¶}, {å¾…ä¿®æ”¹å†…å®¹}, {multi: æ˜¯å¦å¤šæ¡æ•°æ®ä¿®æ”¹}) multi:trueè¡¨ç¤ºä¿®æ”¹æ»¡è¶³æ¡ä»¶æ‰€æœ‰çš„å†…å®¹ï¼Œå¦åˆ™åªä¿®æ”¹æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€æ¡å†…å®¹,multiä¸å†™é»˜è®¤ä¸ºfalse ç¤ºä¾‹:\ndb.d1.update({name:\"bobo\"}, {$set:{title:\"alex\", hobby:['æŠ½çƒŸ', 'å–é…’', 'çƒ«å¤´']}}, {multi:true}); 4.mongodbåˆ é™¤æ•°æ® 4.1 remove() db.collection_name.remove({æ¡ä»¶}, {justOne:true|false}) db.collection_name.remove() åˆ é™¤æ‰€æœ‰è®°å½• db.collection_name.drop() åˆ é™¤collection/è¡¨ ç¤ºä¾‹:\ndb.nor_col.remove({name:\"jay\"}, {justOne:true}) 4.2 deleteOne() db.collection_name.deleteOne({æ¡ä»¶}) ç¤ºä¾‹:\ndb.nor_col.deleteOne({name:\"jay\"}) 4.3 deleteMany() db.collection_name.deleteMany({æ¡ä»¶}) ç¤ºä¾‹:\ndb.nor_col.deleteMany({name:\"jay\"}) 5. mongodbæŸ¥è¯¢æ•°æ® å‡†å¤‡æ•°æ®:\ndb.stu.insert([ {name: \"æœ±å…ƒç’‹\", age:800, address:'å®‰å¾½çœå‡¤é˜³', score: 160}, {name: \"æœ±æ££\", age:750, address:'æ±Ÿè‹çœå—äº¬å¸‚', score: 120}, {name: \"æœ±é«˜ç‚½\", age:700, address:'åŒ—äº¬ç´«ç¦åŸ', score: 90}, {name: \"æå˜‰è¯š\", age:38, address:'é¦™æ¸¯xxxè¡—é“', score: 70}, {name: \"éº»èŠ±è—¤\", age:28, address:'å¹¿ä¸œçœxxxå¸‚', score: 80}, {name: \"å¤§è€ç‹\", age:33, address:'ç«æ˜Ÿç¬¬ä¸€å«æ˜Ÿ', score: -60}, {name: \"å’©å’©\", age:33, address:'å¼€æ™®å‹’225æ—è¾¹çš„é»‘æ´', score: -160} ]) 5.1 æ™®é€šæŸ¥è¯¢ db.c1.find() æŸ¥è¯¢æ‰€æœ‰ db.c1.find({\"å­—æ®µ\":\"å›ºå®šå€¼\"}) æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰æ•°æ® db.c1.findOne({æ¡ä»¶}) æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€æ¡æ•°æ® db.getCollection('c1').find({\"å­—æ®µ1\":\"å›ºå®šå€¼1\",\"å­—æ®µ2\":\"å›ºå®šå€¼2\"}) 5.2 æ¯”è¾ƒè¿ç®— ç­‰äºï¼š é»˜è®¤æ˜¯ç­‰äºåˆ¤æ–­ï¼Œ $eq å°äºï¼š$lt ï¼ˆless thanï¼‰ å°äºç­‰äºï¼š$lte ï¼ˆless than equalï¼‰ å¤§äºï¼š$gt ï¼ˆgreater thanï¼‰ å¤§äºç­‰äºï¼š$gte ä¸ç­‰äºï¼š$ne db.stu.find({age:28}) æŸ¥è¯¢å¹´é¾„æ˜¯28å²çš„å­¦ç”Ÿä¿¡æ¯ db.stu.find({age: {$eq: 28}}) æŸ¥è¯¢å¹´é¾„æ˜¯28å²çš„å­¦ç”Ÿä¿¡æ¯ db.stu.find({age: {$gt: 30}}) æŸ¥è¯¢å¹´é¾„å¤§äº30å²çš„å­¦ç”Ÿ db.stu.find({age: {$lt: 30}}) æŸ¥è¯¢å¹´é¾„å°äº30å²çš„å­¦ç”Ÿ db.stu.find({age: {$gte: 38}}) æŸ¥è¯¢å¹´é¾„å¤§äºç­‰äº30å²çš„å­¦ç”Ÿ db.stu.find({age: {$lte: 38}}) æŸ¥è¯¢å¹´é¾„å°äºç­‰äº30å²çš„å­¦ç”Ÿ db.stu.find({age: {$ne: 38}}) æŸ¥è¯¢å¹´é¾„ä¸ç­‰äº38çš„å­¦ç”Ÿ 5.3 é€»è¾‘è¿ç®—ç¬¦ and $and: [æ¡ä»¶1, æ¡ä»¶2, æ¡ä»¶3â€¦.] æŸ¥è¯¢å¹´é¾„ç­‰äº33, å¹¶ä¸”, åå­—æ˜¯\"å¤§è€ç‹\"çš„å­¦ç”Ÿä¿¡æ¯ db.stu.find({$and:[{age: {$eq:33}}, {name:'å¤§è€ç‹'}]}) or $or: [æ¡ä»¶1, æ¡ä»¶2, æ¡ä»¶3] æŸ¥è¯¢åå­—å«\"æå˜‰è¯š\"çš„, æˆ–è€…, å¹´é¾„è¶…è¿‡100å²çš„äºº db.stu.find({$or: [{name: 'æå˜‰è¯š'}, {age: {$gt: 100}}]}) nor\n$nor: [æ¡ä»¶1, æ¡ä»¶2, æ¡ä»¶3]\næŸ¥è¯¢å¹´é¾„ä¸å°äº38å²çš„äºº, åå­—è¿˜ä¸èƒ½æ˜¯æœ±å…ƒç’‹. db.stu.find({$nor: [{age: {$lt: 38}}, {name: \"æœ±å…ƒç’‹\"}]}) 5.4 èŒƒå›´è¿ç®—ç¬¦ â€‹\tä½¿ç”¨$inï¼Œ $ninåˆ¤æ–­æ•°æ®æ˜¯å¦åœ¨æŸä¸ªæ•°ç»„å†…\ndb.stu.find({age: {$in:[28, 38]}}) å¹´é¾„æ˜¯28æˆ–è€…38çš„äºº 5.5 æ­£åˆ™è¡¨è¾¾å¼ â€‹\tä½¿ç”¨$regexè¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…\ndb.stu.find({address: {$regex:'^åŒ—äº¬'}}) æŸ¥è¯¢åœ°å€æ˜¯åŒ—äº¬çš„äººçš„ä¿¡æ¯ db.stu.find({address: /^åŒ—äº¬/}) æ•ˆæœä¸€æ · 5.6 skipå’Œlimit db.stu.find().skip(3).limit(3)\tè·³è¿‡3ä¸ª. æå–3ä¸ª. ç±»ä¼¼limit 3, 3 å¯ä»¥ç”¨æ¥åšåˆ†é¡µ\n5.7 æ’åº sort({å­—æ®µ:1, å­—æ®µ:-1})\n1è¡¨ç¤ºå‡åº -1è¡¨ç¤ºé™åº\nå¯¹æŸ¥è¯¢ç»“æœæ’åº, å…ˆæŒ‰ç…§ageå‡åºæ’åˆ—, ç›¸åŒé¡¹å†æŒ‰ç…§scoreé™åºæ’åˆ— db.stu.find().sort({age:1, score: -1}) 5.8 ç»Ÿè®¡æ•°é‡ count(æ¡ä»¶) æŸ¥è¯¢æ•°é‡\ndb.stu.count({age:33}) å››ï¼Œpymongoçš„ä½¿ç”¨ pythonå¤„ç†mongodbé¦–é€‰å°±æ˜¯pymongo. é¦–å…ˆ, å®‰è£…ä¸€ä¸‹è¿™ä¸ªæ¨¡å—\npip install pymongo å»ºç«‹è¿æ¥\nimport pymongo conn = pymongo.MongoClient(host='localhost', port=27017) # åˆ‡æ¢æ•°æ®åº“ py = conn['python'] # ç™»å½•è¯¥æ•°æ®åº“(éœ€è¦çš„è¯) #py.authenticate(\"python_admin\", '123456') # ç®€å•æ¥ä¸ªæŸ¥è¯¢ result = py[\"stu\"].find() for r in result: print(r) å®Œæˆå¢åˆ æ”¹æŸ¥\nimport pymongo from pymongo import MongoClient #åˆ›å»ºè¿”å›é“¾æ¥å¯¹è±¡ def get_db(database): client = MongoClient(host=\"localhost\", port=27017) db = client[database] return db # å¢åˆ æ”¹æŸ¥ # å¢åŠ æ•°æ® def add_one(table, data): db = get_db(\"python\") result = db[table].insert_one(data) return result def add_many(table, data_list): db = get_db(\"python\") result = db[table].insert_many(data_list) return result.inserted_ids def upd(table, condition, data):#conditionæ¡ä»¶ db = get_db(\"python\") result = db[table].update_many(condition, {'$set':data}) return result def delete(table, condition):#conditionæ¡ä»¶ db = get_db(\"python\") result = db[table].delete_many(condition) return result if __name__ == '__main__': # r = add_one(\"stu\", {\"name\": \"è¥¿ç“œ\", \"age\":18}) # print(r.inserted_id) # r = add_many(\"stu\", [{\"name\": \"å˜å˜\"},{\"name\": \"å’”å’”\"}]) # print(r) # result = upd(\"stu\", {\"name\": 'è¥¿ç“œ'}, {\"age\": 100}) # print(result) result = delete(\"stu\", {\"name\": \"å˜å˜\"}) print(result) ","wordCount":"2693","inLanguage":"en","datePublished":"2023-02-10T14:57:56+08:00","dateModified":"2023-02-10T14:57:56+08:00","author":[{"@type":"Person","name":"Felix"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://canw0916.github.io/en/posts/tech/mongodb/"},"publisher":{"@type":"Organization","name":"Felix's Blog","logo":{"@type":"ImageObject","url":"https://canw0916.github.io/img/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><script async src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script><header class=header><nav class=nav><div class=logo><a href=https://canw0916.github.io/en/ accesskey=h title="Felix's Blog (Alt + H)"><img src=https://canw0916.github.io/img/android-chrome-512x512.png alt=logo aria-label=logo height=35>Felix's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://canw0916.github.io/en/search title="ğŸ” æœç´¢ (Alt + /)" accesskey=/><span>ğŸ” æœç´¢</span></a></li><li><a href=https://canw0916.github.io/en/ title="ğŸ  ä¸»é¡µ"><span>ğŸ  ä¸»é¡µ</span></a></li><li><a href=https://canw0916.github.io/en/posts title="ğŸ“š æ–‡ç« "><span>ğŸ“š æ–‡ç« </span></a></li><li><a href=https://canw0916.github.io/en/tags title="ğŸ’¡ æ ‡ç­¾"><span>ğŸ’¡ æ ‡ç­¾</span></a></li><li><a href=https://canw0916.github.io/en/archives/ title="â±ï¸ æ—¶é—´è½´"><span>â±ï¸ æ—¶é—´è½´</span></a></li><li><a href=https://canw0916.github.io/en/about title="ğŸ‘¦ å…³äº"><span>ğŸ‘¦ å…³äº</span></a></li><li><a href=https://canw0916.github.io/en/links title="ğŸ˜º å‹é“¾"><span>ğŸ˜º å‹é“¾</span></a></li></ul></nav></header><main class="main page"><article class=post-single><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://canw0916.github.io/en/>ğŸ ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href=https://canw0916.github.io/en/posts/>ğŸ“šæ–‡ç« </a>&nbsp;Â»&nbsp;<a href=https://canw0916.github.io/en/posts/tech/>ğŸš€ æŠ€æœ¯</a></div><h1 class=post-title>MongoDB</h1><div class=post-meta>åˆ›å»º:2023-02-10|å­—æ•°:2693å­—|æ—¶é•¿: 6åˆ†é’Ÿ|
ä½œè€…:Felix
&nbsp;&nbsp;æ ‡ç­¾: &nbsp;<ul class=post-tags-meta><a href=https://canw0916.github.io/en/tags/python/>Python</a></ul><span id=busuanzi_container_page_pv>&nbsp;| è®¿é—®: <span id=busuanzi_value_page_pv></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>æ–‡ç« ç›®å½•</span></summary><div class=inner><ul><li><a href=#mongodb%e6%95%b0%e6%8d%ae%e5%ad%98%e5%82%a8 aria-label=MongoDBæ•°æ®å­˜å‚¨>MongoDBæ•°æ®å­˜å‚¨</a><ul><li><a href=#%e4%b8%80-mongodb%e4%b8%8e%e5%ae%89%e8%a3%85windows aria-label="ä¸€, MongoDBä¸å®‰è£…(windows)">ä¸€, MongoDBä¸å®‰è£…(windows)</a></li><li><a href=#%e4%ba%8c-mongodb%e7%9a%84%e7%ae%80%e5%8d%95%e4%bd%bf%e7%94%a8 aria-label="äºŒ, MongoDBçš„ç®€å•ä½¿ç”¨">äºŒ, MongoDBçš„ç®€å•ä½¿ç”¨</a></li><li><a href=#%e4%b8%89-mongodb%e7%9a%84%e5%a2%9e%e5%88%a0%e6%94%b9%e6%9f%a5 aria-label="ä¸‰, MongoDBçš„å¢åˆ æ”¹æŸ¥">ä¸‰, MongoDBçš„å¢åˆ æ”¹æŸ¥</a><ul><li><a href=#1-mongodb%e4%b8%ad%e5%b8%b8%e8%a7%81%e7%9a%84%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b%e4%ba%86%e8%a7%a3 aria-label="1. mongodbä¸­å¸¸è§çš„æ•°æ®ç±»å‹(äº†è§£):">1. mongodbä¸­å¸¸è§çš„æ•°æ®ç±»å‹(äº†è§£):</a></li><li><a href=#2-mongodb%e6%8f%92%e5%85%a5%e6%95%b0%e6%8d%ae%e6%96%87%e6%a1%a3 aria-label="2. mongodbæ’å…¥æ•°æ®/æ–‡æ¡£">2. mongodbæ’å…¥æ•°æ®/æ–‡æ¡£</a></li><li><a href=#3-mongodb%e4%bf%ae%e6%94%b9%e6%95%b0%e6%8d%ae aria-label="3. mongodbä¿®æ”¹æ•°æ®">3. mongodbä¿®æ”¹æ•°æ®</a><ul><li><a href=#31-update%e6%9b%b4%e6%96%b0 aria-label="3.1 updateæ›´æ–°">3.1 updateæ›´æ–°</a></li></ul></li><li><a href=#4mongodb%e5%88%a0%e9%99%a4%e6%95%b0%e6%8d%ae aria-label=4.mongodbåˆ é™¤æ•°æ®>4.mongodbåˆ é™¤æ•°æ®</a><ul><li><a href=#41-remove aria-label="4.1 remove()">4.1 remove()</a></li><li><a href=#42-deleteone aria-label="4.2 deleteOne()">4.2 deleteOne()</a></li><li><a href=#43-deletemany aria-label="4.3 deleteMany()">4.3 deleteMany()</a></li></ul></li><li><a href=#5-mongodb%e6%9f%a5%e8%af%a2%e6%95%b0%e6%8d%ae aria-label="5. mongodbæŸ¥è¯¢æ•°æ®">5. mongodbæŸ¥è¯¢æ•°æ®</a><ul><li><a href=#51-%e6%99%ae%e9%80%9a%e6%9f%a5%e8%af%a2 aria-label="5.1 æ™®é€šæŸ¥è¯¢">5.1 æ™®é€šæŸ¥è¯¢</a></li><li><a href=#52-%e6%af%94%e8%be%83%e8%bf%90%e7%ae%97 aria-label="5.2 æ¯”è¾ƒè¿ç®—">5.2 æ¯”è¾ƒè¿ç®—</a></li><li><a href=#53-%e9%80%bb%e8%be%91%e8%bf%90%e7%ae%97%e7%ac%a6 aria-label="5.3 é€»è¾‘è¿ç®—ç¬¦">5.3 é€»è¾‘è¿ç®—ç¬¦</a></li><li><a href=#54-%e8%8c%83%e5%9b%b4%e8%bf%90%e7%ae%97%e7%ac%a6 aria-label="5.4 èŒƒå›´è¿ç®—ç¬¦">5.4 èŒƒå›´è¿ç®—ç¬¦</a></li><li><a href=#55-%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f aria-label="5.5 æ­£åˆ™è¡¨è¾¾å¼">5.5 æ­£åˆ™è¡¨è¾¾å¼</a></li><li><a href=#56-skip%e5%92%8climit aria-label="5.6 skipå’Œlimit">5.6 skipå’Œlimit</a></li><li><a href=#57-%e6%8e%92%e5%ba%8f aria-label="5.7 æ’åº">5.7 æ’åº</a></li><li><a href=#58-%e7%bb%9f%e8%ae%a1%e6%95%b0%e9%87%8f aria-label="5.8 ç»Ÿè®¡æ•°é‡">5.8 ç»Ÿè®¡æ•°é‡</a></li></ul></li></ul></li><li><a href=#%e5%9b%9bpymongo%e7%9a%84%e4%bd%bf%e7%94%a8 aria-label=å››ï¼Œpymongoçš„ä½¿ç”¨>å››ï¼Œpymongoçš„ä½¿ç”¨</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=mongodbæ•°æ®å­˜å‚¨>MongoDBæ•°æ®å­˜å‚¨<a hidden class=anchor aria-hidden=true href=#mongodbæ•°æ®å­˜å‚¨>#</a></h1><p>MongoDBæ˜¯ä¸€ä¸ªéå…³ç³»å‹æ•°æ®åº“(NoSQL). éå¸¸é€‚åˆè¶…å¤§æ•°æ®é›†çš„å­˜å‚¨, ç”± C++ è¯­è¨€ç¼–å†™,æ—¨åœ¨ä¸º WEB åº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚MongoDB æ˜¯ä¸€ä¸ªä»‹äºå…³ç³»æ•°æ®åº“å’Œéå…³ç³»æ•°æ®åº“ä¹‹é—´çš„äº§å“ï¼Œæ˜¯éå…³ç³»æ•°æ®åº“å½“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œï¼Œæœ€åƒå…³ç³»æ•°æ®åº“çš„ã€‚</p><p>ä¸‹é¢æ˜¯Sqlä¸mongodbçš„æœ¯è¯­å¯¹æ¯”</p><table><thead><tr><th style=text-align:center><strong>SQL</strong></th><th style=text-align:center><strong>Mongodb</strong></th></tr></thead><tbody><tr><td style=text-align:center>è¡¨ï¼ˆTalbeï¼‰</td><td style=text-align:center>é›†åˆï¼ˆCollectionï¼‰</td></tr><tr><td style=text-align:center>è¡Œï¼ˆRowï¼‰</td><td style=text-align:center>æ–‡æ¡£ï¼ˆDocumentï¼‰</td></tr><tr><td style=text-align:center>åˆ—ï¼ˆColï¼‰</td><td style=text-align:center>å­—æ®µï¼ˆFieldï¼‰</td></tr><tr><td style=text-align:center>ä¸»é”®ï¼ˆPrimary Keyï¼‰</td><td style=text-align:center>å¯¹è±¡IDï¼ˆObjectIdï¼‰</td></tr></tbody></table><h2 id=ä¸€-mongodbä¸å®‰è£…windows>ä¸€, MongoDBä¸å®‰è£…(windows)<a hidden class=anchor aria-hidden=true href=#ä¸€-mongodbä¸å®‰è£…windows>#</a></h2><p>é¦–å…ˆå»å®˜ç½‘ä¸‹è½½MongoDBçš„å®‰è£…åŒ…, <a href=https://www.mongodb.com/try/download/community>https://www.mongodb.com/try/download/community</a></p><img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210728093724660.png alt=image-20210728093724660 style=zoom:50%>
<img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210728093838499.png alt=image-20210728093838499 style=zoom:50%>
<img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210728093906551.png alt=image-20210728093906551 style=zoom:50%>
<img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210728094404958.png alt=image-20210728094404958 style=zoom:50%>
<img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210728094441168.png alt=image-20210728094441168 style=zoom:50%>
<img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210728094521878.png alt=image-20210728094521878 style=zoom:50%>
<img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210728094547434.png alt=image-20210728094547434 style=zoom:50%>
<img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210728094627838.png alt=image-20210728094627838 style=zoom:50%>
<img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210728094653296.png alt=image-20210728094653296 style=zoom:50%>
<img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210728094727302.png alt=image-20210728094727302 style=zoom:50%>
<img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210728094750500.png alt=image-20210728094750500 style=zoom:50%><p>å°†mongodbç›®å½•ä¸‹çš„binæ–‡ä»¶å¤¹æ·»åŠ åˆ°ç¯å¢ƒå˜é‡</p><img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210728095340874.png alt=image-20210728095340874 style=zoom:50%>
<img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210728095433900.png alt=image-20210728095433900 style=zoom:50%>
<img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210728095507330.png alt=image-20210728095507330 style=zoom:50%>
<img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210728095631337.png alt=image-20210728095631337 style=zoom:50%>
<img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210728100113133.png alt=image-20210728100113133 style=zoom:50%>
<img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210729195132883.png alt=image-20210729195132883 style=zoom:30%>
<img src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/image-20210729195203348.png alt=image-20210729195203348 style=zoom:30%><p>å¯¹äºmacçš„å®‰è£…:https://blog.csdn.net/qq991658923/article/details/121436106</p><ul><li>Macå¯åŠ¨ï¼š<ul><li>mongod &ndash;dbpath /opt/mongodb/data &ndash;logpath /opt/mongodb/log/mongo.log &ndash;fork</li><li>mongo</li></ul></li></ul><h2 id=äºŒ-mongodbçš„ç®€å•ä½¿ç”¨>äºŒ, MongoDBçš„ç®€å•ä½¿ç”¨<a hidden class=anchor aria-hidden=true href=#äºŒ-mongodbçš„ç®€å•ä½¿ç”¨>#</a></h2><p>ç®€å•ä»‹ç»ä¸€ä¸‹mongoDBä¸­ä¸€äº›æ“ä½œ(äº†è§£)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>show dbs: æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“
</span></span><span class=line><span class=cl>show databases: æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“
</span></span><span class=line><span class=cl>use xxxx: ä½¿ç”¨æŒ‡å®šæ•°æ®åº“/åˆ›å»ºæ•°æ®åº“ï¼ˆæ–°åº“ä¸­æ’å…¥æ•°æ®æ‰å¯ä»¥æ˜¾ç¤ºæ–°åº“ï¼‰
</span></span><span class=line><span class=cl>db: å½“å‰æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“
</span></span><span class=line><span class=cl>db.dropDatabase(): åˆ é™¤æ•°æ®åº“
</span></span><span class=line><span class=cl>show collections: æ˜¾ç¤ºå½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰çš„é›†åˆ(è¡¨)
</span></span></code></pre></div><h2 id=ä¸‰-mongodbçš„å¢åˆ æ”¹æŸ¥>ä¸‰, MongoDBçš„å¢åˆ æ”¹æŸ¥<a hidden class=anchor aria-hidden=true href=#ä¸‰-mongodbçš„å¢åˆ æ”¹æŸ¥>#</a></h2><h3 id=1-mongodbä¸­å¸¸è§çš„æ•°æ®ç±»å‹äº†è§£>1. mongodbä¸­å¸¸è§çš„æ•°æ®ç±»å‹(äº†è§£):<a hidden class=anchor aria-hidden=true href=#1-mongodbä¸­å¸¸è§çš„æ•°æ®ç±»å‹äº†è§£>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Object ID: ä¸»é”®IDã€&#34;_id&#34; : ObjectId(&#34;56063f17ade2f21f36b03133&#34;)ã€‘
</span></span><span class=line><span class=cl>String: å­—ç¬¦ä¸²
</span></span><span class=line><span class=cl>Boolean: å¸ƒå°”å€¼  
</span></span><span class=line><span class=cl>Integer: æ•°å­—
</span></span><span class=line><span class=cl>Doube: å°æ•°
</span></span><span class=line><span class=cl>Arrays: æ•°ç»„,[1,2,3]
</span></span><span class=line><span class=cl>Object: æ–‡æ¡£(å…³è”å…¶ä»–å¯¹è±¡)  {sname: æå˜‰è¯š, sage: 18, class:{cccc}}
</span></span><span class=line><span class=cl>Null : ç©ºå€¼ 
</span></span><span class=line><span class=cl>Timestamp: æ—¶é—´æˆ³
</span></span><span class=line><span class=cl>Date: æ—¶é—´æ—¥æœŸ
</span></span></code></pre></div><h3 id=2-mongodbæ’å…¥æ•°æ®æ–‡æ¡£>2. mongodbæ’å…¥æ•°æ®/æ–‡æ¡£<a hidden class=anchor aria-hidden=true href=#2-mongodbæ’å…¥æ•°æ®æ–‡æ¡£>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>#collection_nameé›†åˆ/è¡¨ä¸å­˜åœ¨åˆ™ä¼šæ–°å»º
</span></span><span class=line><span class=cl>db.collection_name.insert({å­—æ®µ:å€¼,å­—æ®µ:å€¼})
</span></span></code></pre></div><p>ç¤ºä¾‹:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>db.c1.insert({name:&#34;bobo&#34;, age:18, hobby:[&#39;eat&#39;, &#39;sleep&#39;]})
</span></span></code></pre></div><p>æ’å…¥å¤šæ¡æ•°æ®ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>#c1æ˜¯è¡¨å/é›†åˆå
</span></span><span class=line><span class=cl>db.getCollection(&#39;c1&#39;).insertMany([
</span></span><span class=line><span class=cl>        {
</span></span><span class=line><span class=cl>            &#34;name&#34;:&#34;bobo&#34;,
</span></span><span class=line><span class=cl>        },
</span></span><span class=line><span class=cl>        {
</span></span><span class=line><span class=cl>            &#34;address&#34;:&#34;æ²³åŒ—&#34;
</span></span><span class=line><span class=cl>        },
</span></span><span class=line><span class=cl>    ]
</span></span><span class=line><span class=cl>);
</span></span></code></pre></div><ul><li><p>æ³¨æ„, å¦‚æœé›†åˆä¸å­˜åœ¨. åˆ™ä¼šè‡ªåŠ¨åˆ›å»ºé›†åˆ</p></li><li><p>æ’å…¥æ•°æ®åå¯ä»¥æŸ¥è¯¢æ‰€æœ‰æ•°æ®æŸ¥çœ‹æ˜¯å¦æ’å…¥æˆåŠŸï¼š</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>db.stu.find()
</span></span></code></pre></div><h3 id=3-mongodbä¿®æ”¹æ•°æ®>3. mongodbä¿®æ”¹æ•°æ®<a hidden class=anchor aria-hidden=true href=#3-mongodbä¿®æ”¹æ•°æ®>#</a></h3><h4 id=31-updateæ›´æ–°>3.1 updateæ›´æ–°<a hidden class=anchor aria-hidden=true href=#31-updateæ›´æ–°>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>#d1æ˜¯è¡¨å
</span></span><span class=line><span class=cl>db.d1.update({æŸ¥è¯¢æ¡ä»¶}, {å¾…ä¿®æ”¹å†…å®¹}, {multi: æ˜¯å¦å¤šæ¡æ•°æ®ä¿®æ”¹})
</span></span><span class=line><span class=cl>multi:trueè¡¨ç¤ºä¿®æ”¹æ»¡è¶³æ¡ä»¶æ‰€æœ‰çš„å†…å®¹ï¼Œå¦åˆ™åªä¿®æ”¹æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€æ¡å†…å®¹,multiä¸å†™é»˜è®¤ä¸ºfalse
</span></span></code></pre></div><p>ç¤ºä¾‹:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>db.d1.update({name:&#34;bobo&#34;}, {$set:{title:&#34;alex&#34;, hobby:[&#39;æŠ½çƒŸ&#39;, &#39;å–é…’&#39;, &#39;çƒ«å¤´&#39;]}}, {multi:true});
</span></span></code></pre></div><h3 id=4mongodbåˆ é™¤æ•°æ®>4.mongodbåˆ é™¤æ•°æ®<a hidden class=anchor aria-hidden=true href=#4mongodbåˆ é™¤æ•°æ®>#</a></h3><h4 id=41-remove>4.1 remove()<a hidden class=anchor aria-hidden=true href=#41-remove>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>db.collection_name.remove({æ¡ä»¶}, {justOne:true|false})
</span></span><span class=line><span class=cl>db.collection_name.remove() åˆ é™¤æ‰€æœ‰è®°å½•
</span></span><span class=line><span class=cl>db.collection_name.drop()  åˆ é™¤collection/è¡¨
</span></span></code></pre></div><p>ç¤ºä¾‹:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>db.nor_col.remove({name:&#34;jay&#34;}, {justOne:true})
</span></span></code></pre></div><h4 id=42-deleteone>4.2 deleteOne()<a hidden class=anchor aria-hidden=true href=#42-deleteone>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>db.collection_name.deleteOne({æ¡ä»¶})
</span></span></code></pre></div><p>ç¤ºä¾‹:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>db.nor_col.deleteOne({name:&#34;jay&#34;})
</span></span></code></pre></div><h4 id=43-deletemany>4.3 deleteMany()<a hidden class=anchor aria-hidden=true href=#43-deletemany>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>db.collection_name.deleteMany({æ¡ä»¶})
</span></span></code></pre></div><p>ç¤ºä¾‹:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>db.nor_col.deleteMany({name:&#34;jay&#34;})
</span></span></code></pre></div><h3 id=5-mongodbæŸ¥è¯¢æ•°æ®>5. mongodbæŸ¥è¯¢æ•°æ®<a hidden class=anchor aria-hidden=true href=#5-mongodbæŸ¥è¯¢æ•°æ®>#</a></h3><p>å‡†å¤‡æ•°æ®:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>db.stu.insert([
</span></span><span class=line><span class=cl>	{name: &#34;æœ±å…ƒç’‹&#34;, age:800, address:&#39;å®‰å¾½çœå‡¤é˜³&#39;, score: 160},
</span></span><span class=line><span class=cl>	{name: &#34;æœ±æ££&#34;, age:750, address:&#39;æ±Ÿè‹çœå—äº¬å¸‚&#39;, score: 120},
</span></span><span class=line><span class=cl>	{name: &#34;æœ±é«˜ç‚½&#34;, age:700, address:&#39;åŒ—äº¬ç´«ç¦åŸ&#39;, score: 90},
</span></span><span class=line><span class=cl>	{name: &#34;æå˜‰è¯š&#34;, age:38, address:&#39;é¦™æ¸¯xxxè¡—é“&#39;, score: 70},
</span></span><span class=line><span class=cl>	{name: &#34;éº»èŠ±è—¤&#34;, age:28, address:&#39;å¹¿ä¸œçœxxxå¸‚&#39;, score: 80},
</span></span><span class=line><span class=cl>	{name: &#34;å¤§è€ç‹&#34;, age:33, address:&#39;ç«æ˜Ÿç¬¬ä¸€å«æ˜Ÿ&#39;, score: -60},
</span></span><span class=line><span class=cl>	{name: &#34;å’©å’©&#34;, age:33, address:&#39;å¼€æ™®å‹’225æ—è¾¹çš„é»‘æ´&#39;, score: -160}
</span></span><span class=line><span class=cl>])
</span></span></code></pre></div><h4 id=51-æ™®é€šæŸ¥è¯¢>5.1 æ™®é€šæŸ¥è¯¢<a hidden class=anchor aria-hidden=true href=#51-æ™®é€šæŸ¥è¯¢>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>db.c1.find() æŸ¥è¯¢æ‰€æœ‰
</span></span><span class=line><span class=cl>db.c1.find({&#34;å­—æ®µ&#34;:&#34;å›ºå®šå€¼&#34;})  æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰æ•°æ®
</span></span><span class=line><span class=cl>db.c1.findOne({æ¡ä»¶})  æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€æ¡æ•°æ®
</span></span><span class=line><span class=cl>db.getCollection(&#39;c1&#39;).find({&#34;å­—æ®µ1&#34;:&#34;å›ºå®šå€¼1&#34;,&#34;å­—æ®µ2&#34;:&#34;å›ºå®šå€¼2&#34;})
</span></span></code></pre></div><h4 id=52-æ¯”è¾ƒè¿ç®—>5.2 æ¯”è¾ƒè¿ç®—<a hidden class=anchor aria-hidden=true href=#52-æ¯”è¾ƒè¿ç®—>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ç­‰äºï¼š é»˜è®¤æ˜¯ç­‰äºåˆ¤æ–­ï¼Œ $eq
</span></span><span class=line><span class=cl>å°äºï¼š$lt ï¼ˆless thanï¼‰
</span></span><span class=line><span class=cl>å°äºç­‰äºï¼š$lte ï¼ˆless than equalï¼‰
</span></span><span class=line><span class=cl>å¤§äºï¼š$gt ï¼ˆgreater thanï¼‰
</span></span><span class=line><span class=cl>å¤§äºç­‰äºï¼š$gte
</span></span><span class=line><span class=cl>ä¸ç­‰äºï¼š$ne
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>db.stu.find({age:28})  æŸ¥è¯¢å¹´é¾„æ˜¯28å²çš„å­¦ç”Ÿä¿¡æ¯
</span></span><span class=line><span class=cl>db.stu.find({age: {$eq: 28}})  æŸ¥è¯¢å¹´é¾„æ˜¯28å²çš„å­¦ç”Ÿä¿¡æ¯
</span></span><span class=line><span class=cl>db.stu.find({age: {$gt: 30}})   æŸ¥è¯¢å¹´é¾„å¤§äº30å²çš„å­¦ç”Ÿ
</span></span><span class=line><span class=cl>db.stu.find({age: {$lt: 30}})   æŸ¥è¯¢å¹´é¾„å°äº30å²çš„å­¦ç”Ÿ
</span></span><span class=line><span class=cl>db.stu.find({age: {$gte: 38}})  æŸ¥è¯¢å¹´é¾„å¤§äºç­‰äº30å²çš„å­¦ç”Ÿ
</span></span><span class=line><span class=cl>db.stu.find({age: {$lte: 38}})  æŸ¥è¯¢å¹´é¾„å°äºç­‰äº30å²çš„å­¦ç”Ÿ
</span></span><span class=line><span class=cl>db.stu.find({age: {$ne: 38}})   æŸ¥è¯¢å¹´é¾„ä¸ç­‰äº38çš„å­¦ç”Ÿ
</span></span></code></pre></div><h4 id=53-é€»è¾‘è¿ç®—ç¬¦>5.3 é€»è¾‘è¿ç®—ç¬¦<a hidden class=anchor aria-hidden=true href=#53-é€»è¾‘è¿ç®—ç¬¦>#</a></h4><ol><li>and
$and: [æ¡ä»¶1, æ¡ä»¶2, æ¡ä»¶3&mldr;.]</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>æŸ¥è¯¢å¹´é¾„ç­‰äº33, å¹¶ä¸”, åå­—æ˜¯&#34;å¤§è€ç‹&#34;çš„å­¦ç”Ÿä¿¡æ¯
</span></span><span class=line><span class=cl>db.stu.find({$and:[{age: {$eq:33}}, {name:&#39;å¤§è€ç‹&#39;}]})
</span></span></code></pre></div><ol start=2><li>or
$or: [æ¡ä»¶1, æ¡ä»¶2, æ¡ä»¶3]</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>æŸ¥è¯¢åå­—å«&#34;æå˜‰è¯š&#34;çš„, æˆ–è€…, å¹´é¾„è¶…è¿‡100å²çš„äºº
</span></span><span class=line><span class=cl>db.stu.find({$or: [{name: &#39;æå˜‰è¯š&#39;}, {age: {$gt: 100}}]})
</span></span></code></pre></div><ol start=3><li><p>nor</p><p>$nor: [æ¡ä»¶1, æ¡ä»¶2, æ¡ä»¶3]</p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>æŸ¥è¯¢å¹´é¾„ä¸å°äº38å²çš„äºº, åå­—è¿˜ä¸èƒ½æ˜¯æœ±å…ƒç’‹. 
</span></span><span class=line><span class=cl>db.stu.find({$nor: [{age: {$lt: 38}}, {name: &#34;æœ±å…ƒç’‹&#34;}]})
</span></span></code></pre></div><h4 id=54-èŒƒå›´è¿ç®—ç¬¦>5.4 èŒƒå›´è¿ç®—ç¬¦<a hidden class=anchor aria-hidden=true href=#54-èŒƒå›´è¿ç®—ç¬¦>#</a></h4><p>â€‹ ä½¿ç”¨$inï¼Œ $ninåˆ¤æ–­æ•°æ®æ˜¯å¦åœ¨æŸä¸ªæ•°ç»„å†…</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>db.stu.find({age: {$in:[28, 38]}})   å¹´é¾„æ˜¯28æˆ–è€…38çš„äºº
</span></span></code></pre></div><h4 id=55-æ­£åˆ™è¡¨è¾¾å¼>5.5 æ­£åˆ™è¡¨è¾¾å¼<a hidden class=anchor aria-hidden=true href=#55-æ­£åˆ™è¡¨è¾¾å¼>#</a></h4><p>â€‹ ä½¿ç”¨$regexè¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>db.stu.find({address: {$regex:&#39;^åŒ—äº¬&#39;}})  æŸ¥è¯¢åœ°å€æ˜¯åŒ—äº¬çš„äººçš„ä¿¡æ¯
</span></span><span class=line><span class=cl>db.stu.find({address: /^åŒ—äº¬/})  æ•ˆæœä¸€æ ·
</span></span></code></pre></div><h4 id=56-skipå’Œlimit>5.6 skipå’Œlimit<a hidden class=anchor aria-hidden=true href=#56-skipå’Œlimit>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>db.stu.find().skip(3).limit(3)	
</span></span></code></pre></div><p>è·³è¿‡3ä¸ª. æå–3ä¸ª. ç±»ä¼¼limit 3, 3 å¯ä»¥ç”¨æ¥åšåˆ†é¡µ</p><h4 id=57-æ’åº>5.7 æ’åº<a hidden class=anchor aria-hidden=true href=#57-æ’åº>#</a></h4><p>sort({å­—æ®µ:1, å­—æ®µ:-1})</p><p>1è¡¨ç¤ºå‡åº
-1è¡¨ç¤ºé™åº</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>å¯¹æŸ¥è¯¢ç»“æœæ’åº, å…ˆæŒ‰ç…§ageå‡åºæ’åˆ—, ç›¸åŒé¡¹å†æŒ‰ç…§scoreé™åºæ’åˆ—
</span></span><span class=line><span class=cl>db.stu.find().sort({age:1, score: -1})  
</span></span></code></pre></div><h4 id=58-ç»Ÿè®¡æ•°é‡>5.8 ç»Ÿè®¡æ•°é‡<a hidden class=anchor aria-hidden=true href=#58-ç»Ÿè®¡æ•°é‡>#</a></h4><p>count(æ¡ä»¶) æŸ¥è¯¢æ•°é‡</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>db.stu.count({age:33})
</span></span></code></pre></div><h2 id=å››pymongoçš„ä½¿ç”¨>å››ï¼Œpymongoçš„ä½¿ç”¨<a hidden class=anchor aria-hidden=true href=#å››pymongoçš„ä½¿ç”¨>#</a></h2><p>pythonå¤„ç†mongodbé¦–é€‰å°±æ˜¯pymongo. é¦–å…ˆ, å®‰è£…ä¸€ä¸‹è¿™ä¸ªæ¨¡å—</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>pip install pymongo
</span></span></code></pre></div><p>å»ºç«‹è¿æ¥</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pymongo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>conn</span> <span class=o>=</span> <span class=n>pymongo</span><span class=o>.</span><span class=n>MongoClient</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>27017</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># åˆ‡æ¢æ•°æ®åº“</span>
</span></span><span class=line><span class=cl><span class=n>py</span> <span class=o>=</span> <span class=n>conn</span><span class=p>[</span><span class=s1>&#39;python&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=c1># ç™»å½•è¯¥æ•°æ®åº“(éœ€è¦çš„è¯)</span>
</span></span><span class=line><span class=cl><span class=c1>#py.authenticate(&#34;python_admin&#34;, &#39;123456&#39;)</span>
</span></span><span class=line><span class=cl><span class=c1># ç®€å•æ¥ä¸ªæŸ¥è¯¢</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>py</span><span class=p>[</span><span class=s2>&#34;stu&#34;</span><span class=p>]</span><span class=o>.</span><span class=n>find</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>result</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=p>)</span>
</span></span></code></pre></div><p>å®Œæˆå¢åˆ æ”¹æŸ¥</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pymongo</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pymongo</span> <span class=kn>import</span> <span class=n>MongoClient</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#åˆ›å»ºè¿”å›é“¾æ¥å¯¹è±¡</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_db</span><span class=p>(</span><span class=n>database</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>client</span> <span class=o>=</span> <span class=n>MongoClient</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=s2>&#34;localhost&#34;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>27017</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>db</span> <span class=o>=</span> <span class=n>client</span><span class=p>[</span><span class=n>database</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>db</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å¢åˆ æ”¹æŸ¥</span>
</span></span><span class=line><span class=cl><span class=c1># å¢åŠ æ•°æ®</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>add_one</span><span class=p>(</span><span class=n>table</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>db</span> <span class=o>=</span> <span class=n>get_db</span><span class=p>(</span><span class=s2>&#34;python&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>db</span><span class=p>[</span><span class=n>table</span><span class=p>]</span><span class=o>.</span><span class=n>insert_one</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>add_many</span><span class=p>(</span><span class=n>table</span><span class=p>,</span> <span class=n>data_list</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>db</span> <span class=o>=</span> <span class=n>get_db</span><span class=p>(</span><span class=s2>&#34;python&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>db</span><span class=p>[</span><span class=n>table</span><span class=p>]</span><span class=o>.</span><span class=n>insert_many</span><span class=p>(</span><span class=n>data_list</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span><span class=o>.</span><span class=n>inserted_ids</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>upd</span><span class=p>(</span><span class=n>table</span><span class=p>,</span> <span class=n>condition</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span><span class=c1>#conditionæ¡ä»¶</span>
</span></span><span class=line><span class=cl>    <span class=n>db</span> <span class=o>=</span> <span class=n>get_db</span><span class=p>(</span><span class=s2>&#34;python&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>db</span><span class=p>[</span><span class=n>table</span><span class=p>]</span><span class=o>.</span><span class=n>update_many</span><span class=p>(</span><span class=n>condition</span><span class=p>,</span> <span class=p>{</span><span class=s1>&#39;$set&#39;</span><span class=p>:</span><span class=n>data</span><span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=n>table</span><span class=p>,</span> <span class=n>condition</span><span class=p>):</span><span class=c1>#conditionæ¡ä»¶</span>
</span></span><span class=line><span class=cl>    <span class=n>db</span> <span class=o>=</span> <span class=n>get_db</span><span class=p>(</span><span class=s2>&#34;python&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>db</span><span class=p>[</span><span class=n>table</span><span class=p>]</span><span class=o>.</span><span class=n>delete_many</span><span class=p>(</span><span class=n>condition</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># r = add_one(&#34;stu&#34;, {&#34;name&#34;: &#34;è¥¿ç“œ&#34;, &#34;age&#34;:18})</span>
</span></span><span class=line><span class=cl>    <span class=c1># print(r.inserted_id)</span>
</span></span><span class=line><span class=cl>    <span class=c1># r = add_many(&#34;stu&#34;, [{&#34;name&#34;: &#34;å˜å˜&#34;},{&#34;name&#34;: &#34;å’”å’”&#34;}])</span>
</span></span><span class=line><span class=cl>    <span class=c1># print(r)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># result = upd(&#34;stu&#34;, {&#34;name&#34;: &#39;è¥¿ç“œ&#39;}, {&#34;age&#34;: 100})</span>
</span></span><span class=line><span class=cl>    <span class=c1># print(result)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>delete</span><span class=p>(</span><span class=s2>&#34;stu&#34;</span><span class=p>,</span> <span class=p>{</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;å˜å˜&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span></span></code></pre></div></div><div class=post-reward><div style=padding:0;margin:0;width:100%;font-size:16px;text-align:center><div id=QR style=opacity:0><div id=wechat style=display:inline-block><a class=fancybox rel=group><img id=wechat_qr src=https://canw0916.github.io/img/wxPay.jpg alt=wechat_pay></a><p>å¾®ä¿¡</p></div><div id=alipay style=display:inline-block><a class=fancybox rel=group><img id=alipay_qr src=https://canw0916.github.io/img/aliPay.jpg alt=alipay></a><p>æ”¯ä»˜å®</p></div></div><button id=rewardButton onclick='var qr=document.getElementById("QR");qr.style.opacity==="0"?qr.style.opacity="1":qr.style.opacity="0"'>
<span>ğŸ§§ é¼“åŠ±</span></button></div></div><footer class=post-footer><nav class=paginav><a class=prev href=https://canw0916.github.io/en/posts/tech/scrapy%E6%A1%86%E6%9E%B6/><span class=title>Â« ä¸Šä¸€é¡µ</span><br><span>Scrapyæ¡†æ¶</span>
</a><a class=next href=https://canw0916.github.io/en/posts/tech/redis/><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>Redis</span></a></nav></footer></div><div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>ğŸ’¬è¯„è®º</span><hr></div><div id=tcomment></div><script src=https://utteranc.es/client.js repo=canw0916/utterances_comments issue-term=title theme=photon-dark crossorigin=anonymous async></script></div></article></main><script async src=https://unpkg.com/mermaid@8.8.1/dist/mermaid.min.js></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><footer class=footer><span>Copyright
&copy;
2023-2024
<a href=https://canw0916.github.io/en/ style=color:#939393>Felix's Blog</a>
All Rights Reserved
</span><a href=https://beian.miit.gov.cn/ target=_blank style=color:#939393></a>&nbsp;
<span><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=null" style=display:inline-block;text-decoration:none;height:20px;color:#939393><img src style="float:left;margin:0 5px 0 0">
</a></span><span id=busuanzi_container><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css>æ€»è®¿å®¢æ•°: <span id=busuanzi_value_site_uv></span>
æ€»è®¿é—®é‡: <span id=busuanzi_value_site_pv></span></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
<span id=read_progress></span>
</span></a><script>document.addEventListener("scroll",function(){const t=document.getElementById("read_progress"),n=document.documentElement.scrollHeight,s=document.documentElement.clientHeight,o=document.documentElement.scrollTop||document.body.scrollTop;t.innerText=((o/(n-s)).toFixed(2)*100).toFixed(0)})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>let mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>400||document.documentElement.scrollTop>400?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="ğŸ“„å¤åˆ¶";function s(){t.innerText="ğŸ‘ŒğŸ»å·²å¤åˆ¶!",setTimeout(()=>{t.innerText="ğŸ“„å¤åˆ¶"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){let t=e.textContent+`
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€ŒFelix's Blogã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚
åŸæ–‡é“¾æ¥ï¼š`+location.href;navigator.clipboard.writeText(t),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild===n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName==="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script src=https://code.jquery.com/jquery-1.12.4.min.js></script><script>$("code[class^=language] ").on("mouseover",function(){this.clientWidth<this.scrollWidth&&$(this).css("width","135%")}).on("mouseout",function(){$(this).css("width","100%")})</script></body></html>