<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>文件操作 | Felix's Blog</title>
<meta name=keywords content><meta name=description content="文件操作
引言

到目前为止，我们做的一切操作，都是在内存里进行的，这样会有什么问题吗？如果一旦断电或发生意外关机了，那么你辛勤的工作成果将瞬间消失。是不是感觉事还挺大的呢？现在你是否感觉你的编程技巧还缺了点什么呢？是的，我们还缺少将数据在本地文件系统进行持久化的能力，白话讲就是文件的读写能力。

文件打开


Python内置了一个open()方法，用于对文件进行读写操作。使用open()方法操作文件就像把大象塞进冰箱一样，可以分三步走，一是打开文件，二是操作文件，三是关闭文件。"><meta name=author content="
作者:Felix"><link rel=canonical href=https://canw0916.github.io/en/posts/tech/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/><link crossorigin=anonymous href=/assets/css/stylesheet.a7d877c95a8fd8f651ae0a99e2d0566db6cd06091905d495b3f79ebd3536ed91.css integrity="sha256-p9h3yVqP2PZRrgqZ4tBWbbbNBgkZBdSVs/eevTU27ZE=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://canw0916.github.io/img/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://canw0916.github.io/img/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://canw0916.github.io/img/favicon-32x32.png><link rel=apple-touch-icon href=https://canw0916.github.io/img/apple-touch-icon.png><link rel=mask-icon href=https://canw0916.github.io/img/android-chrome-512x512.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://canw0916.github.io/en/posts/tech/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-7ENSZ7BS0C"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-7ENSZ7BS0C")}</script><meta property="og:title" content="文件操作"><meta property="og:description" content="文件操作
引言

到目前为止，我们做的一切操作，都是在内存里进行的，这样会有什么问题吗？如果一旦断电或发生意外关机了，那么你辛勤的工作成果将瞬间消失。是不是感觉事还挺大的呢？现在你是否感觉你的编程技巧还缺了点什么呢？是的，我们还缺少将数据在本地文件系统进行持久化的能力，白话讲就是文件的读写能力。

文件打开


Python内置了一个open()方法，用于对文件进行读写操作。使用open()方法操作文件就像把大象塞进冰箱一样，可以分三步走，一是打开文件，二是操作文件，三是关闭文件。"><meta property="og:type" content="article"><meta property="og:url" content="https://canw0916.github.io/en/posts/tech/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-10T10:59:01+08:00"><meta property="article:modified_time" content="2023-02-10T10:59:01+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="文件操作"><meta name=twitter:description content="文件操作
引言

到目前为止，我们做的一切操作，都是在内存里进行的，这样会有什么问题吗？如果一旦断电或发生意外关机了，那么你辛勤的工作成果将瞬间消失。是不是感觉事还挺大的呢？现在你是否感觉你的编程技巧还缺了点什么呢？是的，我们还缺少将数据在本地文件系统进行持久化的能力，白话讲就是文件的读写能力。

文件打开


Python内置了一个open()方法，用于对文件进行读写操作。使用open()方法操作文件就像把大象塞进冰箱一样，可以分三步走，一是打开文件，二是操作文件，三是关闭文件。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"📚文章","item":"https://canw0916.github.io/en/posts/"},{"@type":"ListItem","position":2,"name":"🚀 技术","item":"https://canw0916.github.io/en/posts/tech/"},{"@type":"ListItem","position":3,"name":"文件操作","item":"https://canw0916.github.io/en/posts/tech/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"文件操作","name":"文件操作","description":"文件操作 引言 到目前为止，我们做的一切操作，都是在内存里进行的，这样会有什么问题吗？如果一旦断电或发生意外关机了，那么你辛勤的工作成果将瞬间消失。是不是感觉事还挺大的呢？现在你是否感觉你的编程技巧还缺了点什么呢？是的，我们还缺少将数据在本地文件系统进行持久化的能力，白话讲就是文件的读写能力。 文件打开 Python内置了一个open()方法，用于对文件进行读写操作。使用open()方法操作文件就像把大象塞进冰箱一样，可以分三步走，一是打开文件，二是操作文件，三是关闭文件。\n","keywords":[""],"articleBody":"文件操作 引言 到目前为止，我们做的一切操作，都是在内存里进行的，这样会有什么问题吗？如果一旦断电或发生意外关机了，那么你辛勤的工作成果将瞬间消失。是不是感觉事还挺大的呢？现在你是否感觉你的编程技巧还缺了点什么呢？是的，我们还缺少将数据在本地文件系统进行持久化的能力，白话讲就是文件的读写能力。 文件打开 Python内置了一个open()方法，用于对文件进行读写操作。使用open()方法操作文件就像把大象塞进冰箱一样，可以分三步走，一是打开文件，二是操作文件，三是关闭文件。\n文件句柄/文件描述符\nopen()方法的返回值是一个file对象，可以将它赋值给一个变量，这个变量就是所谓的文件句柄。 file对象： 可以调用read()和write()方法，对打开的文件进行读写操作。 open方法的语法\nf = open(filename, mode) filename： 一个包含了你要访问的文件名称的字符串值，通常是一个文件路径。 文件路径作用：定位到指定文件 mode： 打开文件的模式，有很多种，默认是只读方式r。 文件打开的模式：\n常规文件打开模式操作演示\nb模式： 二进制模式，通常用来读取图片、视频等二进制文件。注意，它在读写的时候是以bytes类型读写的，因此获得的是一个bytes对象而不是字符串。在这个读写过程中，需要自己指定编码格式。在使用带b的模式时一定要注意传入的数据类型，确保为bytes类型。 +模式： 对于w+模式，在读写之前都会清空文件的内容，建议不要使用！ 对于a+模式，永远只能在文件的末尾写入，(常用)！ 对于r+模式，也就是读写模式，配合seek()和tell()方法，可以实现更多操作。 编码问题\n要读取非UTF-8编码的文件，需要给open()函数传入encoding参数，例如，读取GBK编码的文件 遇到有些编码不规范的文件，可能会抛出UnicodeDecodeError异常，这表示在文件中可能夹杂了一些非法编码的字符。遇到这种情况，可以提供errors=’ignore‘参数，表示如果遇到编码错误后如何处理。 文件对象操作 每当我们用open方法打开一个文件时，将返回一个文件对象。这个对象内置了很多操作方法。\nf.read(size) #size读取数据的个数\n读取一定大小的数据, 然后作为字符串或字节对象返回。size是一个可选的数字类型的参数，用于指定读取的数据量。当size被忽略了或者为负值，那么该文件的所有内容都将被读取并且返回。 注意： 如果文件体积较大，请不要使用read()方法一次性读入内存，而是read(512)这种一点一点的读。 f.readline()\n从文件中读取一行n内容。换行符为’\\n’。如果返回一个空字符串，说明已经已经读取到最后一行。这种方法，通常是读一行，处理一行，并且不能回头，只能前进，读过的行不能再读了。 f.readlines()\n将文件中所有的行，一行一行全部读入一个列表内，按顺序一个一个作为列表的元素，并返回这个列表。readlines方法会一次性将文件全部读入内存，所以也存在一定的风险。但是它有个好处，每行都保存在列表里，可以随意存取。 #需求：读取文件中的数据 fp = open('./test.txt','r') text = fp.read(10) #读取指定字节的数据 text_line = fp.readline() #一次读取一行数据 text_lines = fp.readlines() #读取多行数据，返回一个列表 print(text_lines) fp.close() 总结：\n几种不同的读取和遍历文件的方法比较：如果文件很小，read()一次性读取最方便；如果不能确定文件大小，反复调用read(size)比较保险；如果是配置文件，调用readlines()最方便。普通情况，使用for循环更好，速度更快。 f.write()\n将字符串或bytes类型的数据写入文件内。write()动作可以多次重复进行，其实都是在内存中的操作，并不会立刻写回硬盘，直到执行close()方法后，才会将所有的写入操作反映到硬盘上。在这过程中，如果想将内存中的修改，立刻保存到硬盘上，可以使用f.flush()方法。\nfp = open('./test123.txt','w') fp.write('hello bobo') fp.close() #将文件内容清空，在写入新数据 fp = open('./test123.txt','a') fp.write('hello bobo') fp.close() #在文件数据末尾追加数据 fp.tell()（了解）\n返回文件读写指针当前所处的位置,它是从文件开头开始算起的字节数。一定要注意了，是字节数，不是字符数。\nfp = open('./test123.txt','w') # fp.write('hello bobo') print(fp.tell()) fp.close() fp.seek()（了解）\n如果要改变文件指针的位置, 可以使用fp.seek(offset, from_what)方法。seek()经常和tell()方法配合使用。\nfrom_what\n如果是0表示从文件开头计算 如果是1表示从文件读写指针的当前位置开始计算 2表示从文件的结尾开始计算，默认为0 offset：表示偏移量\nseek(x,0) ： 从起始位置即文件首行首字符开始移动 x 个字节 seek(x,1) ： 表示从当前位置往后移动x个字节 seek(-x,2)：表示从文件的结尾往前移动x个字节 fp = open('./test.txt','r') fp.seek(9,0) text = fp.read(5) print(text) fp.close() f.close()\n关闭文件对象。当处理完一个文件后，调用f.close()来关闭文件并释放系统的资源。文件关闭后，如果尝试再次调用该文件对象，则会抛出异常。忘记调用close()的后果是数据可能只写了一部分到磁盘，剩下的丢失了，或者更糟糕的结果。也就是说大象塞进冰箱后，一定不要忘记关上冰箱的门。 with关键字 with关键字用于Python的上下文管理器机制。为了防止诸如open这一类文件打开方法在操作过程出现异常或错误，或者最后忘了执行close方法，文件非正常关闭等可能导致文件泄露、破坏的问题。Python提供了with这个上下文管理器机制，保证文件会被正常关闭。在它的管理下，不需要再写close语句。注意缩进。\nwith open('./test123.txt','r') as fp: #fp = open() text = fp.read(5) print(text) #上下两组代码功效一样 fp = open('./test123.txt','r') text = fp.read(5) print(text) fp.close() 对图片，音频，视频，压缩包等二进制的数据进行文件读写操作\n实现一个图片文件的拷贝\n1.打开一个图片文件，读取其二进制的数据\n2.将读取到的数据写入到另一个路径下\nfp = open('bobo.jpg','rb') #r是读取文本数据，rb是读取二进制数据 img_data = fp.read() #读取到了图片的二进制数据 #将图片的二进制数据写到另一个路径下 fp1 = open('/Users/zhangxiaobo/Desktop/bobo123.jpg','wb') fp1.write(img_data) fp.close() fp1.close() 练习：登录注册 ''' 需求：注册功能 1.让用户录入用户名，密码，重复密码，手机号基本信息 2.检测两次输入的密码是否一致，一致则注册成功，否则注册失败 3.注册成功后需要将用户信息存储到文件中进行保存 ''' def regist(): #让用户录入用户名，密码，重复密码，手机号基本信息 print('------欢迎来到注册页面--------') username = input('输入注册的账号：') password = input('输入注册的密码：') repeatpwd = input('重复密码:') phonenum = input('手机号：') #检测两次输入的密码是否一致，一致则注册成功，否则注册失败 if password == repeatpwd:#==可以判断两个字符串是否一样： #两次密码一致：注册成功，将用户信息写入到文件保存 with open('userData.txt','a+') as fp: #\\n表示回车换行的意思 fp.write(username+'-'+password+'-'+phonenum+'\\n') print('恭喜您注册成功，账号为：',username) else:#两次密码不一致，注册失败 print('两次密码不一致，注册失败，请重新注册！') ''' 登录功能： 1.让用户录入用户名，密码 2.验证登录状态 ''' def login(): #1.让用户录入用户名，密码 print('------欢迎来到登录页面------') username = input('请输入登录的账号：') password = input('请输入登录的密码：') #2,验证登录状态 #读取文件中的用户信息的数据 with open('userData.txt','r') as fp: #[bobo-123-222, jay-456-666] user_data_list = fp.readlines() #读取每一行数据，返回的是一个列表 for data in user_data_list: data = data.strip()#取出字符串中的回车 #切分字符串，取出用户名和密码即可 #s_data = [bobo,123,222] s_data = data.split('-') #从文件中获取的用户名和密码 f_username = s_data[0] f_password = s_data[1] #判断登录状态 flat = 0 #如果flat=0表示登录失败，为1表示登录成功 if username == f_username and password == f_password: flat = 1 #表示登录成功 break if flat == 1: print('登录成功') else: print('登录失败') login() # regist()#调用该函数完成注册功能 管理系统完整实现(自己拓展:了解)： import time def regist(): print('\\n\\n欢迎来到注册页面') print('-------------') username = input('enter username:') password = input('enter password:') repeatpwd = input('repeat enter password:') email = input('enter email:') #判定用户的注册状态 if password == repeatpwd: isHave = False#用户名是否重复的状态显示，isHave==True表示用户名重复 with open('./userData.txt','r+') as fp: #bobo-123-123@qq.com #jay-456-456@qq.com #读取文件中所有注册用户的用户名 user_data_list = fp.readlines() for user_data in user_data_list: userName = user_data.split('-')[0] if username == userName:#用户名重复 isHave = True if isHave == False: fp.write(username+'-'+password+'-'+email+'\\n') print('注册成功,三秒后自动跳转到登录页面......') time.sleep(3) #暂停三秒 login() else: print('注册失败，%s用户名已被占用！'%username) print('是否重新注册？y/n') c = input('enter your choose:') if c == 'y' or c == 'Y': regist() else: exit() else: print('两次密码不一致，注册失败！') def insertBook(): title = input('插入图书的名称:') publish_date = input('插入图书的出版时间:') author = input('插入图书的作者:') publish = input('插入图书的出版社:') with open('./bookData.txt','a') as fp: fp.write(title+'-'+publish_date+'-'+author+'-'+publish+'\\n') print(title,'插入成功！') print('是否继续插入？y/n') c = input('enter your choose:') if c == 'y' or c == 'Y': insertBook() else: manageView() def showBooks(): print('\\n\\n') with open('./bookData.txt','r') as fp: book_list = fp.readlines() for book in book_list: print(book) c = input('返回主页面请按1:') if c == '1': manageView() def deleteBook(): #指定一个删除的条件 name = input('请输入即将要删除的图书名称:') with open('./bookData.txt','r') as fp: book_list = fp.readlines() for book in book_list: if name in book: book_list.remove(book) fp = open('./bookData.txt','w') for book in book_list: fp.write(book) fp.close() print(name,'被成功删除！3秒后自动跳转会主页面......') time.sleep(3) manageView() def updateBook(): name = input('请输入即将要修改图书的名字:') with open('./bookData.txt','r') as fp: book_list = fp.readlines() for book in book_list: if name in book: old_author = book.split('-')[2] new_author = input('请输入新的作者名称:') new_book = book.replace(old_author,new_author) book_list.append(new_book) book_list.remove(book) break fp = open('./bookData.txt','w') for book in book_list: fp.write(book) print('图书修改成功！等待3秒返回主页面......') fp.close() time.sleep(3) manageView() def manageView(): print('\\n\\n欢迎来到管理系统') print('1.查看所有图书\\n2.插入图书\\n3.删除图书\\n4.修改图书\\n5.返回主页面\\n') choose = input('enter your choose:') if choose == '1': showBooks() elif choose == '2': insertBook() elif choose == '3': deleteBook() elif choose == '4': updateBook() else: main_view() def login(): print('\\n\\n欢迎来到登录页面') print('-------------') username = input('enter username:') password = input('enter password:') #判定登录状态 login_state = False with open('./userData.txt','r') as fp: user_data_list = fp.readlines() for user_data in user_data_list: un = user_data.split('-')[0] pw = user_data.split('-')[1] if username == un and password == pw: login_state = True break if login_state == True: manageView() else: print('登录失败,是否返回主页面？y/n') c = input('enter your choose:') if c == 'y' or c == 'Y': main_view() else: exit() def findPwd(): un = input('enter your username:') em = input('enter your email') with open('./userData.txt','r') as fp: isFind = False user_data_list = fp.readlines() for user_data in user_data_list: username = user_data.split('-')[0] email = user_data.split('-')[2] #将email中的回车去掉 email = email.strip() if username == un and email == em: password = user_data.split('-')[1] print('找回的密码为：',password) isFind = True break if isFind == False: print('密码找回失败，用户名和邮箱不匹配！') def main_view(): print('欢迎来到xxx管理系统') print('----------------') print('1.登录\\n2.注册\\n3.找回密码\\n4.退出') choose = input('请选择功能:') if choose == '1': login() elif choose == '2': regist() elif choose == '3': findPwd() elif choose == '4': return #退出整个程序 else: print('输入有误，程序退出！') main_view() ","wordCount":"4573","inLanguage":"en","datePublished":"2023-02-10T10:59:01+08:00","dateModified":"2023-02-10T10:59:01+08:00","author":[{"@type":"Person","name":"Felix"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://canw0916.github.io/en/posts/tech/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"},"publisher":{"@type":"Organization","name":"Felix's Blog","logo":{"@type":"ImageObject","url":"https://canw0916.github.io/img/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><script async src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script><header class=header><nav class=nav><div class=logo><a href=https://canw0916.github.io/en/ accesskey=h title="Felix's Blog (Alt + H)"><img src=https://canw0916.github.io/img/android-chrome-512x512.png alt=logo aria-label=logo height=35>Felix's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://canw0916.github.io/en/search title="🔍 搜索 (Alt + /)" accesskey=/><span>🔍 搜索</span></a></li><li><a href=https://canw0916.github.io/en/ title="🏠 主页"><span>🏠 主页</span></a></li><li><a href=https://canw0916.github.io/en/posts title="📚 文章"><span>📚 文章</span></a></li><li><a href=https://canw0916.github.io/en/tags title="💡 标签"><span>💡 标签</span></a></li><li><a href=https://canw0916.github.io/en/archives/ title="⏱️ 时间轴"><span>⏱️ 时间轴</span></a></li><li><a href=https://canw0916.github.io/en/about title="👦 关于"><span>👦 关于</span></a></li><li><a href=https://canw0916.github.io/en/links title="😺 友链"><span>😺 友链</span></a></li></ul></nav></header><main class="main page"><article class=post-single><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://canw0916.github.io/en/>🏠主页</a>&nbsp;»&nbsp;<a href=https://canw0916.github.io/en/posts/>📚文章</a>&nbsp;»&nbsp;<a href=https://canw0916.github.io/en/posts/tech/>🚀 技术</a></div><h1 class=post-title>文件操作</h1><div class=post-meta>创建:2023-02-10|字数:4573字|时长: 10分钟|
作者:Felix
&nbsp;&nbsp;标签: &nbsp;<ul class=post-tags-meta><a href=https://canw0916.github.io/en/tags/python/>Python</a></ul><span id=busuanzi_container_page_pv>&nbsp;| 访问: <span id=busuanzi_value_page_pv></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>文章目录</span></summary><div class=inner><ul><li><a href=#%e6%96%87%e4%bb%b6%e6%93%8d%e4%bd%9c aria-label=文件操作>文件操作</a><ul><li><a href=#%e5%bc%95%e8%a8%80 aria-label=引言>引言</a></li><li><a href=#%e6%96%87%e4%bb%b6%e6%89%93%e5%bc%80 aria-label=文件打开>文件打开</a></li><li><a href=#%e6%96%87%e4%bb%b6%e5%af%b9%e8%b1%a1%e6%93%8d%e4%bd%9c aria-label=文件对象操作>文件对象操作</a></li><li><a href=#with%e5%85%b3%e9%94%ae%e5%ad%97 aria-label=with关键字>with关键字</a></li></ul></li><li><a href=#%e7%bb%83%e4%b9%a0%e7%99%bb%e5%bd%95%e6%b3%a8%e5%86%8c aria-label=练习：登录注册>练习：登录注册</a></li><li><a href=#%e7%ae%a1%e7%90%86%e7%b3%bb%e7%bb%9f%e5%ae%8c%e6%95%b4%e5%ae%9e%e7%8e%b0%e8%87%aa%e5%b7%b1%e6%8b%93%e5%b1%95%e4%ba%86%e8%a7%a3 aria-label=管理系统完整实现(自己拓展:了解)：>管理系统完整实现(自己拓展:了解)：</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h3 id=文件操作>文件操作<a hidden class=anchor aria-hidden=true href=#文件操作>#</a></h3><h4 id=引言>引言<a hidden class=anchor aria-hidden=true href=#引言>#</a></h4><ul><li>到目前为止，我们做的一切操作，都是在内存里进行的，这样会有什么问题吗？如果一旦断电或发生意外关机了，那么你辛勤的工作成果将瞬间消失。是不是感觉事还挺大的呢？现在你是否感觉你的编程技巧还缺了点什么呢？是的，我们还缺少将数据在本地文件系统进行持久化的能力，白话讲就是文件的读写能力。</li></ul><h4 id=文件打开>文件打开<a hidden class=anchor aria-hidden=true href=#文件打开>#</a></h4><ul><li><p>Python内置了一个open()方法，用于对文件进行读写操作。使用open()方法操作文件就像把大象塞进冰箱一样，可以分三步走，一是打开文件，二是操作文件，三是关闭文件。</p></li><li><p>文件句柄/文件描述符</p><ul><li>open()方法的返回值是一个file对象，可以将它赋值给一个变量，这个变量就是所谓的文件句柄。</li><li>file对象：<ul><li>可以调用read()和write()方法，对打开的文件进行读写操作。</li></ul></li></ul></li><li><p>open方法的语法</p><ul><li>f = open(filename, mode)<ul><li>filename：<ul><li>一个包含了你要访问的文件名称的字符串值，通常是一个文件路径。</li><li>文件路径作用：定位到指定文件</li></ul></li><li>mode：<ul><li>打开文件的模式，有很多种，默认是只读方式r。</li></ul></li></ul></li></ul></li><li><p>文件打开的模式：</p></li><li><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/canw0916/picgo_imgs@main/blog/45.png alt=45></p></li><li><p>常规文件打开模式操作演示</p><ul><li>b模式：<ul><li>二进制模式，通常用来读取图片、视频等二进制文件。注意，它在读写的时候是以bytes类型读写的，因此获得的是一个bytes对象而不是字符串。在这个读写过程中，需要自己指定编码格式。在使用带b的模式时一定要注意传入的数据类型，确保为bytes类型。</li></ul></li><li>+模式：<ul><li>对于w+模式，在读写之前都会清空文件的内容，建议不要使用！</li><li>对于a+模式，永远只能在文件的末尾写入，(常用)！</li><li>对于r+模式，也就是读写模式，配合seek()和tell()方法，可以实现更多操作。</li></ul></li></ul></li><li><p>编码问题</p><ul><li>要读取非UTF-8编码的文件，需要给open()函数传入encoding参数，例如，读取GBK编码的文件</li><li>遇到有些编码不规范的文件，可能会抛出UnicodeDecodeError异常，这表示在文件中可能夹杂了一些非法编码的字符。遇到这种情况，可以提供errors=’ignore‘参数，表示如果遇到编码错误后如何处理。</li></ul></li></ul><h4 id=文件对象操作>文件对象操作<a hidden class=anchor aria-hidden=true href=#文件对象操作>#</a></h4><ul><li><p>每当我们用open方法打开一个文件时，将返回一个文件对象。这个对象内置了很多操作方法。</p></li><li><p>f.read(size) #size读取数据的个数</p><ul><li>读取一定大小的数据, 然后作为字符串或字节对象返回。size是一个可选的数字类型的参数，用于指定读取的数据量。当size被忽略了或者为负值，那么该文件的所有内容都将被读取并且返回。</li><li>注意：<ul><li>如果文件体积较大，请不要使用read()方法一次性读入内存，而是read(512)这种一点一点的读。</li></ul></li></ul></li><li><p>f.readline()</p><ul><li>从文件中读取一行n内容。换行符为&rsquo;\n&rsquo;。如果返回一个空字符串，说明已经已经读取到最后一行。这种方法，通常是读一行，处理一行，并且不能回头，只能前进，读过的行不能再读了。</li></ul></li><li><p>f.readlines()</p><ul><li>将文件中所有的行，一行一行全部读入一个列表内，按顺序一个一个作为列表的元素，并返回这个列表。readlines方法会一次性将文件全部读入内存，所以也存在一定的风险。但是它有个好处，每行都保存在列表里，可以随意存取。</li></ul></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>#需求：读取文件中的数据</span>
</span></span><span class=line><span class=cl><span class=n>fp</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./test.txt&#39;</span><span class=p>,</span><span class=s1>&#39;r&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>text</span> <span class=o>=</span> <span class=n>fp</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span> <span class=c1>#读取指定字节的数据</span>
</span></span><span class=line><span class=cl><span class=n>text_line</span> <span class=o>=</span> <span class=n>fp</span><span class=o>.</span><span class=n>readline</span><span class=p>()</span> <span class=c1>#一次读取一行数据</span>
</span></span><span class=line><span class=cl><span class=n>text_lines</span> <span class=o>=</span> <span class=n>fp</span><span class=o>.</span><span class=n>readlines</span><span class=p>()</span> <span class=c1>#读取多行数据，返回一个列表</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>text_lines</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>fp</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></div></li><li><p>总结：</p><ul><li>几种不同的读取和遍历文件的方法比较：如果文件很小，read()一次性读取最方便；如果不能确定文件大小，反复调用read(size)比较保险；如果是配置文件，调用readlines()最方便。普通情况，使用for循环更好，速度更快。</li></ul></li><li><p>f.write()</p><ul><li><p>将字符串或bytes类型的数据写入文件内。write()动作可以多次重复进行，其实都是在内存中的操作，并不会立刻写回硬盘，直到执行close()方法后，才会将所有的写入操作反映到硬盘上。在这过程中，如果想将内存中的修改，立刻保存到硬盘上，可以使用f.flush()方法。</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>fp</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./test123.txt&#39;</span><span class=p>,</span><span class=s1>&#39;w&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>fp</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s1>&#39;hello bobo&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>fp</span><span class=o>.</span><span class=n>close</span><span class=p>()</span> <span class=c1>#将文件内容清空，在写入新数据</span>
</span></span></code></pre></div></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>fp</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./test123.txt&#39;</span><span class=p>,</span><span class=s1>&#39;a&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>fp</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s1>&#39;hello bobo&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>fp</span><span class=o>.</span><span class=n>close</span><span class=p>()</span> <span class=c1>#在文件数据末尾追加数据</span>
</span></span></code></pre></div></li></ul></li><li><p>fp.tell()（了解）</p><ul><li><p>返回文件读写指针当前所处的位置,它是从文件开头开始算起的字节数。一定要注意了，是字节数，不是字符数。</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>fp</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./test123.txt&#39;</span><span class=p>,</span><span class=s1>&#39;w&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># fp.write(&#39;hello bobo&#39;)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>fp</span><span class=o>.</span><span class=n>tell</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>fp</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></div></li></ul></li><li><p>fp.seek()（了解）</p><ul><li><p>如果要改变文件指针的位置, 可以使用fp.seek(offset, from_what)方法。seek()经常和tell()方法配合使用。</p></li><li><p>from_what</p><ul><li>如果是0表示从文件开头计算</li><li>如果是1表示从文件读写指针的当前位置开始计算</li><li>2表示从文件的结尾开始计算，默认为0</li></ul></li><li><p>offset：表示偏移量</p><ul><li>seek(x,0) ： 从起始位置即文件首行首字符开始移动 x 个字节</li><li>seek(x,1) ： 表示从当前位置往后移动x个字节</li><li>seek(-x,2)：表示从文件的结尾往前移动x个字节</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>fp</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./test.txt&#39;</span><span class=p>,</span><span class=s1>&#39;r&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>fp</span><span class=o>.</span><span class=n>seek</span><span class=p>(</span><span class=mi>9</span><span class=p>,</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>text</span> <span class=o>=</span> <span class=n>fp</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>fp</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></div></li></ul></li><li><p>f.close()</p><ul><li>关闭文件对象。当处理完一个文件后，调用f.close()来关闭文件并释放系统的资源。文件关闭后，如果尝试再次调用该文件对象，则会抛出异常。忘记调用close()的后果是数据可能只写了一部分到磁盘，剩下的丢失了，或者更糟糕的结果。也就是说大象塞进冰箱后，一定不要忘记关上冰箱的门。</li></ul></li></ul><h4 id=with关键字>with关键字<a hidden class=anchor aria-hidden=true href=#with关键字>#</a></h4><p>with关键字用于Python的上下文管理器机制。为了防止诸如open这一类文件打开方法在操作过程出现异常或错误，或者最后忘了执行close方法，文件非正常关闭等可能导致文件泄露、破坏的问题。Python提供了with这个上下文管理器机制，保证文件会被正常关闭。在它的管理下，不需要再写close语句。注意缩进。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./test123.txt&#39;</span><span class=p>,</span><span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>fp</span><span class=p>:</span> <span class=c1>#fp = open()</span>
</span></span><span class=line><span class=cl>    <span class=n>text</span> <span class=o>=</span> <span class=n>fp</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#上下两组代码功效一样</span>
</span></span><span class=line><span class=cl><span class=n>fp</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./test123.txt&#39;</span><span class=p>,</span><span class=s1>&#39;r&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>text</span> <span class=o>=</span> <span class=n>fp</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>fp</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></div><ul><li><p>对图片，音频，视频，压缩包等二进制的数据进行文件读写操作</p><ul><li><p>实现一个图片文件的拷贝</p><ul><li><p>1.打开一个图片文件，读取其二进制的数据</p></li><li><p>2.将读取到的数据写入到另一个路径下</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>fp</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;bobo.jpg&#39;</span><span class=p>,</span><span class=s1>&#39;rb&#39;</span><span class=p>)</span> <span class=c1>#r是读取文本数据，rb是读取二进制数据</span>
</span></span><span class=line><span class=cl><span class=n>img_data</span> <span class=o>=</span> <span class=n>fp</span><span class=o>.</span><span class=n>read</span><span class=p>()</span> <span class=c1>#读取到了图片的二进制数据</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#将图片的二进制数据写到另一个路径下</span>
</span></span><span class=line><span class=cl><span class=n>fp1</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;/Users/zhangxiaobo/Desktop/bobo123.jpg&#39;</span><span class=p>,</span><span class=s1>&#39;wb&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>fp1</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>img_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fp</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>fp1</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></div></li></ul></li></ul></li></ul><h3 id=练习登录注册>练习：登录注册<a hidden class=anchor aria-hidden=true href=#练习登录注册>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;
</span></span></span><span class=line><span class=cl><span class=s1>需求：注册功能
</span></span></span><span class=line><span class=cl><span class=s1>    1.让用户录入用户名，密码，重复密码，手机号基本信息
</span></span></span><span class=line><span class=cl><span class=s1>    2.检测两次输入的密码是否一致，一致则注册成功，否则注册失败
</span></span></span><span class=line><span class=cl><span class=s1>    3.注册成功后需要将用户信息存储到文件中进行保存
</span></span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>regist</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1>#让用户录入用户名，密码，重复密码，手机号基本信息</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;------欢迎来到注册页面--------&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>username</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;输入注册的账号：&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>password</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;输入注册的密码：&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>repeatpwd</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;重复密码:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>phonenum</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;手机号：&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>#检测两次输入的密码是否一致，一致则注册成功，否则注册失败</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>password</span> <span class=o>==</span> <span class=n>repeatpwd</span><span class=p>:</span><span class=c1>#==可以判断两个字符串是否一样：</span>
</span></span><span class=line><span class=cl>        <span class=c1>#两次密码一致：注册成功，将用户信息写入到文件保存</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;userData.txt&#39;</span><span class=p>,</span><span class=s1>&#39;a+&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>fp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1>#\n表示回车换行的意思</span>
</span></span><span class=line><span class=cl>            <span class=n>fp</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>username</span><span class=o>+</span><span class=s1>&#39;-&#39;</span><span class=o>+</span><span class=n>password</span><span class=o>+</span><span class=s1>&#39;-&#39;</span><span class=o>+</span><span class=n>phonenum</span><span class=o>+</span><span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;恭喜您注册成功，账号为：&#39;</span><span class=p>,</span><span class=n>username</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span><span class=c1>#两次密码不一致，注册失败</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;两次密码不一致，注册失败，请重新注册！&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;
</span></span></span><span class=line><span class=cl><span class=s1>登录功能：
</span></span></span><span class=line><span class=cl><span class=s1>    1.让用户录入用户名，密码
</span></span></span><span class=line><span class=cl><span class=s1>    2.验证登录状态
</span></span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>login</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1>#1.让用户录入用户名，密码</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;------欢迎来到登录页面------&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>username</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;请输入登录的账号：&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>password</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;请输入登录的密码：&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>#2,验证登录状态</span>
</span></span><span class=line><span class=cl>    <span class=c1>#读取文件中的用户信息的数据</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;userData.txt&#39;</span><span class=p>,</span><span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>fp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1>#[bobo-123-222, jay-456-666]</span>
</span></span><span class=line><span class=cl>        <span class=n>user_data_list</span> <span class=o>=</span> <span class=n>fp</span><span class=o>.</span><span class=n>readlines</span><span class=p>()</span> <span class=c1>#读取每一行数据，返回的是一个列表</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>data</span> <span class=ow>in</span> <span class=n>user_data_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>data</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span><span class=c1>#取出字符串中的回车</span>
</span></span><span class=line><span class=cl>            <span class=c1>#切分字符串，取出用户名和密码即可</span>
</span></span><span class=line><span class=cl>            <span class=c1>#s_data = [bobo,123,222]</span>
</span></span><span class=line><span class=cl>            <span class=n>s_data</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;-&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=c1>#从文件中获取的用户名和密码</span>
</span></span><span class=line><span class=cl>            <span class=n>f_username</span> <span class=o>=</span> <span class=n>s_data</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>f_password</span> <span class=o>=</span> <span class=n>s_data</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=c1>#判断登录状态</span>
</span></span><span class=line><span class=cl>            <span class=n>flat</span> <span class=o>=</span> <span class=mi>0</span> <span class=c1>#如果flat=0表示登录失败，为1表示登录成功</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>username</span> <span class=o>==</span> <span class=n>f_username</span> <span class=ow>and</span> <span class=n>password</span> <span class=o>==</span> <span class=n>f_password</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>flat</span> <span class=o>=</span> <span class=mi>1</span> <span class=c1>#表示登录成功</span>
</span></span><span class=line><span class=cl>                <span class=k>break</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>flat</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;登录成功&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;登录失败&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>login</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1># regist()#调用该函数完成注册功能</span>
</span></span></code></pre></div><h3 id=管理系统完整实现自己拓展了解>管理系统完整实现(自己拓展:了解)：<a hidden class=anchor aria-hidden=true href=#管理系统完整实现自己拓展了解>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>regist</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;</span><span class=se>\n\n</span><span class=s1>欢迎来到注册页面&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;-------------&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>username</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;enter username:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>password</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;enter password:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>repeatpwd</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;repeat enter password:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>email</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;enter email:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>#判定用户的注册状态</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>password</span> <span class=o>==</span> <span class=n>repeatpwd</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>isHave</span> <span class=o>=</span> <span class=kc>False</span><span class=c1>#用户名是否重复的状态显示，isHave==True表示用户名重复</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./userData.txt&#39;</span><span class=p>,</span><span class=s1>&#39;r+&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>fp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1>#bobo-123-123@qq.com</span>
</span></span><span class=line><span class=cl>            <span class=c1>#jay-456-456@qq.com</span>
</span></span><span class=line><span class=cl>            <span class=c1>#读取文件中所有注册用户的用户名</span>
</span></span><span class=line><span class=cl>            <span class=n>user_data_list</span> <span class=o>=</span> <span class=n>fp</span><span class=o>.</span><span class=n>readlines</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>user_data</span> <span class=ow>in</span> <span class=n>user_data_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>userName</span> <span class=o>=</span> <span class=n>user_data</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;-&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>username</span> <span class=o>==</span> <span class=n>userName</span><span class=p>:</span><span class=c1>#用户名重复</span>
</span></span><span class=line><span class=cl>                    <span class=n>isHave</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>isHave</span> <span class=o>==</span> <span class=kc>False</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>                <span class=n>fp</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>username</span><span class=o>+</span><span class=s1>&#39;-&#39;</span><span class=o>+</span><span class=n>password</span><span class=o>+</span><span class=s1>&#39;-&#39;</span><span class=o>+</span><span class=n>email</span><span class=o>+</span><span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;注册成功,三秒后自动跳转到登录页面......&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span> <span class=c1>#暂停三秒</span>
</span></span><span class=line><span class=cl>                <span class=n>login</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;注册失败，</span><span class=si>%s</span><span class=s1>用户名已被占用！&#39;</span><span class=o>%</span><span class=n>username</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;是否重新注册？y/n&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>c</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;enter your choose:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>c</span> <span class=o>==</span> <span class=s1>&#39;y&#39;</span> <span class=ow>or</span> <span class=n>c</span> <span class=o>==</span> <span class=s1>&#39;Y&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                      <span class=n>regist</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                     <span class=n>exit</span><span class=p>()</span> 
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;两次密码不一致，注册失败！&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>insertBook</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>title</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;插入图书的名称:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>publish_date</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;插入图书的出版时间:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>author</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;插入图书的作者:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>publish</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;插入图书的出版社:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./bookData.txt&#39;</span><span class=p>,</span><span class=s1>&#39;a&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>fp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>fp</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>title</span><span class=o>+</span><span class=s1>&#39;-&#39;</span><span class=o>+</span><span class=n>publish_date</span><span class=o>+</span><span class=s1>&#39;-&#39;</span><span class=o>+</span><span class=n>author</span><span class=o>+</span><span class=s1>&#39;-&#39;</span><span class=o>+</span><span class=n>publish</span><span class=o>+</span><span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>title</span><span class=p>,</span><span class=s1>&#39;插入成功！&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;是否继续插入？y/n&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>c</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;enter your choose:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>c</span> <span class=o>==</span> <span class=s1>&#39;y&#39;</span> <span class=ow>or</span> <span class=n>c</span> <span class=o>==</span> <span class=s1>&#39;Y&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>insertBook</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>manageView</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>showBooks</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;</span><span class=se>\n\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./bookData.txt&#39;</span><span class=p>,</span><span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>fp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>book_list</span> <span class=o>=</span> <span class=n>fp</span><span class=o>.</span><span class=n>readlines</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>book</span> <span class=ow>in</span> <span class=n>book_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=n>book</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>c</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;返回主页面请按1:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>c</span> <span class=o>==</span> <span class=s1>&#39;1&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>manageView</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>deleteBook</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1>#指定一个删除的条件</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;请输入即将要删除的图书名称:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./bookData.txt&#39;</span><span class=p>,</span><span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>fp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>book_list</span> <span class=o>=</span> <span class=n>fp</span><span class=o>.</span><span class=n>readlines</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>book</span> <span class=ow>in</span> <span class=n>book_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>book</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>book_list</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>book</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>fp</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./bookData.txt&#39;</span><span class=p>,</span><span class=s1>&#39;w&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>book</span> <span class=ow>in</span> <span class=n>book_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>fp</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>book</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>fp</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=s1>&#39;被成功删除！3秒后自动跳转会主页面......&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>manageView</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>updateBook</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;请输入即将要修改图书的名字:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./bookData.txt&#39;</span><span class=p>,</span><span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>fp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>book_list</span> <span class=o>=</span> <span class=n>fp</span><span class=o>.</span><span class=n>readlines</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>book</span> <span class=ow>in</span> <span class=n>book_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>book</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>old_author</span> <span class=o>=</span> <span class=n>book</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;-&#39;</span><span class=p>)[</span><span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>new_author</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;请输入新的作者名称:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>new_book</span> <span class=o>=</span> <span class=n>book</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=n>old_author</span><span class=p>,</span><span class=n>new_author</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>book_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>new_book</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>book_list</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>book</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span>
</span></span><span class=line><span class=cl>    <span class=n>fp</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./bookData.txt&#39;</span><span class=p>,</span><span class=s1>&#39;w&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>book</span> <span class=ow>in</span> <span class=n>book_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>fp</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>book</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;图书修改成功！等待3秒返回主页面......&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>fp</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>manageView</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>manageView</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;</span><span class=se>\n\n</span><span class=s1>欢迎来到管理系统&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;1.查看所有图书</span><span class=se>\n</span><span class=s1>2.插入图书</span><span class=se>\n</span><span class=s1>3.删除图书</span><span class=se>\n</span><span class=s1>4.修改图书</span><span class=se>\n</span><span class=s1>5.返回主页面</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>choose</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;enter your choose:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>choose</span> <span class=o>==</span> <span class=s1>&#39;1&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>showBooks</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>choose</span> <span class=o>==</span> <span class=s1>&#39;2&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>insertBook</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>choose</span> <span class=o>==</span> <span class=s1>&#39;3&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>deleteBook</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>choose</span> <span class=o>==</span> <span class=s1>&#39;4&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>updateBook</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>main_view</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>login</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;</span><span class=se>\n\n</span><span class=s1>欢迎来到登录页面&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;-------------&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>username</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;enter username:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>password</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;enter password:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>#判定登录状态</span>
</span></span><span class=line><span class=cl>    <span class=n>login_state</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./userData.txt&#39;</span><span class=p>,</span><span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>fp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>user_data_list</span> <span class=o>=</span> <span class=n>fp</span><span class=o>.</span><span class=n>readlines</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>user_data</span> <span class=ow>in</span> <span class=n>user_data_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>un</span> <span class=o>=</span> <span class=n>user_data</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;-&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>pw</span> <span class=o>=</span> <span class=n>user_data</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;-&#39;</span><span class=p>)[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>username</span> <span class=o>==</span> <span class=n>un</span> <span class=ow>and</span> <span class=n>password</span> <span class=o>==</span> <span class=n>pw</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>login_state</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>                <span class=k>break</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>login_state</span> <span class=o>==</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>manageView</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;登录失败,是否返回主页面？y/n&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>c</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;enter your choose:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>c</span> <span class=o>==</span> <span class=s1>&#39;y&#39;</span> <span class=ow>or</span> <span class=n>c</span> <span class=o>==</span> <span class=s1>&#39;Y&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>main_view</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>exit</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>findPwd</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>un</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;enter your username:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>em</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;enter your email&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;./userData.txt&#39;</span><span class=p>,</span><span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>fp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>isFind</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=n>user_data_list</span> <span class=o>=</span> <span class=n>fp</span><span class=o>.</span><span class=n>readlines</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>user_data</span> <span class=ow>in</span> <span class=n>user_data_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>username</span> <span class=o>=</span> <span class=n>user_data</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;-&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>email</span> <span class=o>=</span> <span class=n>user_data</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;-&#39;</span><span class=p>)[</span><span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=c1>#将email中的回车去掉</span>
</span></span><span class=line><span class=cl>            <span class=n>email</span> <span class=o>=</span> <span class=n>email</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>username</span> <span class=o>==</span> <span class=n>un</span> <span class=ow>and</span> <span class=n>email</span> <span class=o>==</span> <span class=n>em</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>password</span> <span class=o>=</span> <span class=n>user_data</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;-&#39;</span><span class=p>)[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;找回的密码为：&#39;</span><span class=p>,</span><span class=n>password</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>isFind</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>                <span class=k>break</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>isFind</span> <span class=o>==</span> <span class=kc>False</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;密码找回失败，用户名和邮箱不匹配！&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main_view</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;欢迎来到xxx管理系统&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;----------------&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;1.登录</span><span class=se>\n</span><span class=s1>2.注册</span><span class=se>\n</span><span class=s1>3.找回密码</span><span class=se>\n</span><span class=s1>4.退出&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>choose</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;请选择功能:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>choose</span> <span class=o>==</span> <span class=s1>&#39;1&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>login</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>choose</span> <span class=o>==</span> <span class=s1>&#39;2&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>regist</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>choose</span> <span class=o>==</span> <span class=s1>&#39;3&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>findPwd</span><span class=p>()</span> 
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>choose</span> <span class=o>==</span> <span class=s1>&#39;4&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=c1>#退出整个程序</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;输入有误，程序退出！&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>main_view</span><span class=p>()</span>
</span></span></code></pre></div></div><div class=post-reward><div style=padding:0;margin:0;width:100%;font-size:16px;text-align:center><div id=QR style=opacity:0><div id=wechat style=display:inline-block><a class=fancybox rel=group><img id=wechat_qr src=https://canw0916.github.io/img/wxPay.jpg alt=wechat_pay></a><p>微信</p></div><div id=alipay style=display:inline-block><a class=fancybox rel=group><img id=alipay_qr src=https://canw0916.github.io/img/aliPay.jpg alt=alipay></a><p>支付宝</p></div></div><button id=rewardButton onclick='var qr=document.getElementById("QR");qr.style.opacity==="0"?qr.style.opacity="1":qr.style.opacity="0"'>
<span>🧧 鼓励</span></button></div></div><footer class=post-footer><nav class=paginav><a class=prev href=https://canw0916.github.io/en/posts/tech/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/><span class=title>« 上一页</span><br><span>模块与包</span>
</a><a class=next href=https://canw0916.github.io/en/posts/tech/%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E5%87%BD%E6%95%B0/><span class=title>下一页 »</span><br><span>作用域和函数</span></a></nav></footer></div><div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>💬评论</span><hr></div><div id=tcomment></div><script src=https://utteranc.es/client.js repo=canw0916/utterances_comments issue-term=title theme=photon-dark crossorigin=anonymous async></script></div></article></main><script async src=https://unpkg.com/mermaid@8.8.1/dist/mermaid.min.js></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><footer class=footer><span>Copyright
&copy;
2023-2024
<a href=https://canw0916.github.io/en/ style=color:#939393>Felix's Blog</a>
All Rights Reserved
</span><a href=https://beian.miit.gov.cn/ target=_blank style=color:#939393></a>&nbsp;
<span><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=null" style=display:inline-block;text-decoration:none;height:20px;color:#939393><img src style="float:left;margin:0 5px 0 0">
</a></span><span id=busuanzi_container><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css>总访客数: <span id=busuanzi_value_site_uv></span>
总访问量: <span id=busuanzi_value_site_pv></span></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
<span id=read_progress></span>
</span></a><script>document.addEventListener("scroll",function(){const t=document.getElementById("read_progress"),n=document.documentElement.scrollHeight,s=document.documentElement.clientHeight,o=document.documentElement.scrollTop||document.body.scrollTop;t.innerText=((o/(n-s)).toFixed(2)*100).toFixed(0)})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>let mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>400||document.documentElement.scrollTop>400?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="📄复制";function s(){t.innerText="👌🏻已复制!",setTimeout(()=>{t.innerText="📄复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){let t=e.textContent+`\r
————————————————\r
版权声明：本文为「Felix's Blog」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。\r
原文链接：`+location.href;navigator.clipboard.writeText(t),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild===n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName==="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script src=https://code.jquery.com/jquery-1.12.4.min.js></script><script>$("code[class^=language] ").on("mouseover",function(){this.clientWidth<this.scrollWidth&&$(this).css("width","135%")}).on("mouseout",function(){$(this).css("width","100%")})</script></body></html>