<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>C#基础提升系列——C#集合 - 火山不火</title><meta name=author content="火山"><meta name=author-link content="https://canw0916.github.io/"><meta name=description content="C#集合 有两种主要的集合类型：泛型集合和非泛型集合。 泛型集合被添加在 .NET Framework 2.0 中，并提供编译时类型安全的集合。 因此，泛型集合通常能提供更好的性能。 构造泛型集合时，它们接受类型形参；并在向该集合添加项或从该"><meta name=keywords content="C#,集合"><meta itemprop=name content="C#基础提升系列——C#集合"><meta itemprop=description content="C#集合 有两种主要的集合类型：泛型集合和非泛型集合。 泛型集合被添加在 .NET Framework 2.0 中，并提供编译时类型安全的集合。 因此，泛型集合通常能提供更好的性能。 构造泛型集合时，它们接受类型形参；并在向该集合添加项或从该"><meta itemprop=datePublished content="2023-01-29T01:20:46+08:00"><meta itemprop=dateModified content="2023-01-29T01:20:46+08:00"><meta itemprop=wordCount content="12029"><meta itemprop=keywords content="C#,集合,"><meta property="og:title" content="C#基础提升系列——C#集合"><meta property="og:description" content="C#集合 有两种主要的集合类型：泛型集合和非泛型集合。 泛型集合被添加在 .NET Framework 2.0 中，并提供编译时类型安全的集合。 因此，泛型集合通常能提供更好的性能。 构造泛型集合时，它们接受类型形参；并在向该集合添加项或从该"><meta property="og:type" content="article"><meta property="og:url" content="https://canw0916.github.io/posts/2023/01/csharp%E9%9B%86%E5%90%88/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-29T01:20:46+08:00"><meta property="article:modified_time" content="2023-01-29T01:20:46+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="C#基础提升系列——C#集合"><meta name=twitter:description content="C#集合 有两种主要的集合类型：泛型集合和非泛型集合。 泛型集合被添加在 .NET Framework 2.0 中，并提供编译时类型安全的集合。 因此，泛型集合通常能提供更好的性能。 构造泛型集合时，它们接受类型形参；并在向该集合添加项或从该"><meta name=application-name content="火山不火"><meta name=apple-mobile-web-app-title content="火山不火"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://canw0916.github.io/posts/2023/01/csharp%E9%9B%86%E5%90%88/><link rel=prev href=https://canw0916.github.io/posts/2023/01/csharp%E6%B3%9B%E5%9E%8B/><link rel=next href=https://canw0916.github.io/posts/2023/01/csharp%E7%89%B9%E6%AE%8A%E9%9B%86%E5%90%88/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"C#基础提升系列——C#集合","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/canw0916.github.io\/posts\/2023\/01\/csharp%E9%9B%86%E5%90%88\/"},"genre":"posts","keywords":"C#, 集合","wordcount":12029,"url":"https:\/\/canw0916.github.io\/posts\/2023\/01\/csharp%E9%9B%86%E5%90%88\/","datePublished":"2023-01-29T01:20:46+08:00","dateModified":"2023-01-29T01:20:46+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"火山"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=/ title=火山不火><img class="lazyload logo" src=/svg/loading.min.svg data-src=/fixit.min.svg data-srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x" data-sizes=auto alt=火山不火 title=火山不火><span class=header-title-text>火山不火</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 目录</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=火山不火><img class="lazyload logo" src=/svg/loading.min.svg data-src=/fixit.min.svg data-srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x" data-sizes=auto alt=/fixit.min.svg title=/fixit.min.svg><span class=header-title-text>火山不火</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 目录</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container data-page-style=normal><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span title=转载 class=icon-repost><i class="fa-solid fa-share fa-fw" aria-hidden=true></i></span><span>C#基础提升系列——C#集合</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://canw0916.github.io/ title=作者 target=_blank rel="external nofollow noopener noreferrer author" class=author><img class="lazyload avatar" src=/svg/loading.min.svg data-src=/images/avatar.jpg data-srcset="/images/avatar.jpg, /images/avatar.jpg 1.5x, /images/avatar.jpg 2x" data-sizes=auto alt=火山 title=火山>&nbsp;火山</a></span>
<span class=post-category>收录于 <a href=/categories/%E7%BC%96%E7%A8%8B/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> 编程</a></span></div><div class=post-meta-line><span title="2023-01-29 01:20:46"><i class="fa-regular fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2023-01-29>2023-01-29</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw" aria-hidden=true></i> 约 12029 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw" aria-hidden=true></i> 预计阅读 25 分钟</span>&nbsp;<span id=busuanzi_container_page_pv class="busuanzi_visitors comment-visitors" data-flag-title=C#基础提升系列——C#集合>
<i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_page_pv>-</span>&nbsp;次阅读
</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#集合接口和类型>集合接口和类型</a></li><li><a href=#列表listt>列表<code>List&lt;T></code></a><ul><li><ul><li><a href=#创建列表>创建列表</a></li><li><a href=#初始化集合并设定值>初始化集合并设定值</a></li><li><a href=#添加或插入元素>添加或插入元素</a></li><li><a href=#访问元素>访问元素</a></li><li><a href=#删除元素>删除元素</a></li><li><a href=#搜索元素>搜索元素</a></li><li><a href=#排序>排序</a></li><li><a href=#只读集合>只读集合</a></li></ul></li></ul></li><li><a href=#队列queuet>队列<code>Queue&lt;T></code></a></li><li><a href=#栈stackt>栈<code>Stack&lt;T></code></a></li><li><a href=#链表linkedlistt>链表<code>LinkedList&lt;T></code></a></li><li><a href=#有序列表sortedlisttkey-tvalue>有序列表<code>SortedList&lt;TKey, TValue></code></a></li><li><a href=#字典dictionarytkey-tvalue>字典<code>Dictionary&lt;TKey, TValue></code></a><ul><li><ul><li><a href=#字典初始化>字典初始化</a></li><li><a href=#键的类型>键的类型</a></li><li><a href=#lookuptkeytelement><code>Lookup&lt;TKey,TElement></code></a></li><li><a href=#有序字典sorteddictionarytkeytvalue>有序字典<code>SortedDictionary&lt;Tkey,TValue></code></a></li></ul></li></ul></li><li><a href=#集set>集<code>Set</code></a></li><li><a href=#性能>性能</a><ul><li><a href=#参考资源>参考资源</a></li></ul></li></ul></nav></div></div><div class=content id=content><h1 id=c集合>C#集合</h1><p>有两种主要的集合类型：泛型集合和非泛型集合。 泛型集合被添加在 .NET Framework 2.0 中，并提供编译时类型安全的集合。 因此，泛型集合通常能提供更好的性能。 构造泛型集合时，它们接受类型形参；并在向该集合添加项或从该集合删除项时无需在Object类型间来回转换。</p><h2 id=集合接口和类型>集合接口和类型</h2><ul><li><a href=https://docs.microsoft.com/zh-cn/dotnet/api/system.array target=_blank rel="external nofollow noopener noreferrer">System.Array</a> ：用于数组，提供创建，操作，搜索和排序数组的方法，是所有数组的基类。</li><li><a href=https://docs.microsoft.com/zh-cn/dotnet/api/system.collections target=_blank rel="external nofollow noopener noreferrer">System.Collections</a> ：是<code>ArrayList</code>、<code>Queue</code>、<code>Hashtable</code>等基类，包含定义对象的各种集合。</li><li><a href=https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.concurrent target=_blank rel="external nofollow noopener noreferrer">System.Collections.Concurrent</a> ：提供了线程安全的集合类。</li><li><a href=https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic target=_blank rel="external nofollow noopener noreferrer">System.Collections.Generic</a> ：包含接口和定义泛型集合，它允许用户创建强类型集合能提供比非泛型强类型集合更好的类型安全和性能等级。</li><li><a href=https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.specialized target=_blank rel="external nofollow noopener noreferrer">System.Collections.Specialized</a>：包含强类型集合。专用于特定类型的集合类。</li><li><a href=https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.immutable target=_blank rel="external nofollow noopener noreferrer">System.Collections.Immutable</a> ：包含了定义不可变的集合接口和类 。</li></ul><h2 id=列表listt>列表<code>List&lt;T></code></h2><p>该类派生自如下接口和类：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=n>class</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>:</span> <span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>Generic</span><span class=p>.</span><span class=n>ICollection</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl><span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>Generic</span><span class=p>.</span><span class=n>IEnumerable</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>Generic</span><span class=p>.</span><span class=n>IList</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl><span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>Generic</span><span class=p>.</span><span class=n>IReadOnlyCollection</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>Generic</span><span class=p>.</span><span class=n>IReadOnlyList</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl><span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>IList</span><span class=p>,</span><span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>IEnumerable</span><span class=p>,</span><span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>ICollection</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=创建列表>创建列表</h4><p>可以调用默认的构造函数创建列表对象。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>intList</span> <span class=o>=</span> <span class=n>new</span> <span class=n>List</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><p>使用构造函数创建一个空列表，当元素添加到列表中后，列表的容量就会扩大为可接纳4个元素，当添加第5个元素时，列表的容量大小就会被重新设置为包含8个元素，如果8个元素还不够 ，列表的容量大小就会被设置为16个元素，每次超出已有的容量大小后，都会将列表的容量重新设置为原来的2倍。</p><p>使用<code>Capacity</code>属性可以获取该列表的容量大小。下面将使用一个示例来说明添加元素后，<code>Capacity</code>的值是如何变化的。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>intList</span> <span class=o>=</span> <span class=n>new</span> <span class=n>List</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=c1>//获取初始容量大小
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=s>&#34;初始容量大小：&#34;</span> <span class=o>+</span> <span class=n>intList</span><span class=p>.</span><span class=n>Capacity</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>intList</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=err>$</span><span class=s>&#34;添加了一个元素后，容量大小为：{intList.Capacity}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>//获取或设置该内部数据结构在不调整大小的情况下能够容纳的元素总数
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>intList</span><span class=p>.</span><span class=n>Capacity</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=s>&#34;设置了指定的容量大小为5后：&#34;</span> <span class=o>+</span> <span class=n>intList</span><span class=p>.</span><span class=n>Capacity</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>intList</span><span class=p>.</span><span class=nf>AddRange</span><span class=p>(</span><span class=n>new</span><span class=p>[]</span> <span class=p>{</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=err>$</span><span class=s>&#34;添加了{intList.Count}个元素后，容量大小为：{intList.Capacity}&#34;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>上述的输出结果依次为：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>初始容量大小：0
</span></span><span class=line><span class=cl>添加了一个元素后，容量大小为：4
</span></span><span class=line><span class=cl>设置了指定的容量大小为5后：5
</span></span><span class=line><span class=cl>添加了6个元素后，容量大小为：10
</span></span><span class=line><span class=cl>&gt;
</span></span></code></pre></td></tr></table></div></div><p>如果元素添加到列表后，还有多余的容量大小，可以调用<code>TrimExcess()</code>方法，去除不需要的容量。</p><p>注意：如果未使用的容量小于总容量的10％，则列表不会调整大小 。</p><p>接着上述示例执行下述代码：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=err>$</span><span class=s>&#34;原来的元素个数为：{intList.Count} 容量大小为：&#34;</span> <span class=o>+</span> <span class=n>intList</span><span class=p>.</span><span class=n>Capacity</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>intList</span><span class=p>.</span><span class=nf>TrimExcess</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=s>&#34;调用了TrimExcess()方法后，容量大小为：&#34;</span> <span class=o>+</span> <span class=n>intList</span><span class=p>.</span><span class=n>Capacity</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>//重新调整容量大小，未使用容量小于总容量10%
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>intList</span><span class=p>.</span><span class=n>Capacity</span> <span class=o>=</span> <span class=mi>7</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>intList</span><span class=p>.</span><span class=nf>TrimExcess</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=err>$</span><span class=s>&#34;最终元素个数为：{intList.Count} 容量大小为：&#34;</span> <span class=o>+</span> <span class=n>intList</span><span class=p>.</span><span class=n>Capacity</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>输出结果为：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>原来的元素个数为：6 容量大小为：10
</span></span><span class=line><span class=cl>调用了TrimExcess()方法后，容量大小为：6
</span></span><span class=line><span class=cl>最终元素个数为：6 容量大小为：7
</span></span></code></pre></td></tr></table></div></div><h4 id=初始化集合并设定值>初始化集合并设定值</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>intList</span> <span class=o>=</span> <span class=n>new</span> <span class=n>List</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>()</span> <span class=p>{</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=n>intList</span> <span class=o>=</span> <span class=n>new</span> <span class=n>List</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=p>{</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span> <span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=添加或插入元素>添加或插入元素</h4><p>使用<code>Add()</code>方法可以给列表添加一个元素，使用<code>AddRange()</code>方法可以一次给集合添加多个元素。使用<code>Insert()</code>方法可以在指定位置插入元素：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>intList</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>7</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>intList</span><span class=p>.</span><span class=nf>AddRange</span><span class=p>(</span><span class=n>new</span> <span class=kt>int</span> <span class=p>[]</span> <span class=p>{</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>9</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=n>intList</span><span class=p>.</span><span class=nf>Insert</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>//4  5  0   6   7   7   8   9   
</span></span></span></code></pre></td></tr></table></div></div><h4 id=访问元素>访问元素</h4><p>实现了<code>IList</code>和<code>IList&lt;T></code>接口的所有类都提供了一个索引器，因此可以使用索引下标的形式进行访问指定索引位置的元素。索引下标从0开始。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=o>&gt;</span> <span class=n>Console</span><span class=p>.</span><span class=nf>Write</span><span class=p>(</span><span class=n>intList</span><span class=p>[</span><span class=mi>2</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=mi>0</span>
</span></span></code></pre></td></tr></table></div></div><p>因为<code>List&lt;T></code>集合类实现了<code>IEnumerate</code>接口，所以可以使用<code>foreach</code>语句进行遍历集合中的元素。</p><h4 id=删除元素>删除元素</h4><p>使用<code>RemoveAt()</code>方法移除指定索引位置的元素，使用<code>Remove()</code>方法移除指定元素。使用<code>RemoveRange()</code>方法可以从集合中删除多个元素。使用<code>RemoveAll()</code>方法可以删除集合中的所有的元素。</p><p>注意：推荐使用<code>RemoveAt()</code>方法按索引删除元素，因为它比<code>Remove()</code>方法执行的要快，<code>Remove()</code>方法会先在集合中搜索元素，搜索的过程中会调用<code>Equals()</code>方法，然后使用<code>IndexOf()</code>方法获取元素的索引，再使用该索引删除元素。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>intList</span><span class=p>.</span><span class=nf>RemoveAt</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span><span class=c1>//删除索引2的元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>intList</span><span class=p>.</span><span class=nf>Remove</span><span class=p>(</span><span class=mi>7</span><span class=p>);</span><span class=c1>//删除元素7
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>intList</span><span class=p>.</span><span class=nf>RemoveRange</span><span class=p>(</span><span class=mi>4</span><span class=p>,</span> <span class=mi>2</span><span class=p>);</span><span class=c1>//删除索引为4及之后的2个元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>intList</span><span class=p>.</span><span class=nf>RemoveAll</span><span class=p>(</span><span class=n>a</span> <span class=o>=&gt;</span> <span class=n>a</span> <span class=o>&gt;</span> <span class=mi>5</span><span class=p>);</span> <span class=c1>//删除值大于5的元素
</span></span></span></code></pre></td></tr></table></div></div><h4 id=搜索元素>搜索元素</h4><p>可以通过索引或元素本身搜索元素。可以使用的方法有：<code>IndexOf()、LastIndexOf()、FindIndex()、FindLastIndex()、Find()、FindLast()</code>等。判断元素是否存在可以使用Exists()方法。除了这些方法，实际应用中还包括Linq可以使用的方法。具体使用，请查看<a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.list-1?view=netframework-4.7.2#methods" target=_blank rel="external nofollow noopener noreferrer">官方文档</a>。</p><h4 id=排序>排序</h4><p><code>List&lt;T></code>类可以使用<code>Sort()</code>方法对元素进行排序。<code>Sort()</code>方法有如下几个重载方法：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=kt>void</span> <span class=nf>Sort</span><span class=p>(</span><span class=kt>int</span> <span class=n>index</span><span class=p>,</span> <span class=kt>int</span> <span class=n>count</span><span class=p>,</span> <span class=n>IComparer</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>comparer</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=kt>void</span> <span class=nf>Sort</span><span class=p>(</span><span class=n>Comparison</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>comparison</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=kt>void</span> <span class=nf>Sort</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=kt>void</span> <span class=nf>Sort</span><span class=p>(</span><span class=n>IComparer</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>comparer</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>只有集合中的元素实现了<code>IComparable</code>接口，才能使用不带参数的<code>Sort()</code>方法。</p><p>如果需要按照元素类型 不 默认支持的方式排序，就需要使用其他重载方法，比如传递一个实现了<code>IComparer&lt;T></code>接口的对象。</p><p>下面将用一个具体的示例进行说明：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=n>class</span> <span class=nl>Racer</span> <span class=p>:</span> <span class=n>IComparable</span><span class=o>&lt;</span><span class=n>Racer</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=kt>int</span> <span class=n>Id</span> <span class=p>{</span> <span class=n>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=n>string</span> <span class=n>FirstName</span> <span class=p>{</span> <span class=n>get</span><span class=p>;</span> <span class=n>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=n>string</span> <span class=n>LastName</span> <span class=p>{</span> <span class=n>get</span><span class=p>;</span> <span class=n>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=n>string</span> <span class=n>Country</span> <span class=p>{</span> <span class=n>get</span><span class=p>;</span> <span class=n>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=kt>int</span> <span class=n>Wins</span> <span class=p>{</span> <span class=n>get</span><span class=p>;</span> <span class=n>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>//实现接口中的方法
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>public</span> <span class=kt>int</span> <span class=nf>CompareTo</span><span class=p>(</span><span class=n>Racer</span> <span class=n>other</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>compare</span> <span class=o>=</span> <span class=n>LastName</span><span class=o>?</span><span class=p>.</span><span class=nf>CompareTo</span><span class=p>(</span><span class=n>other</span><span class=o>?</span><span class=p>.</span><span class=n>LastName</span><span class=p>)</span> <span class=o>??</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>compare</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>FirstName</span><span class=o>?</span><span class=p>.</span><span class=nf>CompareTo</span><span class=p>(</span><span class=n>other</span><span class=o>?</span><span class=p>.</span><span class=n>FirstName</span><span class=p>)</span> <span class=o>??</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>compare</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>//定义构造函数
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>public</span> <span class=nf>Racer</span><span class=p>(</span><span class=kt>int</span> <span class=n>id</span><span class=p>,</span> <span class=n>string</span> <span class=n>firstName</span><span class=p>,</span> <span class=n>string</span> <span class=n>lastName</span><span class=p>,</span> <span class=n>string</span> <span class=n>country</span><span class=p>,</span> <span class=kt>int</span> <span class=n>wins</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=p>.</span><span class=n>Id</span> <span class=o>=</span> <span class=n>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=p>.</span><span class=n>FirstName</span> <span class=o>=</span> <span class=n>firstName</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=p>.</span><span class=n>LastName</span> <span class=o>=</span> <span class=n>lastName</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=p>.</span><span class=n>Country</span> <span class=o>=</span> <span class=n>country</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=p>.</span><span class=n>Wins</span> <span class=o>=</span> <span class=n>wins</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>//定义另一个构造函数，并调用上述构造函数
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>public</span> <span class=nf>Racer</span><span class=p>(</span><span class=kt>int</span> <span class=n>id</span><span class=p>,</span> <span class=n>string</span> <span class=n>firstName</span><span class=p>,</span> <span class=n>string</span> <span class=n>lastName</span><span class=p>,</span> <span class=n>string</span> <span class=n>country</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>:</span> <span class=nf>this</span><span class=p>(</span><span class=n>id</span><span class=p>,</span> <span class=n>firstName</span><span class=p>,</span> <span class=n>lastName</span><span class=p>,</span> <span class=n>country</span><span class=p>,</span> <span class=nl>wins</span><span class=p>:</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>//重写object的Tostring()方法
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>public</span> <span class=n>override</span> <span class=n>string</span> <span class=nf>ToString</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=err>$</span><span class=s>&#34;{FirstName} {LastName}&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>上述的类直接实现了<code>IComparable&lt;T></code>泛型接口，所以可以直接使用不带参数的<code>Sort()</code>方法进行排序，排序的依据基于重写的<code>CompareTo()</code>方法。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>var</span> <span class=n>racers</span> <span class=o>=</span> <span class=n>new</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Racer</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>new</span> <span class=nf>Racer</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=s>&#34;zhang&#34;</span><span class=p>,</span><span class=s>&#34;bsan&#34;</span><span class=p>,</span><span class=s>&#34;中国&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>new</span> <span class=nf>Racer</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=s>&#34;li&#34;</span><span class=p>,</span><span class=s>&#34;asi&#34;</span><span class=p>,</span><span class=s>&#34;中国&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>new</span> <span class=nf>Racer</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=s>&#34;wang&#34;</span><span class=p>,</span><span class=s>&#34;dwu&#34;</span><span class=p>,</span><span class=s>&#34;中国&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=n>racers</span><span class=p>.</span><span class=nf>Sort</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><p>执行上述语句，将会按照<code>LastName</code>进行排序后输出，依次为<code>li asi、zhang bsan、wang dwu</code>。</p><p>对上述示例进行扩展，使用传递一个实现了<code>IComparer&lt;T></code>接口的对象进行排序。如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=n>class</span> <span class=nl>RacerComparer</span> <span class=p>:</span> <span class=n>IComparer</span><span class=o>&lt;</span><span class=n>Racer</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//定义一个枚举，可以直接通过类名.枚举名进行访问
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>public</span> <span class=k>enum</span> <span class=n>CompareType</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>FirstName</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>LastName</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>Country</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>Wins</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>//定义枚举变量
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>private</span> <span class=n>CompareType</span> <span class=n>_compareType</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>//定义构造函数，通过外部指定枚举类型
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>public</span> <span class=nf>RacerComparer</span><span class=p>(</span><span class=n>CompareType</span> <span class=n>compareType</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>_compareType</span> <span class=o>=</span> <span class=n>compareType</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>//重写接口方法
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>public</span> <span class=kt>int</span> <span class=nf>Compare</span><span class=p>(</span><span class=n>Racer</span> <span class=n>x</span><span class=p>,</span> <span class=n>Racer</span> <span class=n>y</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>x</span> <span class=o>==</span> <span class=n>null</span> <span class=o>&amp;&amp;</span> <span class=n>y</span> <span class=o>==</span> <span class=n>null</span><span class=p>)</span> <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>x</span> <span class=o>==</span> <span class=n>null</span><span class=p>)</span> <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>y</span> <span class=o>==</span> <span class=n>null</span><span class=p>)</span> <span class=k>return</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>switch</span> <span class=p>(</span><span class=n>_compareType</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>case</span> <span class=n>CompareType</span><span class=p>.</span><span class=nl>FirstName</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>string</span><span class=p>.</span><span class=nf>Compare</span><span class=p>(</span><span class=n>x</span><span class=p>.</span><span class=n>FirstName</span><span class=p>,</span> <span class=n>y</span><span class=p>.</span><span class=n>FirstName</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>case</span> <span class=n>CompareType</span><span class=p>.</span><span class=nl>LastName</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>string</span><span class=p>.</span><span class=nf>Compare</span><span class=p>(</span><span class=n>x</span><span class=p>.</span><span class=n>LastName</span><span class=p>,</span> <span class=n>y</span><span class=p>.</span><span class=n>LastName</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>case</span> <span class=n>CompareType</span><span class=p>.</span><span class=nl>Country</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>result</span> <span class=o>=</span> <span class=n>string</span><span class=p>.</span><span class=nf>Compare</span><span class=p>(</span><span class=n>x</span><span class=p>.</span><span class=n>Country</span><span class=p>,</span> <span class=n>y</span><span class=p>.</span><span class=n>Country</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=n>result</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=n>string</span><span class=p>.</span><span class=nf>Compare</span><span class=p>(</span><span class=n>x</span><span class=p>.</span><span class=n>LastName</span><span class=p>,</span> <span class=n>y</span><span class=p>.</span><span class=n>LastName</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span> <span class=k>return</span> <span class=n>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>case</span> <span class=n>CompareType</span><span class=p>.</span><span class=nl>Wins</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>x</span><span class=p>.</span><span class=n>Wins</span><span class=p>.</span><span class=nf>CompareTo</span><span class=p>(</span><span class=n>y</span><span class=p>.</span><span class=n>Wins</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>default</span><span class=o>:</span>
</span></span><span class=line><span class=cl>                <span class=n>throw</span> <span class=n>new</span> <span class=nf>ArgumentException</span><span class=p>(</span><span class=s>&#34;Invalid Compare Type&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>上述类<code>RacerComparer</code> 实现了泛型接口<code>IComparer&lt;T></code>，其中泛型类型为<code>Racer</code>（实现<code>IComparer&lt;T></code>接口中的泛型类型<code>T</code>应该是将要进行排序的元素的类型），并重写了<code>Compare()</code>方法，因此可以调用<code>Srot(IComparer>&lt;T></code>)方法进行排序。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>var</span> <span class=n>racers</span> <span class=o>=</span> <span class=n>new</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Racer</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>new</span> <span class=nf>Racer</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=s>&#34;zhang&#34;</span><span class=p>,</span><span class=s>&#34;bsan&#34;</span><span class=p>,</span><span class=s>&#34;中国&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>new</span> <span class=nf>Racer</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=s>&#34;li&#34;</span><span class=p>,</span><span class=s>&#34;asi&#34;</span><span class=p>,</span><span class=s>&#34;中国&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>new</span> <span class=nf>Racer</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=s>&#34;wang&#34;</span><span class=p>,</span><span class=s>&#34;dwu&#34;</span><span class=p>,</span><span class=s>&#34;中国&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=n>racers</span><span class=p>.</span><span class=nf>Sort</span><span class=p>(</span><span class=n>new</span> <span class=nf>RacerComparer</span><span class=p>(</span><span class=n>RacerComparer</span><span class=p>.</span><span class=n>CompareType</span><span class=p>.</span><span class=n>FirstName</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=c1>//将会按照FirstName进行排序
</span></span></span></code></pre></td></tr></table></div></div><p>还可以调用<code>Sort(Comparison&lt;T> comparison)</code>进行排序，<code>Comparison&lt;T></code>是一个泛型委托，它的定义如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=n>delegate</span> <span class=kt>int</span> <span class=n>Comparison</span><span class=o>&lt;</span><span class=n>in</span> <span class=n>T</span><span class=o>&gt;</span><span class=p>(</span><span class=n>T</span> <span class=n>x</span><span class=p>,</span> <span class=n>T</span> <span class=n>y</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>它需要传入两个T类型的参数，返回类型为int。如果参数值相等，该方法返回0；如果第一个参数比第二个小，返回一个小于0的值；否则，返回一个大于0的值。</p><p>比如示例中如果按照Id进行排序，可以使用如下方法调用：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//由于是委托，此处可以使用lambda表达式
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>racers</span><span class=p>.</span><span class=nf>Sort</span><span class=p>((</span><span class=n>r1</span><span class=p>,</span> <span class=n>r2</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>r1</span><span class=p>.</span><span class=n>Id</span><span class=p>.</span><span class=nf>CompareTo</span><span class=p>(</span><span class=n>r2</span><span class=p>.</span><span class=n>Id</span><span class=p>));</span>
</span></span></code></pre></td></tr></table></div></div><p>上述将会按照Id升序排序。</p><p>如果使用了<code>Sort()</code>进行排序后，可以调用<code>Reverse()</code>方法，逆转整个集合的排序。</p><h4 id=只读集合>只读集合</h4><blockquote><p>可以调用<code>List&lt;T></code>集合的<code>AsReadOnly()</code>方法返回<code>ReadOnlyCollection&lt;T></code>类型的对象。<code>ReadOnlyCollection&lt;T></code>类实现的接口与<code>List&lt;T></code>集合相同，除此之外还实现了<code>IReadOnlyCollection&lt;T></code>和<code>IReadOnlyList</code>接口。因为这些接口的成员，集合不能修改。所有修改集合的方法和属性都抛出<code>NotSupportedException</code>异常。</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=n>class</span> <span class=n>ReadOnlyCollection</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>:</span> <span class=n>IList</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>ICollection</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>IEnumerable</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl><span class=n>IEnumerable</span><span class=p>,</span> <span class=n>IList</span><span class=p>,</span> <span class=n>ICollection</span><span class=p>,</span> <span class=n>IReadOnlyList</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>IReadOnlyCollection</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=队列queuet>队列<code>Queue&lt;T></code></h2><p>队列是其元素以<strong>先进先出</strong>（<code>Firstin，Firstout，FIFO</code>）的方式来处理的集合，先放入队列中的元素会先读取。队列使用<code>System.Collections.Generic</code>命名空间中的泛型类<code>Queue&lt;T></code>实现，它的声明如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=p>[</span><span class=n>System</span><span class=p>.</span><span class=n>Runtime</span><span class=p>.</span><span class=n>InteropServices</span><span class=p>.</span><span class=nf>ComVisible</span><span class=p>(</span><span class=nb>false</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=n>class</span> <span class=n>Queue</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>:</span> <span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>Generic</span><span class=p>.</span><span class=n>IEnumerable</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl><span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>Generic</span><span class=p>.</span><span class=n>IReadOnlyCollection</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>ICollection</span>
</span></span></code></pre></td></tr></table></div></div><p>由于<code>Queue&lt;T></code>没有实现<code>ICollection&lt;T></code>泛型接口，所以不能使用这个接口中定义的<code>Add()</code>和<code>Remove()</code>方法操作元素。也因为<code>Queue&lt;T></code>没有实现<code>IList&lt;T></code>泛型接口，所以也不能使用索引下标的方式访问队列。</p><p><code>Queue&lt;T></code>常用方法和属性说明：</p><p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.queue-1.dequeue?view=netframework-4.7.2#System_Collections_Generic_Queue_1_Dequeue" target=_blank rel="external nofollow noopener noreferrer"><code>Dequeue()</code></a> ：删除并返回队列开头的元素。如果队列中没有元素，在调用该方法时，将会抛出一个<code>InvalidOperationException</code>类型的异常。</p><p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.queue-1.enqueue?view=netframework-4.7.2#System_Collections_Generic_Queue_1_Enqueue__0_" target=_blank rel="external nofollow noopener noreferrer"><code>Enqueue(T)</code></a> ：将元素添加到队列的末尾。</p><p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.queue-1.peek?view=netframework-4.7.2#System_Collections_Generic_Queue_1_Peek" target=_blank rel="external nofollow noopener noreferrer"><code>Peek()</code></a> ：返回但不删除队列开头的元素。</p><p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.queue-1.trimexcess?view=netframework-4.7.2#System_Collections_Generic_Queue_1_TrimExcess" target=_blank rel="external nofollow noopener noreferrer"><code>TrimExcess()</code></a> ：如果该数量小于当前容量的90％，则将容量设置为队列的实际元素数。</p><p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.queue-1.count?view=netframework-4.7.2#System_Collections_Generic_Queue_1_Count" target=_blank rel="external nofollow noopener noreferrer"><code>Count</code></a> ：获取队列中的元素的个数</p><p>可以使用默认的构造函数创建一个空队列，也可以使用构造函数指定容量。在把元素添加到队列中时，如果没有指定容量，将会类似于<code>List&lt;T></code>类，队列的容量也总是根据需要成倍增加，从而包含4、8、16和32个元素等。</p><p>下面将使用一个复杂的示例说明队列是如何使用的。首先定义一个简单的类：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=n>class</span> <span class=n>Document</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=n>string</span> <span class=n>Title</span> <span class=p>{</span> <span class=n>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=n>string</span> <span class=n>Content</span> <span class=p>{</span> <span class=n>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=nf>Document</span><span class=p>(</span><span class=n>string</span> <span class=n>title</span><span class=p>,</span> <span class=n>string</span> <span class=n>content</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=p>.</span><span class=n>Title</span> <span class=o>=</span> <span class=n>title</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=p>.</span><span class=n>Content</span> <span class=o>=</span> <span class=n>content</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>接着为这个类进行队列写入和读取操作：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=n>class</span> <span class=n>DocumentManager</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>private</span> <span class=n>readonly</span> <span class=n>Queue</span><span class=o>&lt;</span><span class=n>Document</span><span class=o>&gt;</span> <span class=n>_documentQueue</span> <span class=o>=</span> <span class=n>new</span> <span class=n>Queue</span><span class=o>&lt;</span><span class=n>Document</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>//向队列中添加元素
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>public</span> <span class=kt>void</span> <span class=nf>AddDocument</span><span class=p>(</span><span class=n>Document</span> <span class=n>doc</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//因为后面将要使用多线程，为了避免死锁，进行lock语句限制
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nf>lock</span> <span class=p>(</span><span class=n>this</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>_documentQueue</span><span class=p>.</span><span class=nf>Enqueue</span><span class=p>(</span><span class=n>doc</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>//获取队列中的元素
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>public</span> <span class=n>Document</span> <span class=nf>GetDocument</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Document</span> <span class=n>doc</span> <span class=o>=</span> <span class=n>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nf>lock</span> <span class=p>(</span><span class=n>this</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>doc</span> <span class=o>=</span> <span class=n>_documentQueue</span><span class=p>.</span><span class=nf>Dequeue</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>doc</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>//队列中是否还有元素未读出
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>public</span> <span class=kt>bool</span> <span class=n>IsDocumentAvailable</span> <span class=o>=&gt;</span> <span class=n>_documentQueue</span><span class=p>.</span><span class=n>Count</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>然后定义一个操作此类的对外开放的类：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=n>class</span> <span class=n>ProcessDocuments</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>private</span> <span class=n>DocumentManager</span> <span class=n>_documentManager</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>protected</span> <span class=nf>ProcessDocuments</span><span class=p>(</span><span class=n>DocumentManager</span> <span class=n>dm</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>_documentManager</span> <span class=o>=</span> <span class=n>dm</span> <span class=o>??</span> <span class=n>throw</span> <span class=n>new</span> <span class=nf>ArgumentNullException</span><span class=p>(</span><span class=nf>nameof</span><span class=p>(</span><span class=n>dm</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>protected</span> <span class=n>async</span> <span class=n>Task</span> <span class=nf>Run</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=p>(</span><span class=nb>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>_documentManager</span><span class=p>.</span><span class=n>IsDocumentAvailable</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>Document</span> <span class=n>doc</span> <span class=o>=</span> <span class=n>_documentManager</span><span class=p>.</span><span class=nf>GetDocument</span><span class=p>();</span>
</span></span><span class=line><span class=cl>                <span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>Title</span> <span class=o>+</span> <span class=s>&#34;:&#34;</span> <span class=o>+</span> <span class=n>doc</span><span class=p>.</span><span class=n>Content</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=c1>//显式的指定间隔时间，将会在此等待，从而执行该方法之外的代码部分
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>await</span> <span class=n>Task</span><span class=p>.</span><span class=nf>Delay</span><span class=p>(</span><span class=n>new</span> <span class=nf>Random</span><span class=p>().</span><span class=nf>Next</span><span class=p>(</span><span class=mi>1000</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>//对外开放的调用方法
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>public</span> <span class=k>static</span> <span class=kt>void</span> <span class=nf>Start</span><span class=p>(</span><span class=n>DocumentManager</span> <span class=n>dm</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//启动一个新的任务
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>Task</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=n>new</span> <span class=nf>ProcessDocuments</span><span class=p>(</span><span class=n>dm</span><span class=p>).</span><span class=n>Run</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>调用代码如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=k>static</span> <span class=kt>void</span> <span class=nf>Run</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>var</span> <span class=n>dm</span> <span class=o>=</span> <span class=n>new</span> <span class=nf>DocumentManager</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>ProcessDocuments</span><span class=p>.</span><span class=nf>Start</span><span class=p>(</span><span class=n>dm</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>1000</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>var</span> <span class=n>doc</span> <span class=o>=</span> <span class=n>new</span> <span class=nf>Document</span><span class=p>(</span><span class=s>&#34;Doc_&#34;</span> <span class=o>+</span> <span class=n>i</span><span class=p>,</span> <span class=s>&#34;Content_&#34;</span> <span class=o>+</span> <span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>dm</span><span class=p>.</span><span class=nf>AddDocument</span><span class=p>(</span><span class=n>doc</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=s>&#34;添加了document:Doc_&#34;</span> <span class=o>+</span> <span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=p>.</span><span class=n>Threading</span><span class=p>.</span><span class=n>Thread</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=n>new</span> <span class=nf>Random</span><span class=p>().</span><span class=nf>Next</span><span class=p>(</span><span class=mi>1000</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=栈stackt>栈<code>Stack&lt;T></code></h2><p>栈是一个<strong>后进先出</strong>（<code>Lastin，Firstout，LIFO</code>）的集合，最后添加到栈中的元素会最先读取。它和队列非常的类似，只是读取元素的方法不同。栈在.NET中的声明如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=p>[</span><span class=n>System</span><span class=p>.</span><span class=n>Runtime</span><span class=p>.</span><span class=n>InteropServices</span><span class=p>.</span><span class=nf>ComVisible</span><span class=p>(</span><span class=nb>false</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=n>class</span> <span class=n>Stack</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>:</span> <span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>Generic</span><span class=p>.</span><span class=n>IEnumerable</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl><span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>Generic</span><span class=p>.</span><span class=n>IReadOnlyCollection</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>ICollection</span>
</span></span></code></pre></td></tr></table></div></div><p>常用的方法和属性有 ：</p><p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.stack-1.pop?view=netframework-4.7.2#System_Collections_Generic_Stack_1_Pop" target=_blank rel="external nofollow noopener noreferrer"><code>Pop()</code></a> ：删除并返回栈的顶部的一元素。如果栈没有元素，调用该方法将会抛出<code>InvalidOperationException</code>异常。</p><p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.stack-1.push?view=netframework-4.7.2#System_Collections_Generic_Stack_1_Push__0_" target=_blank rel="external nofollow noopener noreferrer"><code>Push(T)</code></a> :在栈的顶部插入一个元素。</p><p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.stack-1.peek?view=netframework-4.7.2#System_Collections_Generic_Stack_1_Peek" target=_blank rel="external nofollow noopener noreferrer"><code>Peek()</code></a> ：返回但不删除栈的顶部的一个元素。</p><p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.stack-1.contains?view=netframework-4.7.2#System_Collections_Generic_Stack_1_Contains__0_" target=_blank rel="external nofollow noopener noreferrer"><code>Contains(T)</code></a> ：判断一个元素是否在栈中。</p><p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.stack-1.count?view=netframework-4.7.2#System_Collections_Generic_Stack_1_Count" target=_blank rel="external nofollow noopener noreferrer"><code>Count</code></a> ：返回栈中元素的个数。</p><p>下面使用一个简单的示例来说明栈的相关操作：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>var</span> <span class=n>mystacks</span> <span class=o>=</span> <span class=n>new</span> <span class=n>Stack</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=n>mystacks</span><span class=p>.</span><span class=nf>Push</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>mystacks</span><span class=p>.</span><span class=nf>Push</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>mystacks</span><span class=p>.</span><span class=nf>Push</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>foreach</span><span class=p>(</span><span class=n>var</span> <span class=n>num</span> <span class=n>in</span> <span class=n>mystacks</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=nf>Write</span><span class=p>(</span><span class=n>num</span><span class=o>+</span><span class=s>&#34;</span><span class=se>\t</span><span class=s>&#34;</span><span class=p>);</span> <span class=c1>//将会输出：3   2   1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=p>(</span><span class=n>mystacks</span><span class=p>.</span><span class=n>Count</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=nf>Write</span><span class=p>(</span><span class=n>mystacks</span><span class=p>.</span><span class=nf>Pop</span><span class=p>()</span> <span class=o>+</span> <span class=s>&#34;</span><span class=se>\t</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=链表linkedlistt>链表<code>LinkedList&lt;T></code></h2><p><code>LinkedList&lt;T></code>是一个双向链表，其元素指向它前面和后面的元素。</p><p><del>链表的优点是，如果将元素插入列表的中间位置，使用链表就会非常快。在往链表插入一个新的元素时，只需要修改上一个元素的Next引用和下一个元素的Previous引用，使它们的引用指向新插入的元素。</del>【删除原因：表述不准确，Next和Previous都是获取值不能设置值】</p><p><del>链表的缺点是，链表的元素只能一个接一个地访问，这需要较长的时间来查找位于链表中间或尾部的元素。</del></p><p><code>LinkedList&lt;T></code>在.NET中的定义：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=p>[</span><span class=n>System</span><span class=p>.</span><span class=n>Runtime</span><span class=p>.</span><span class=n>InteropServices</span><span class=p>.</span><span class=nf>ComVisible</span><span class=p>(</span><span class=nb>false</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=n>class</span> <span class=n>LinkedList</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>:</span> <span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>Generic</span><span class=p>.</span><span class=n>ICollection</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>Generic</span><span class=p>.</span><span class=n>IEnumerable</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>Generic</span><span class=p>.</span><span class=n>IReadOnlyCollection</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=p>.</span><span class=n>Collections</span><span class=p>.</span><span class=n>ICollection</span><span class=p>,</span> <span class=n>System</span><span class=p>.</span><span class=n>Runtime</span><span class=p>.</span><span class=n>Serialization</span><span class=p>.</span><span class=n>IDeserializationCallback</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=p>.</span><span class=n>Runtime</span><span class=p>.</span><span class=n>Serialization</span><span class=p>.</span><span class=n>ISerializable</span>
</span></span></code></pre></td></tr></table></div></div><p>操作链表时，离不开泛型类<code>LinkedListNode&lt;T></code>，它表示<code>LinkedList&lt;T></code>中的节点。<code>LinkedListNode&lt;T></code>是一个独立定义的类，并不继承自<code>LinkedList&lt;T></code>，但是链表<code>LinkedList&lt;T></code>包含的元素节点均来自于<code>LinkedListNode&lt;T></code>，以下为链表<code>LinkedList&lt;T></code>部分常用方法和属性：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>Last</span> <span class=p>{</span> <span class=n>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>First</span> <span class=p>{</span> <span class=n>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=nf>AddAfter</span><span class=p>(</span><span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>node</span><span class=p>,</span> <span class=n>T</span> <span class=n>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=kt>void</span> <span class=nf>AddAfter</span><span class=p>(</span><span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>node</span><span class=p>,</span> <span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>newNode</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=nf>AddBefore</span><span class=p>(</span><span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>node</span><span class=p>,</span> <span class=n>T</span> <span class=n>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=kt>void</span> <span class=nf>AddBefore</span><span class=p>(</span><span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>node</span><span class=p>,</span> <span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>newNode</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=nf>AddFirst</span><span class=p>(</span><span class=n>T</span> <span class=n>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=kt>void</span> <span class=nf>AddFirst</span><span class=p>(</span><span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>node</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=nf>AddLast</span><span class=p>(</span><span class=n>T</span> <span class=n>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=kt>void</span> <span class=nf>AddLast</span><span class=p>(</span><span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>node</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=nf>Find</span><span class=p>(</span><span class=n>T</span> <span class=n>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=nf>FindLast</span><span class=p>(</span><span class=n>T</span> <span class=n>value</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>上述大多数都与<code>LinkedListNode&lt;T></code>紧密相关：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=p>[</span><span class=n>System</span><span class=p>.</span><span class=n>Runtime</span><span class=p>.</span><span class=n>InteropServices</span><span class=p>.</span><span class=nf>ComVisible</span><span class=p>(</span><span class=nb>false</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=n>sealed</span> <span class=n>class</span> <span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=nf>LinkedListNode</span><span class=p>(</span><span class=n>T</span> <span class=n>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=n>LinkedList</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>List</span> <span class=p>{</span> <span class=n>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>Next</span> <span class=p>{</span> <span class=n>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>Previous</span> <span class=p>{</span> <span class=n>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=n>T</span> <span class=n>Value</span> <span class=p>{</span> <span class=n>get</span><span class=p>;</span> <span class=n>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>通过定义可以知道，使用<code>LinkedListNode&lt;T></code>类，可以获得列表中的下一个元素和上一个元素。<code>LinkedListNode&lt;T></code>定义了属性<code>List</code>（返回对应的<code>LinkedList&lt;T></code>对象）、<code>Next</code>、<code>Previous</code>和<code>Value</code>（返回与节点相关的元素，其类型是T）。并且它提供的属性大多数都是可读不可写。</p><p>注：<code>LinkedListNode&lt;T></code>的成员很少，几乎提供的全是读取的操作，因此实际操作元素比如添加、删除等，还是通过<code>LinkedList&lt;T></code>的成员方法（如上述展示的方法）进行调用。</p><p>下面将使用一个完整的示例说明如何使用链表进行操作，该示例使用链表让文档按照优先级进行排序显示，并且在链表中添加新文档时，新添加的文档应该放在优先级相同的最后一个文档的后面。</p><p>首先定义一个简单的类<code>Document_V2</code>，它包括基本的文档信息已经优先级：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=n>class</span> <span class=n>Document_V2</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=n>string</span> <span class=n>Title</span> <span class=p>{</span> <span class=n>get</span><span class=p>;</span> <span class=n>private</span> <span class=n>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=n>string</span> <span class=n>Content</span> <span class=p>{</span> <span class=n>get</span><span class=p>;</span> <span class=n>private</span> <span class=n>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=n>byte</span> <span class=n>Priority</span> <span class=p>{</span> <span class=n>get</span><span class=p>;</span> <span class=n>private</span> <span class=n>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=nf>Document_V2</span><span class=p>(</span><span class=n>string</span> <span class=n>title</span><span class=p>,</span><span class=n>string</span> <span class=n>content</span><span class=p>,</span><span class=n>byte</span> <span class=n>priority</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=p>.</span><span class=n>Title</span> <span class=o>=</span> <span class=n>title</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=p>.</span><span class=n>Content</span> <span class=o>=</span> <span class=n>content</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=p>.</span><span class=n>Priority</span> <span class=o>=</span> <span class=n>priority</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>接着定义一个操作该类链表的类：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=n>class</span> <span class=n>PriorityDocumentManager</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//集合LinkedList&lt;Document_V2&gt;包含多个LinkedListNode&lt;Document_V2&gt;类型的元素
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>private</span> <span class=n>readonly</span> <span class=n>LinkedList</span><span class=o>&lt;</span><span class=n>Document_V2</span><span class=o>&gt;</span> <span class=n>_documentList</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>//定义包含LinkedListNode&lt;Document_V2&gt;类型的List集合，便于后续使用Next和Previous属性进行遍历
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>private</span> <span class=n>readonly</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>Document_V2</span><span class=o>&gt;&gt;</span> <span class=n>_priorityNodes</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=nf>PriorityDocumentManager</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>_documentList</span> <span class=o>=</span> <span class=n>new</span> <span class=n>LinkedList</span><span class=o>&lt;</span><span class=n>Document_V2</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>_priorityNodes</span> <span class=o>=</span> <span class=n>new</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>Document_V2</span><span class=o>&gt;&gt;</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>//添加10个类型为Document_V2的空节点（节点的Value及其他属性均为null）
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>_priorityNodes</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=n>new</span> <span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>Document_V2</span><span class=o>&gt;</span><span class=p>(</span><span class=n>null</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=kt>void</span> <span class=nf>AddDocument</span><span class=p>(</span><span class=n>Document_V2</span> <span class=n>d</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>d</span> <span class=o>==</span> <span class=n>null</span><span class=p>)</span> <span class=n>throw</span> <span class=n>new</span> <span class=nf>ArgumentNullException</span><span class=p>(</span><span class=s>&#34;d&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nf>AddDocumentToPriorityNode</span><span class=p>(</span><span class=n>d</span><span class=p>,</span> <span class=n>d</span><span class=p>.</span><span class=n>Priority</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>private</span> <span class=kt>void</span> <span class=nf>AddDocumentToPriorityNode</span><span class=p>(</span><span class=n>Document_V2</span> <span class=n>doc</span><span class=p>,</span> <span class=kt>int</span> <span class=n>priority</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>priority</span> <span class=o>&gt;</span> <span class=mi>9</span> <span class=o>||</span> <span class=n>priority</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>throw</span> <span class=n>new</span> <span class=nf>ArgumentException</span><span class=p>(</span><span class=s>&#34;等级必须为0~9&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>_priorityNodes</span><span class=p>[</span><span class=n>priority</span><span class=p>].</span><span class=n>Value</span> <span class=o>==</span> <span class=n>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=o>--</span><span class=n>priority</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>priority</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>//递归调用该方法
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=nf>AddDocumentToPriorityNode</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=n>priority</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>_documentList</span><span class=p>.</span><span class=nf>AddLast</span><span class=p>(</span><span class=n>doc</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>_priorityNodes</span><span class=p>[</span><span class=n>doc</span><span class=p>.</span><span class=n>Priority</span><span class=p>]</span> <span class=o>=</span> <span class=n>_documentList</span><span class=p>.</span><span class=n>Last</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>Document_V2</span><span class=o>&gt;</span> <span class=n>prioNode</span> <span class=o>=</span> <span class=n>_priorityNodes</span><span class=p>[</span><span class=n>priority</span><span class=p>];</span>
</span></span><span class=line><span class=cl>            <span class=c1>//判断优先级是否相同
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=p>(</span><span class=n>priority</span> <span class=o>==</span> <span class=n>doc</span><span class=p>.</span><span class=n>Priority</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>_documentList</span><span class=p>.</span><span class=nf>AddAfter</span><span class=p>(</span><span class=n>prioNode</span><span class=p>,</span> <span class=n>doc</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>_priorityNodes</span><span class=p>[</span><span class=n>doc</span><span class=p>.</span><span class=n>Priority</span><span class=p>]</span> <span class=o>=</span> <span class=n>prioNode</span><span class=p>.</span><span class=n>Next</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>LinkedListNode</span><span class=o>&lt;</span><span class=n>Document_V2</span><span class=o>&gt;</span> <span class=n>firstPrioNode</span> <span class=o>=</span> <span class=n>prioNode</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=c1>//循环遍历所有链接节点
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>while</span> <span class=p>(</span><span class=n>firstPrioNode</span><span class=p>.</span><span class=n>Previous</span> <span class=o>!=</span> <span class=n>null</span> 
</span></span><span class=line><span class=cl>                    <span class=o>&amp;&amp;</span> <span class=n>firstPrioNode</span><span class=p>.</span><span class=n>Previous</span><span class=p>.</span><span class=n>Value</span><span class=p>.</span><span class=n>Priority</span> <span class=o>==</span> <span class=n>prioNode</span><span class=p>.</span><span class=n>Value</span><span class=p>.</span><span class=n>Priority</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>firstPrioNode</span> <span class=o>=</span> <span class=n>prioNode</span><span class=p>.</span><span class=n>Previous</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=n>prioNode</span> <span class=o>=</span> <span class=n>firstPrioNode</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=n>_documentList</span><span class=p>.</span><span class=nf>AddBefore</span><span class=p>(</span><span class=n>firstPrioNode</span><span class=p>,</span> <span class=n>doc</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>_priorityNodes</span><span class=p>[</span><span class=n>doc</span><span class=p>.</span><span class=n>Priority</span><span class=p>]</span> <span class=o>=</span> <span class=n>firstPrioNode</span><span class=p>.</span><span class=n>Previous</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=kt>void</span> <span class=nf>DisplayAllNodes</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>foreach</span> <span class=p>(</span><span class=n>Document_V2</span> <span class=n>doc</span> <span class=n>in</span> <span class=n>_documentList</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=err>$</span><span class=s>&#34;priority:{doc.Priority},tilte:{doc.Title}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=n>Document_V2</span> <span class=nf>GetDocument</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Document_V2</span> <span class=n>doc</span> <span class=o>=</span> <span class=n>_documentList</span><span class=p>.</span><span class=n>First</span><span class=p>.</span><span class=n>Value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>_documentList</span><span class=p>.</span><span class=nf>RemoveFirst</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>doc</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>调用上述执行：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=k>static</span> <span class=kt>void</span> <span class=nf>Run</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>var</span> <span class=n>pdm</span> <span class=o>=</span> <span class=n>new</span> <span class=nf>PriorityDocumentManager</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>pdm</span><span class=p>.</span><span class=nf>AddDocument</span><span class=p>(</span><span class=n>new</span> <span class=nf>Document_V2</span><span class=p>(</span><span class=s>&#34;one&#34;</span><span class=p>,</span> <span class=s>&#34;示例一&#34;</span><span class=p>,</span> <span class=mi>8</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=n>pdm</span><span class=p>.</span><span class=nf>AddDocument</span><span class=p>(</span><span class=n>new</span> <span class=nf>Document_V2</span><span class=p>(</span><span class=s>&#34;two&#34;</span><span class=p>,</span> <span class=s>&#34;示例二&#34;</span><span class=p>,</span> <span class=mi>3</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=n>pdm</span><span class=p>.</span><span class=nf>AddDocument</span><span class=p>(</span><span class=n>new</span> <span class=nf>Document_V2</span><span class=p>(</span><span class=s>&#34;three&#34;</span><span class=p>,</span> <span class=s>&#34;示例三&#34;</span><span class=p>,</span> <span class=mi>4</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=n>pdm</span><span class=p>.</span><span class=nf>AddDocument</span><span class=p>(</span><span class=n>new</span> <span class=nf>Document_V2</span><span class=p>(</span><span class=s>&#34;for&#34;</span><span class=p>,</span> <span class=s>&#34;示例四&#34;</span><span class=p>,</span> <span class=mi>8</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=n>pdm</span><span class=p>.</span><span class=nf>AddDocument</span><span class=p>(</span><span class=n>new</span> <span class=nf>Document_V2</span><span class=p>(</span><span class=s>&#34;five&#34;</span><span class=p>,</span> <span class=s>&#34;示例五&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=n>pdm</span><span class=p>.</span><span class=nf>AddDocument</span><span class=p>(</span><span class=n>new</span> <span class=nf>Document_V2</span><span class=p>(</span><span class=s>&#34;six&#34;</span><span class=p>,</span> <span class=s>&#34;示例六&#34;</span><span class=p>,</span> <span class=mi>9</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=n>pdm</span><span class=p>.</span><span class=nf>AddDocument</span><span class=p>(</span><span class=n>new</span> <span class=nf>Document_V2</span><span class=p>(</span><span class=s>&#34;seven&#34;</span><span class=p>,</span> <span class=s>&#34;示例七&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=n>pdm</span><span class=p>.</span><span class=nf>AddDocument</span><span class=p>(</span><span class=n>new</span> <span class=nf>Document_V2</span><span class=p>(</span><span class=s>&#34;eight&#34;</span><span class=p>,</span> <span class=s>&#34;示例八&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=n>pdm</span><span class=p>.</span><span class=nf>DisplayAllNodes</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>输出结果：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=nt>priority</span><span class=p>:</span><span class=nd>9</span><span class=o>,</span><span class=nt>title</span><span class=p>:</span><span class=nd>six</span>
</span></span><span class=line><span class=cl><span class=nt>priority</span><span class=p>:</span><span class=nd>8</span><span class=o>,</span><span class=nt>title</span><span class=p>:</span><span class=nd>one</span>
</span></span><span class=line><span class=cl><span class=nt>priority</span><span class=p>:</span><span class=nd>8</span><span class=o>,</span><span class=nt>title</span><span class=p>:</span><span class=nd>for</span>
</span></span><span class=line><span class=cl><span class=nt>priority</span><span class=p>:</span><span class=nd>4</span><span class=o>,</span><span class=nt>title</span><span class=p>:</span><span class=nd>three</span>
</span></span><span class=line><span class=cl><span class=nt>priority</span><span class=p>:</span><span class=nd>3</span><span class=o>,</span><span class=nt>title</span><span class=p>:</span><span class=nd>two</span>
</span></span><span class=line><span class=cl><span class=nt>priority</span><span class=p>:</span><span class=nd>1</span><span class=o>,</span><span class=nt>title</span><span class=p>:</span><span class=nd>five</span>
</span></span><span class=line><span class=cl><span class=nt>priority</span><span class=p>:</span><span class=nd>1</span><span class=o>,</span><span class=nt>title</span><span class=p>:</span><span class=nd>seven</span>
</span></span><span class=line><span class=cl><span class=nt>priority</span><span class=p>:</span><span class=nd>1</span><span class=o>,</span><span class=nt>title</span><span class=p>:</span><span class=nd>eight</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=有序列表sortedlisttkey-tvalue>有序列表<code>SortedList&lt;TKey, TValue></code></h2><p>使用<code>SortedList&lt;TKey, TValue></code>类可以基于键对集合排序。</p><p>使用一个简单的示例对其进行操作说明：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>var</span> <span class=n>mysortedlist</span> <span class=o>=</span> <span class=n>new</span> <span class=n>SortedList</span><span class=o>&lt;</span><span class=n>string</span><span class=p>,</span> <span class=n>string</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=n>mysortedlist</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=s>&#34;one&#34;</span><span class=p>,</span> <span class=s>&#34;一&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>mysortedlist</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=s>&#34;two&#34;</span><span class=p>,</span> <span class=s>&#34;二&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>mysortedlist</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=s>&#34;three&#34;</span><span class=p>,</span> <span class=s>&#34;三&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>mysortedlist</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=s>&#34;four&#34;</span><span class=p>,</span> <span class=s>&#34;四&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>//还可以使用索引的形式添加元素，索引参数是键
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>mysortedlist</span><span class=p>[</span><span class=s>&#34;five&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s>&#34;五&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>//修改值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>mysortedlist</span><span class=p>[</span><span class=s>&#34;three&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s>&#34;3&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>foreach</span> <span class=p>(</span><span class=n>var</span> <span class=n>item</span> <span class=n>in</span> <span class=n>mysortedlist</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=err>$</span><span class=s>&#34;{item.Key}:{item.Value}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>上述将会按照键自动的进行排序显示，显示结果：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=nt>five</span><span class=o>:</span><span class=err>五</span>
</span></span><span class=line><span class=cl><span class=nt>four</span><span class=o>:</span><span class=err>四</span>
</span></span><span class=line><span class=cl><span class=nt>one</span><span class=o>:</span><span class=err>一</span>
</span></span><span class=line><span class=cl><span class=nt>three</span><span class=p>:</span><span class=nd>3</span>
</span></span><span class=line><span class=cl><span class=nt>two</span><span class=o>:</span><span class=err>二</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=字典dictionarytkey-tvalue>字典<code>Dictionary&lt;TKey, TValue></code></h2><p>字典表示一种非常复杂的数据结构，由键和值组成，这种数据结构允许按照某个键来访问元素。字典也被称为映射或散列表。</p><h4 id=字典初始化>字典初始化</h4><p>之前只能先实例一个字典对象，然后使用<code>Add()</code>方法添加元素，在C#6定义了一个新的语法，可以在声明的同时初始化字典，例如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>var</span> <span class=n>dic</span> <span class=o>=</span> <span class=n>new</span> <span class=n>Dictionary</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=n>string</span><span class=o>&gt;</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//第一元素的键是100
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>[</span><span class=mi>100</span><span class=p>]</span> <span class=o>=</span> <span class=s>&#34;第一个元素&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=mi>200</span><span class=p>]</span> <span class=o>=</span> <span class=s>&#34;第二个元素&#34;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=键的类型>键的类型</h4><p>字典类要确定元素的位置，它就要调用<code>GetHashCode()</code>方法，<code>GetHashCode()</code>方法返回的int由字典用于计算在对应位置放置元素的索引，因此用作字典中的键的类型必须重写<code>Object</code>类的<code>GetHashCode()</code>方法。<code>GetHashCode()</code>方法的实现代码必须满足如下要求：</p><ul><li>相同的对象应该总是返回相同的值。</li><li>不同的对象可以返回相同的值。</li><li>不能抛出异常。</li><li>至少使用一个实例字段。</li><li>散列代码（调用<code>GetHashCode</code>方法得到的值）在对象的生存期中不发生变化。</li></ul><p>除了必须要满足的要求外，最好还满足如下要求：</p><ul><li>它应该执行的比较快，计算开销不大。</li><li>散列代码值应平均分布在<code>int</code>可以存储的整个数字范围内。</li></ul><p>注意：字典的性能 取决于<code>GetHashCode()</code>方法的实现代码。</p><p>通过<code>GetHashCode</code>得到的散列代码值的范围应该尽可能的分布在int可以存储的整个数字范围内，避免两个键返回的散列代码值得到相同的索引（字典中的索引包含一个到值的链接，一个索引项可以关联多个值，此处的索引不是指索引下标），这会降低性能，因为字典类需要寻找最近的可用空闲位置来存储第二个数据项，这需要进行一定的搜索，如果在排序时许多键都有相同的索引，这类冲突就更可能出现，所以，当计算出来的散列代码值平均分布在<code>int.MinValue</code>和<code>int.MaxValue</code>之间时，这种风险会降低到最小。</p><blockquote><p>除了实现<code>GetHashCode()</code>方法之外，键类型还必须实现<code>IEquatable&lt;T>.EQuals()</code>方法，或重写<code>Object</code>类的<code>Equals()</code>方法。因为不同的键对象可能返回相同的散列代码，所以字典使用<code>Equals()</code>方法来比较键。字典检查两个键A和B是否相等，并调用<code>A.Equals(B)</code>方法。这说明必须确保下述条件总是成立：</p><p>如果<code>A.Equals(B)</code>方法返回<code>true</code>，则<code>A.GetHashCode()</code>和<code>B.GetHashCode()</code>方法必须总是返回相同的散列代码。</p><p>注意：如果为<code>Equals()</code>方法提供了重写版本，但没有提供<code>GetHashCode()</code>方法的重写版本，C#编译器就会显示一个编译警告。</p></blockquote><p>综上所述，应用在字典中的键，必须实现或重写<code>GetHashCode()</code>和<code>IEquatable&lt;T>.EQuals()</code>方法。如果这两个方法都没有实现，</p><blockquote><p>可以创建一个实现<code>IEqualityComparer&lt;T></code>接口的比较器，<code>IEqualityComparer&lt;T></code>接口定义了<code>GetHashCode()</code>和<code>Equals()</code>方法，并将传递的对象作为参数，因此可以提供与对象类型不同的实现方式。<code>Dictionary&lt;TKey,TValue></code>构造函数的一个重载版本允许传递一个实现了<code>IEqualityComparer&lt;T></code>接口的对象。如果把这个对象赋予字典，该类就用于生成散列代码并比较键。</p></blockquote><p>下面通过一个示例进行说明。首先创建字典中的键将要使用到的类型：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=k>struct</span> <span class=nl>EmployeeId</span> <span class=p>:</span> <span class=n>IEquatable</span><span class=o>&lt;</span><span class=n>EmployeeId</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>private</span> <span class=n>readonly</span> <span class=kt>char</span> <span class=n>prefix</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>private</span> <span class=n>readonly</span> <span class=kt>int</span> <span class=n>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=nf>EmployeeId</span><span class=p>(</span><span class=n>string</span> <span class=n>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//System.Diagnostics.Contracts.Contract.Requires&lt;ArgumentNullException&gt;(id != null);
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>prefix</span> <span class=o>=</span> <span class=p>(</span><span class=n>id</span><span class=p>.</span><span class=nf>ToUpper</span><span class=p>())[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>numLength</span> <span class=o>=</span> <span class=n>id</span><span class=p>.</span><span class=n>Length</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>try</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>number</span> <span class=o>=</span> <span class=kt>int</span><span class=p>.</span><span class=nf>Parse</span><span class=p>(</span><span class=n>id</span><span class=p>.</span><span class=nf>Substring</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>numLength</span> <span class=o>&gt;</span> <span class=mi>6</span> <span class=o>?</span> <span class=mi>6</span> <span class=o>:</span> <span class=n>numLength</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nf>catch</span> <span class=p>(</span><span class=n>Exception</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>throw</span> <span class=n>new</span> <span class=nf>Exception</span><span class=p>(</span><span class=s>&#34;EmployeeId格式错误&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=n>override</span> <span class=n>string</span> <span class=nf>ToString</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>prefix</span><span class=p>.</span><span class=nf>ToString</span><span class=p>()</span> <span class=o>+</span> <span class=err>$</span><span class=s>&#34;{number,6:000000}&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>//重写GetHashCode()方法
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>public</span> <span class=n>override</span> <span class=kt>int</span> <span class=nf>GetHashCode</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//此条语句只是为了使得到的值能够尽可能的平均到int范围
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>//将数字向左移动16位，再与原数字进行异或操作，得到的结果乘以16进制数15051505
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=p>(</span><span class=n>number</span> <span class=o>^</span> <span class=n>number</span> <span class=o>&lt;&lt;</span> <span class=mi>16</span><span class=p>)</span> <span class=o>*</span> <span class=mh>0x15051505</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>//必须实现Equals()方法
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>public</span> <span class=kt>bool</span> <span class=nf>Equals</span><span class=p>(</span><span class=n>EmployeeId</span> <span class=n>other</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//return (_prefix == other?._prefix &amp;&amp; _number == other?._number);
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=p>(</span><span class=n>prefix</span> <span class=o>==</span> <span class=n>other</span><span class=p>.</span><span class=n>prefix</span> <span class=o>&amp;&amp;</span> <span class=n>number</span> <span class=o>==</span> <span class=n>other</span><span class=p>.</span><span class=n>number</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=n>override</span> <span class=kt>bool</span> <span class=nf>Equals</span><span class=p>(</span><span class=n>object</span> <span class=n>obj</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nf>Equals</span><span class=p>((</span><span class=n>EmployeeId</span><span class=p>)</span><span class=n>obj</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>//使用 operator 关键字重载内置运算符==
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>public</span> <span class=k>static</span> <span class=kt>bool</span> <span class=n>operator</span> <span class=o>==</span><span class=p>(</span><span class=n>EmployeeId</span> <span class=n>left</span><span class=p>,</span> <span class=n>EmployeeId</span> <span class=n>right</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>left</span><span class=p>.</span><span class=nf>Equals</span><span class=p>(</span><span class=n>right</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>//使用 operator 关键字重载内置运算符!=
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>public</span> <span class=k>static</span> <span class=kt>bool</span> <span class=n>operator</span> <span class=o>!=</span><span class=p>(</span><span class=n>EmployeeId</span> <span class=n>left</span><span class=p>,</span> <span class=n>EmployeeId</span> <span class=n>right</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=o>!</span><span class=p>(</span><span class=n>left</span> <span class=o>==</span> <span class=n>right</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>接着创建字典中的值对应的类型：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=n>class</span> <span class=n>Employee</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>private</span> <span class=n>string</span> <span class=n>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>private</span> <span class=n>decimal</span> <span class=n>salary</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>private</span> <span class=n>readonly</span> <span class=n>EmployeeId</span> <span class=n>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=nf>Employee</span><span class=p>(</span><span class=n>EmployeeId</span> <span class=n>id</span><span class=p>,</span> <span class=n>string</span> <span class=n>name</span><span class=p>,</span> <span class=n>decimal</span> <span class=n>salary</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=p>.</span><span class=n>id</span> <span class=o>=</span> <span class=n>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=p>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=p>.</span><span class=n>salary</span> <span class=o>=</span> <span class=n>salary</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>public</span> <span class=n>override</span> <span class=n>string</span> <span class=nf>ToString</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=err>$</span><span class=s>&#34;{id.ToString()}:{name,-20} {salary:C}&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>定义字典，并调用：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>public</span> <span class=k>static</span> <span class=kt>void</span> <span class=nf>Run</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>var</span> <span class=n>idTony</span> <span class=o>=</span> <span class=n>new</span> <span class=nf>EmployeeId</span><span class=p>(</span><span class=s>&#34;C3755&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>var</span> <span class=n>tony</span> <span class=o>=</span> <span class=n>new</span> <span class=nf>Employee</span><span class=p>(</span><span class=n>idTony</span><span class=p>,</span> <span class=s>&#34;Tony Stewart&#34;</span><span class=p>,</span> <span class=mf>379025.00</span><span class=n>m</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>var</span> <span class=n>idCarl</span> <span class=o>=</span> <span class=n>new</span> <span class=nf>EmployeeId</span><span class=p>(</span><span class=s>&#34;F3547&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>var</span> <span class=n>carl</span> <span class=o>=</span> <span class=n>new</span> <span class=nf>Employee</span><span class=p>(</span><span class=n>idCarl</span><span class=p>,</span> <span class=s>&#34;Carl Edwards&#34;</span><span class=p>,</span> <span class=mf>403466.00</span><span class=n>m</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>var</span> <span class=n>idKevin</span> <span class=o>=</span> <span class=n>new</span> <span class=nf>EmployeeId</span><span class=p>(</span><span class=s>&#34;C3386&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>var</span> <span class=n>kevin</span> <span class=o>=</span> <span class=n>new</span> <span class=nf>Employee</span><span class=p>(</span><span class=n>idKevin</span><span class=p>,</span> <span class=s>&#34;kevin Harwick&#34;</span><span class=p>,</span> <span class=mf>415261.00</span><span class=n>m</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//字典使用EmployeeId对象来索引
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>var</span> <span class=n>employees</span> <span class=o>=</span> <span class=n>new</span> <span class=n>Dictionary</span><span class=o>&lt;</span><span class=n>EmployeeId</span><span class=p>,</span> <span class=n>Employee</span><span class=o>&gt;</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=n>idTony</span><span class=p>]</span> <span class=o>=</span> <span class=n>tony</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=n>idCarl</span><span class=p>]</span> <span class=o>=</span> <span class=n>carl</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=n>idKevin</span><span class=p>]</span> <span class=o>=</span> <span class=n>kevin</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>foreach</span> <span class=p>(</span><span class=n>var</span> <span class=n>employee</span> <span class=n>in</span> <span class=n>employees</span><span class=p>.</span><span class=n>Values</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=n>employee</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=lookuptkeytelement><code>Lookup&lt;TKey,TElement></code></h4><p><code>Lookup&lt;TKey,TElement></code>类非常类似于<code>Dictionary&lt;TKey,TValue></code>类，但是<code>Lookup&lt;TKey,TElement></code>表示每个映射到一个或多个值的键集合，也就是它的键可以映射到一个或多个值，<code>Lookup&lt;TKey,TElement></code>中的<code>TElement</code>表示的是<code>Lookup&lt;TKey,TElement></code>中每个<code>IEnumerable&lt;T></code>值的元素类型。所以要获取其中的每个元素，可以使用循环进行遍历：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>var</span> <span class=n>racers</span> <span class=o>=</span> <span class=n>new</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Racer</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=n>racers</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=n>new</span> <span class=nf>Racer</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=s>&#34;zhang&#34;</span><span class=p>,</span> <span class=s>&#34;san&#34;</span><span class=p>,</span> <span class=s>&#34;zhongguo&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=n>racers</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=n>new</span> <span class=nf>Racer</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=s>&#34;li&#34;</span><span class=p>,</span> <span class=s>&#34;si&#34;</span><span class=p>,</span> <span class=s>&#34;riben&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=n>racers</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=n>new</span> <span class=nf>Racer</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=s>&#34;wang&#34;</span><span class=p>,</span> <span class=s>&#34;wu&#34;</span><span class=p>,</span> <span class=s>&#34;zhongguo&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=n>racers</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=n>new</span> <span class=nf>Racer</span><span class=p>(</span><span class=mi>4</span><span class=p>,</span> <span class=s>&#34;zhao&#34;</span><span class=p>,</span> <span class=s>&#34;liu&#34;</span><span class=p>,</span> <span class=s>&#34;meiguo&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=n>lookupRacers</span><span class=o>=</span> <span class=n>racers</span><span class=p>.</span><span class=nf>ToLookup</span><span class=p>(</span><span class=n>r</span> <span class=o>=&gt;</span> <span class=n>r</span><span class=p>.</span><span class=n>Country</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>foreach</span> <span class=p>(</span><span class=n>var</span> <span class=n>item</span> <span class=n>in</span> <span class=n>lookupRacers</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>foreach</span><span class=p>(</span><span class=n>Racer</span> <span class=n>r</span>  <span class=n>in</span> <span class=n>lookupRacers</span><span class=p>[</span><span class=n>item</span><span class=p>.</span><span class=n>Key</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=err>$</span><span class=s>&#34;{item.Key}:{r.ToString()}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=有序字典sorteddictionarytkeytvalue>有序字典<code>SortedDictionary&lt;Tkey,TValue></code></h4><p><code>SortedDictionary&lt;TKey,TValue></code>和<code>SortedList&lt;TKey,TValue></code>功能类似，但因为<code>SortedList&lt;Tkey,TValue></code>实现为一个基于数组的列表，而<code>SortedDictionary&lt;TKey,TValue></code>类实现为一个字典，所以它们有不同的特征。</p><ul><li><code>SortedList&lt;TKey,TValue></code>使用的内存比<code>SortedDictionary&lt;TKey,TValue></code>少。</li><li><code>SortedDictionary&lt;TKey,TValue></code>的元素插入和删除操作比较快。</li><li>在用已排好序的数据填充集合时，若不需要修改容量，<code>SortedList&lt;TKey,TValue></code>就比较快。</li></ul><p>注意：<code>SortedList</code>使用的内存比<code>SortedDictionary</code>少，但<code>SortedDictionary</code>在插入和删除未排序的数据时比较快。</p><p><code>SortedDictionary&lt;TKey,TValue></code>是一个二叉搜索树，其中的元素根据键来排序。该键类型必须实现<code>IComparable&lt;Tkey></code>接口。如果键的类型不能排序，则可以创建一个实现了<code>IComparer&lt;Tkey></code>接口的比较器，将比较器用作有序字典的构造函数的一个参数。</p><h2 id=集set>集<code>Set</code></h2><p>集（<code>set</code>）是包含<strong>不重复的元素</strong>的集合。主要有两个集，<code>HashSet&lt;T></code>和<code>SortedSet&lt;T></code>，它们都实现<code>ISet&lt;T></code>接口，其中，<code>HashSet&lt;T></code>集包含不重复元素的无序列表，<code>SortedSet&lt;T></code>集包含不重复元素的有序列表。</p><p><code>ISet&lt;T></code>常用方法：</p><ul><li><code>bool Add(T item)</code>：向当前集添加元素并返回一个值以指示元素是否已成功添加。</li><li><code>void ExceptWith(IEnumerable&lt;T> other)</code>：从当前集中删除指定集合中的所有元素。</li><li><code>bool IsSubsetOf(IEnumerable&lt;T> other)</code>：确定集合是否是指定集合的子集。</li><li><code>bool IsSupersetOf(IEnumerable&lt;T> other)</code>：确定当前集是否是指定集合的超集。</li><li><code>bool Overlaps(IEnumerable&lt;T> other)</code>：确定当前集是否与指定集合重叠。</li><li><code>void UnionWith(IEnumerable&lt;T> other)</code>：修改当前集，使其包含当前集，指定集合或两者中存在的所有元素。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>var</span> <span class=n>hsA</span> <span class=o>=</span> <span class=n>new</span> <span class=n>HashSet</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=p>()</span> <span class=p>{</span> <span class=s>&#34;one&#34;</span><span class=p>,</span> <span class=s>&#34;two&#34;</span><span class=p>,</span> <span class=s>&#34;three&#34;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=n>hsB</span> <span class=o>=</span> <span class=n>new</span> <span class=n>HashSet</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=p>()</span> <span class=p>{</span> <span class=s>&#34;two&#34;</span><span class=p>,</span> <span class=s>&#34;three&#34;</span><span class=p>,</span> <span class=s>&#34;four&#34;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>hsA</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=s>&#34;five&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=s>&#34;添加了five&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>hsA</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=s>&#34;two&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=s>&#34;已经存在了two&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=n>hsM</span> <span class=o>=</span> <span class=n>new</span> <span class=n>HashSet</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=p>()</span> <span class=p>{</span> <span class=s>&#34;one&#34;</span><span class=p>,</span> <span class=s>&#34;two&#34;</span><span class=p>,</span> <span class=s>&#34;three&#34;</span><span class=p>,</span> <span class=s>&#34;four&#34;</span><span class=p>,</span> <span class=s>&#34;five&#34;</span><span class=p>,</span> <span class=s>&#34;six&#34;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//hsA的每个元素是否都包含在hsB中
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>if</span> <span class=p>(</span><span class=n>hsA</span><span class=p>.</span><span class=nf>IsSubsetOf</span><span class=p>(</span><span class=n>hsB</span><span class=p>))</span><span class=c1>//false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=s>&#34;hsA是hsB的子集&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>hsA</span><span class=p>.</span><span class=nf>IsSubsetOf</span><span class=p>(</span><span class=n>hsM</span><span class=p>))</span><span class=c1>//true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=s>&#34;hsA是hsM的子集&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//hsA是否是hsB的超集
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>if</span> <span class=p>(</span><span class=n>hsA</span><span class=p>.</span><span class=nf>IsSupersetOf</span><span class=p>(</span><span class=n>hsB</span><span class=p>))</span><span class=c1>//false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=s>&#34;hsA是hsB的超集&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>hsM</span><span class=p>.</span><span class=nf>IsSupersetOf</span><span class=p>(</span><span class=n>hsB</span><span class=p>))</span><span class=c1>//true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=s>&#34;hsM是hsB的超集&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//判断hsA是否与hsB有公共元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>if</span> <span class=p>(</span><span class=n>hsA</span><span class=p>.</span><span class=nf>Overlaps</span><span class=p>(</span><span class=n>hsB</span><span class=p>))</span><span class=c1>//true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=s>&#34;hsA与hsB包含共同元素&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=n>allhs</span> <span class=o>=</span> <span class=n>new</span> <span class=n>SortedSet</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=p>(</span><span class=n>hsA</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>allhs</span><span class=p>.</span><span class=nf>UnionWith</span><span class=p>(</span><span class=n>hsB</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>allhs</span><span class=p>.</span><span class=nf>UnionWith</span><span class=p>(</span><span class=n>hsM</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>foreach</span> <span class=p>(</span><span class=n>var</span> <span class=n>n</span> <span class=n>in</span> <span class=n>allhs</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=nf>Write</span><span class=p>(</span><span class=n>n</span> <span class=o>+</span> <span class=s>&#34;</span><span class=se>\t</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=n>ex</span> <span class=o>=</span> <span class=n>new</span> <span class=n>HashSet</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=p>()</span> <span class=p>{</span> <span class=s>&#34;five&#34;</span><span class=p>,</span> <span class=s>&#34;three&#34;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=c1>//删除ex包含的元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>allhs</span><span class=p>.</span><span class=nf>ExceptWith</span><span class=p>(</span><span class=n>ex</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=n>Console</span><span class=p>.</span><span class=nf>WriteLine</span><span class=p>(</span><span class=s>&#34;删除后：&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>foreach</span> <span class=p>(</span><span class=n>var</span> <span class=n>n</span> <span class=n>in</span> <span class=n>allhs</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=nf>Write</span><span class=p>(</span><span class=n>n</span> <span class=o>+</span> <span class=s>&#34;</span><span class=se>\t</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=性能>性能</h2><p>集合的性能决定了操作时应该选择哪种集合。在MSDN文档中，集合的方法常常有性能提示，给出了以大写O记号表示的操作时间：</p><ul><li>O(1)：表示无论集合中有多少数据项，这个操作需要的时间都不变。</li><li>O(n)：表示对于集合执行一个操作需要的时间在最坏情况下是N。</li><li>O(log n)：表示操作需要的时间随着集合中元素的增加而增加，但每个元素需要增加的时间不是线性的，而是成对数曲线。</li></ul><p>下表列出了集合类执行不同操作的性能，如果单元格中有多个大O值，表示若集合需要重置大小，该操作就需要一定的时间。一般重置大小出现在集合的容量不足以满足需要添加的元素总个数，因此最好避免重置集合的大小，而应把集合的容量设置为一个可以包含所有元素的值。</p><p>如果表单元格的内容是n/a（代表not applicable），就表示这个操作不能应用于这个集合类型。</p><table><thead><tr><th>集合</th><th>Add</th><th>Insert</th><th>Remove</th><th>Item</th><th>Sort</th><th>Find</th></tr></thead><tbody><tr><td><code>List&lt;T></code></td><td>如果集合必须重置大小，就是O(1)或O(n)</td><td>O(n)</td><td>O(n)</td><td>O(1)</td><td>O(n log n)，最坏的情况是O(n^2)</td><td>O(n)</td></tr><tr><td><code>Stack&lt;T></code></td><td><code>Push()</code>，如果栈必须重置大小，就是O(1)或O(n)</td><td>n/a</td><td>Pop，O(1)</td><td>n/a</td><td>n/a</td><td>n/a</td></tr><tr><td><code>Queue&lt;T></code></td><td><code>Enqueue()</code>,如果队列必须重置大小，就是O(1)或O(n)</td><td>n/a</td><td><code>Dequeue</code>, O(1)</td><td>n/a</td><td>n/a</td><td>n/a</td></tr><tr><td><code>HashSet&lt;T></code></td><td>如果集必须重置大小，就是O(1)或O(n)</td><td><code>Add</code>,O(1)或O(n)</td><td>O(1)</td><td>n/a</td><td>n/a</td><td>n/a</td></tr><tr><td><code>SortedSet&lt;T></code></td><td>如果集必须重置大小，就是O(1)或O(n)</td><td><code>Add</code>,O(1)或O(n)</td><td>O(1)</td><td>n/a</td><td>n/a</td><td>n/a</td></tr><tr><td><code>LinkedList&lt;T></code></td><td><code>AddLast</code>，O(1)</td><td><code>AddAfter</code>, O(1)</td><td>O(1)</td><td>n/a</td><td>n/a</td><td>O(n)</td></tr><tr><td><code>Dictionary &lt;TKey,TValue></code></td><td>O(1)或O(n)</td><td>n/a</td><td>O(1)</td><td>O(1)</td><td>n/a</td><td>n/a</td></tr><tr><td><code>SortedDictionary &lt;Tkey,TValue></code></td><td>O(log n)</td><td>n/a</td><td>O(log n)</td><td>O(log n)</td><td>n/a</td><td>n/a</td></tr><tr><td><code>SortedList &lt;TKey,TValue></code></td><td>无序数据为O(n)；如果必须重置大小，就是O(n)；到列表的尾部，就是O(log n)</td><td>n/a</td><td>O(n)</td><td>读/写是O(log n);如果键在列表中，就是O(log n)；如果键不在列表中，就是O(n)</td><td>n/a</td><td>n/a</td></tr></tbody></table><hr><h3 id=参考资源>参考资源</h3><ul><li>《C#高级编程（第10版）》</li><li><a href=https://docs.microsoft.com/zh-cn/dotnet/standard/collections/ target=_blank rel="external nofollow noopener noreferrer">C#集合和数据结构</a></li></ul><hr><p>作者：OctOcean
链接：https://www.jianshu.com/p/c654991806e9
来源：简书
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="2023-01-29 01:20:46">更新于 2023-01-29&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/posts/2023/01/csharp%E9%9B%86%E5%90%88/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://canw0916.github.io/posts/2023/01/csharp%E9%9B%86%E5%90%88/ data-title=C#基础提升系列——C#集合 data-via=canw0916 data-hashtags=C#,集合><i class="fa-brands fa-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://canw0916.github.io/posts/2023/01/csharp%E9%9B%86%E5%90%88/ data-hashtag=C#><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://canw0916.github.io/posts/2023/01/csharp%E9%9B%86%E5%90%88/ data-title=C#基础提升系列——C#集合><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 百度" data-sharer=baidu data-url=https://canw0916.github.io/posts/2023/01/csharp%E9%9B%86%E5%90%88/ data-title=C#基础提升系列——C#集合><i data-svg-src=/lib/simple-icons/icons/baidu.min.svg aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Evernote" data-sharer=evernote data-url=https://canw0916.github.io/posts/2023/01/csharp%E9%9B%86%E5%90%88/ data-title=C#基础提升系列——C#集合><i class="fa-brands fa-evernote fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/c%23/ class=post-tag>C#</a><a href=/tags/%E9%9B%86%E5%90%88/ class=post-tag>集合</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/2023/01/csharp%E6%B3%9B%E5%9E%8B/ class=post-nav-item rel=prev title=C#基础提升系列——C#泛型><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>C#基础提升系列——C#泛型</a>
<a href=/posts/2023/01/csharp%E7%89%B9%E6%AE%8A%E9%9B%86%E5%90%88/ class=post-nav-item rel=next title=C#基础提升系列——C#特殊集合>C#基础提升系列——C#特殊集合<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=giscus><script src=https://giscus.app/client.js data-repo=canw0916/BlogGiscus data-repo-id=R_kgDOI27Tcw data-category=Announcements data-category-id=DIC_kwDOI27Tc84CT208 data-mapping=og:title data-theme=preferred_color_scheme data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-lang=zh-CN data-loading=lazy crossorigin=anonymous async defer></script></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/ rel="external nofollow noopener noreferrer">giscus</a>.</noscript></div></article></main><footer class=footer><div class=footer-container><div class="footer-line powered">由 <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.110.0">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.2.17-RC"><img class=fixit-icon src=/fixit.min.svg alt="FixIt logo">&nbsp;FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2023</span><span class=author itemprop=copyrightHolder>
<a href=https://canw0916.github.io/ target=_blank rel="external nofollow noopener noreferrer">火山</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"><span class=site-time title='网站运行中 ...'><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden=true></i><span class="run-times ms-1">网站运行中 ...</span></span></div><div class="footer-line visitor"><span id=busuanzi_container_site_uv title=总访客数><i class="fa-regular fa-user fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=总访问量><i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div><div class="fixed-button view-comments d-none" role=button aria-label=查看评论><i class="fa-solid fa-comment fa-fw" aria-hidden=true></i></div></div><a href=https://github.com/canw0916 title="Visit My Github Repository" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=/lib/lightgallery/css/lightgallery-bundle.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><link rel=stylesheet href=/lib/pace/themes/blue/pace-theme-minimal.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/fuse/fuse.min.js defer></script><script src=/lib/lazysizes/lazysizes.min.js async defer></script><script src=/lib/lightgallery/lightgallery.min.js defer></script><script src=/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=/lib/lightgallery/plugins/zoom/lg-zoom.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script src=/lib/pace/pace.min.js async defer></script><script>window.config={code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:30},comment:{enable:!0,expired:!1,giscus:{darkTheme:"transparent_dark",lightTheme:"light"}},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:30,threshold:.3,type:"fuse",useExtendedSearch:!1},siteTime:"2023-01-25T00:00:00+08:00"}</script><script src=/js/theme.min.js defer></script></body></html>